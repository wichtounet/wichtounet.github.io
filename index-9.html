<!DOCTYPE html><html lang="en">
<head>
    <link href="favicon.ico" rel="icon" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Website about vtechnologies Java, Spring, OSGi, Hardware,...">
    <meta name="author" content="Baptiste Wicht">
    <title>@Blog("Baptiste Wicht") (old posts, page 9) | @Blog("Baptiste Wicht")</title>
    
            <link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
      <link rel="canonical" href="http://wichtounet.github.io/index-9.html">
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
            <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">

    
    
    <link rel="stylesheet" type="text/css" href="assets/css/tipuesearch.css">
    
</head>
<body>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid"><!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://wichtounet.github.io/">@Blog("Baptiste Wicht")</a>
        </div><!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                
                <li><a href="stories/about.html">About</a>
                </li><li><a href="stories/publications.html">Publications</a>
                </li><li><a href="stories/donate.html">Donate</a>
                </li><li><a href="stories/contact.html">Contact</a>
                </li><li><a href="stories/faq.html">FAQ</a>
                </li><li><a href="stories/legal.html">Legal</a>
                </li><li><a href="archive.html">Archives</a>
                </li><li><a href="categories/index.html">Tags</a>
                </li><li><a href="rss.xml">RSS</a>

            </li></ul>

            <span class="navbar-form pull-left">
                <form action="stories/search.html">
                    <div style="float: left;"><input type="text" name="q" id="tipue_search_input"></div>
                    <div style="float: left; margin-left: 13px;"><input type="button" id="tipue_search_button" onclick="this.form.submit();"></div>
                    <div style="clear: left;"></div>
                </form>
            </span>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

<!-- End of Menubar -->

<div class="body-container">

    <!-- Sidebar -->

    <div class="left-sidebar">
            <div class="left-sidebar-widget">
                <h3>Welcome to my blog</h3>
                <div class="left-sidebar-widget-content">
                    <p>
                        I'm writing about C++, Linux, Gentoo, Home Servers, etc...
                    </p>
                    <div class="g-person" data-width="275" data-href="//plus.google.com/u/0/103113673902796202116" data-theme="dark" data-layout="landscape" data-rel="author"></div>
                </div>
            </div>

            <div class="left-sidebar-widget">
                <h3>Tags</h3>
                <div class="left-sidebar-widget-content">
                    <div id="tags_container">
                        <canvas width="275" height="250" id="tags_canvas">
                            <p>Anything in here will be replaced on browsers that support the canvas element</p>
                        </canvas>
                    </div>
                </div>
            </div>
        
        <div class="left-sidebar-widget">
            <h3>Recent comments</h3>
            <div class="left-sidebar-widget-content">
                <div id="recentcomments" class="dsq-widget">
                    <script type="text/javascript" src="http://blogwichtounet.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=28&amp;excerpt_length=150"></script>
                </div>
            </div>
        </div>
        
        <div class="left-sidebar-widget">
            <h3>Blogroll</h3>
            <div class="left-sidebar-widget-content">
                <ul>
                    <li><a target="_blank" href="http://www.asjava.com/">AsJava.com : Java Tutorial</a></li>
                    <li><a target="_blank" href="http://www.mkyong.com/">Mkyong : Java Tutorials</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Content -->

    <div class="container">
            <div class="body-content">

            <!-- <div id="tipue_search_content" style="margin-left: auto; margin-right: auto; padding: 20px;"></div> -->

            <div class="row">
                
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/07/intellij-idea-10-eap-is-here.html" class="u-url">IntelliJ Idea 10 Early Acces Program is here</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-07-28T17:59:40+00:00">2010-07-28 17:59</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>Today, the <strong>Early Access Program</strong> (EAP) has been opened for <strong>IntelliJ Idea 10</strong>.</p>
<p>There is a lot of changes, here are some of them (the most interesting in my point of view) :</p>
<ul>
    <li><strong>Faster indexing speed</strong></li>
    <li>Java - <strong>Faster method usage search</strong></li>
    <li>Spring Web Services support</li>
    <li>Spring testing support</li>
    <li>New Spring live templates (patterns and frameworks)</li>
    <li>intelligent resources support (smart completion and warnings for resource types)</li>
    <li><strong>Maven Refactorings</strong></li>
    <li>Maven pom.xml editor new features</li>
    <li><strong>Maven Dependencies Diagram</strong></li>
    <li>Discover &amp; download libraries from maven repositories even in plain java projects</li>
    <li><strong>XML editing improvements</strong> in IntelliJ IDEA X</li>
    <li>Git support improvements, including <strong>'Git Log' view</strong>.</li>
    <li>Mercurial support</li>
    <li>Hibernate Criteria API supported</li>
    <li>JDBC Console UI revised</li>
    <li>Initial support for AspectJ and Spring Roo frameworks</li>
    <li>A lot of other interesting features</li>
</ul>

<p>To consult the full list of new features, read <a href="http://confluence.jetbrains.net/display/IDEADEV/IDEA+X+First+EAP+Release+Notes" target="_blank">the release notes</a>. And if you want to test this version, <a href="http://confluence.jetbrains.net/display/IDEADEV/IDEA+X+EAP" target="_blank">download it here</a>.</p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/07/intellij-idea-10-eap-is-here.html#disqus_thread" data-disqus-identifier="cache/posts/2010/07/intellij-idea-10-eap-is-here.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/07/discover-java-visualvm-1-3.html" class="u-url">Discover Java VisualVM 1.3</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-07-28T07:10:31+00:00">2010-07-28 07:10</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>2 days ago, <strong>Java VisualVM 1.3</strong> has been released. We'll see what's new with this release. </p>
<p>At this time, there is no package for Ubuntu, so we'll install it manually : </p>
<pre>wget https://visualvm.dev.java.net/files/documents/7163/151728/visualvm_13.zip
unzip visualvm_13.zip</pre>

<p>And then we can directly launch it : </p>
<pre>cd visualvm_13/bin
sh visualvm</pre>

<p>You'll be asked for the license agreement and after that the tool is launched : </p>
<p><a href="wp-content/uploads/2010/07/VisualVM-1.3-Startup.png"><img src="wp-content/uploads/2010/07/VisualVM-1.3-Startup-300x159.png" alt="VisualVM 1.3 Startup" title="VisualVM 1.3 Startup" width="300" height="159" class="size-medium wp-image-848"></a></p>
<!--more-->

<p>Here there is nothing new, except for the change of version of course. So let's profile something. In my case, I profile IntelliJ Idea for the test, but this doesn't change anything. We immediately see that there is a new tab (Sampler). If we watch the three first tabs (Overview, Monitor and Threads), we see that there is no changes. </p>
<p>The Sampler tab is simply a plugin (VisualVM Sampler Plugin) that has been integrated by default in VisualVM. Sampling is not like profiling. There is no instrumentation, so no setup time and almost no overhead, the application run at full speed. This is achieved by periodically polling the monitored application for thread dumps or memory histograms. So let's test to the Sampler tab : </p>
<p><a href="wp-content/uploads/2010/07/VisualVM-1.3-Sampler.png"><img src="wp-content/uploads/2010/07/VisualVM-1.3-Sampler-300x196.png" alt="VisualVM 1.3 Sampler" title="VisualVM 1.3 Sampler" width="300" height="196" class="size-medium wp-image-843"></a></p>
<p>Like, int the Profiler tab, we can launch CPU or Memory sampling. So let's try CPU : </p>
<p><a href="wp-content/uploads/2010/07/VisualVM-1.3-Sampler-CPU.png"><img src="wp-content/uploads/2010/07/VisualVM-1.3-Sampler-CPU-300x196.png" alt="VisualVM 1.3 CPU Sampling" title="VisualVM 1.3 CPU Sampling" width="300" height="196" class="size-medium wp-image-846"></a></p>
<p>You will immediately see the speed of the results, there is no time to wait, but the refreshes are slower of course, because, it's periodic. The results are like in the Profiler tab. If we start Memory Sampling : </p>
<p><a href="wp-content/uploads/2010/07/VisualVM-1.3-Sampler-Memory.png"><img src="wp-content/uploads/2010/07/VisualVM-1.3-Sampler-Memory-300x206.png" alt="VisualVM 1.3 Memory Sampling" title="VisualVM 1.3 Memory Sampling" width="300" height="206" class="size-medium wp-image-845"></a></p>
<p>Once again, the results are the same as with the Profiler, but we see a new feature, the PermGen histogram : </p>
<p><a href="wp-content/uploads/2010/07/VisualVM-1.3-Sampler-PermGen.png"><img src="wp-content/uploads/2010/07/VisualVM-1.3-Sampler-PermGen-300x153.png" alt="VisualVM 1.3 PermGen Histogram" title="VisualVM 1.3 PermGen Histogram" width="300" height="153" class="size-medium wp-image-844"></a></p>
<p>That could be really useful to see why your application takes a lot of PermGen space or simply to see that there is not enough PermGen space. </p>
<p>There is another new feature in this version. The Tracer Probes. But by default, there is no installed probes, so you must install plugins to see them : </p>
<p><a href="wp-content/uploads/2010/07/VisualVM-1.3-Plugins.png"><img src="wp-content/uploads/2010/07/VisualVM-1.3-Plugins-300x77.png" alt="VisualVM 1.3 Probes Plugins" title="VisualVM 1.3 Probes Plugins" width="300" height="77" class="size-medium wp-image-847"></a></p>
<p>Then, just click install, accept the license agreement and let the application restart. And then, if you launch the profiling of an application, you'll see the Tracer tab : </p>
<p><a href="wp-content/uploads/2010/07/VisualVM-1.3-Tracer.png"><img src="wp-content/uploads/2010/07/VisualVM-1.3-Tracer-300x290.png" alt="VisualVM 1.3 Tracer" title="VisualVM 1.3 Tracer" width="300" height="290" class="size-medium wp-image-840"></a></p>
<p>You see that there is a lot of probes that we can enable. So let's enable some probes and Start the Tracer : </p>
<p><a href="wp-content/uploads/2010/07/VisualVM-1.3-Tracer-Graphs.png"><img src="wp-content/uploads/2010/07/VisualVM-1.3-Tracer-Graphs-275x300.png" alt="VisualVM 1.3 Tracer Graphs" title="VisualVM 1.3 Tracer Graphs" width="275" height="300" class="size-medium wp-image-842"></a></p>
<p>Like the profiler, there is a needed time of instrumentation and after that, you will see some graphs. There is a graph for each probe you selected. Each probe display some specific data, by example, the Threads Probe display the number of threads and the number of Deamon threads and the JIT Compiler Probe display the activity of the JIT compiler. Here I've also enabled some Swing probes because IntelliJ Idea use Swing, but you have also Probes for JavaFX by example.  If you pass the mouse on the graphs, you will see the exact values at the time where the cursor is : </p>
<p><a href="wp-content/uploads/2010/07/VisualVM-1.3-Tracer-Mouse.png"><img src="wp-content/uploads/2010/07/VisualVM-1.3-Tracer-Mouse-300x247.png" alt="VisualVM 1.3 Tracer Mouse Details" title="VisualVM 1.3 Tracer Mouse Details" width="300" height="247" class="size-medium wp-image-841"></a></p>
<p>It's think this new Tracer is just awesome. It's really useful and really good-looking. </p>
<p>So we've now covered the main new features of this new version. I think this version adds some great new features and improvements and that will make of VisualVM an essential profiler. </p>
<p>For the complete information about this new version, read the <a target="_blank" href="https://visualvm.dev.java.net/relnotes.html">release notes</a>.</p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/07/discover-java-visualvm-1-3.html#disqus_thread" data-disqus-identifier="cache/posts/2010/07/discover-java-visualvm-1-3.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/07/top-15-best-wordpress-plugins.html" class="u-url">Top 15 Best Wordpress Plugins</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-07-23T07:02:34+00:00">2010-07-23 07:02</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>When working on a Wordpress site or blog, it's essential to install several plugins to optimize the site readibility, accessibility, performances, ...</p>
<p>Here are 15 plugins that I think the best of the Wordpress plugins and that I use everyday. The list is not in interest order but in alphabetical order.</p>
<p><strong><a title="Akismet" href="http://akismet.com/" target="_blank">Akismet</a></strong> - Avoid spam</p>
<p>This plugin automatically filters spams for you. It's really simple, you just have to install it and it works great. In my little blog, it filters more than hundred spams a day.</p>
<p><a href="wp-content/uploads/2010/07/Akismet.png"><img class="size-medium wp-image-798" title="Akismet Stats" src="wp-content/uploads/2010/07/Akismet-300x270.png" alt="Akismet Stats" width="300" height="270"></a></p>
<!--more-->

<p><strong><a title="All in One SEO Pack" href="http://wordpress.org/extend/plugins/all-in-one-seo-pack/" target="_blank">All in One SEO Pack</a></strong> - Improve your SEO</p>
<p>This plugin helps you to improve the SEO capability of your website. It can automatically generate the keywords and description of the posts and it give you forms to set the meta informations of the post.</p>
<p><strong><a title="Dagon Design Sitemap Generator" href="http://www.dagondesign.com/articles/sitemap-generator-plugin-for-wordpress/" target="_blank">Dagon Design Sitemap Generator</a></strong> - Simple sitemap generator</p>
<p>This plugin generate a simple sitemap for your website content. You can see an example <a title="My sitemap" href="http://www.baptiste-wicht.com/plan/" target="_blank">on my website</a>.</p>
<p><strong><a title="Google Analytics for Wordpress" href="http://wordpress.org/extend/plugins/google-analytics-for-wordpress/" target="_blank">Google Analytics for Wordpress</a></strong> - Get stats of your visitors</p>
<p>This plugin integrates Google Analytics in your website. But this plugin makes a lot more, it also add custom variables to your stats to track your tags and categories in Google Analytics.</p>
<p><strong><a title="Google XML Sitemap Generator" href="http://www.arnebrachhold.de/projects/wordpress-plugins/google-xml-sitemaps-generator/" target="_blank">Google XML Sitemap Generator</a></strong> - Generate a XML Sitemap for Google</p>
<p>This plugin generate a XML Sitemap for search engines and keep it up to date with your site content. For referencing your website it's really important to have a XML sitemap and to update it regularly. With this plugin, you have nothing to do. Just write your posts and they will be included in the sitemap.</p>
<p><strong><a title="Most Commented Widget" href="http://wordpress.org/extend/plugins/most-commented/" target="_blank">Most Commented Widget</a></strong> - Add a widget with the most commented posts</p>
<p>By default, WordPress don't provide a widget to display the most commented posts of the blog. But I think, it's really an interesting things for the readers. So this reader adds this widget and allows you to choose the number of posts to display and the number of days in which we take the posts.</p>
<p><a href="wp-content/uploads/2010/07/MostCommented.png"><img class="size-full wp-image-799" title="Most Commented Posts Widget" src="wp-content/uploads/2010/07/MostCommented.png" alt="Most Commented Posts Widget" width="216" height="178"></a></p>
<p><strong><a title="Random Posts Widget" href="http://www.romantika.name/v2/wordpress-plugin-random-posts-widget/" target="_blank">Random Posts widget</a></strong> - Add a widget with some random posts</p>
<p>An other interesting widget is this one that display some random posts. It's a good idea to improve the visibility of some posts. In this widget you can choose how many posts you want to be displayed and from which category we must take them.</p>
<p><a href="wp-content/uploads/2010/07/RandomPosts.png"><img class="size-full wp-image-800" title="Random Posts Widget" src="wp-content/uploads/2010/07/RandomPosts.png" alt="Random Posts Widget" width="217" height="187"></a></p>
<p><strong><a title="Optimize DB" href="http://yoast.com/wordpress/optimize-db/" target="_blank">Optimize DB</a></strong> - Avoid overhead on your tables</p>
<p>This plugin is one of the little you'll find but one of the most useful. It allows you to optimize your database from your admin panel to avoid overhead in WordPress tables.</p>
<p><a href="wp-content/uploads/2010/07/OptimizeDB.png"><img class="size-medium wp-image-801" title="Optimize-DB Plugin" src="wp-content/uploads/2010/07/OptimizeDB-300x99.png" alt="Optimize-DB Plugin" width="300" height="99"></a></p>
<p><strong><a title="Secure WordPress" href="http://www.sitesecuritymonitor.com/secure-wordpress-plugin" target="_blank">Secure WordPress</a></strong> - Improve security</p>
<p>This plugin is not useful for your users but to prevent simple attacks to your blog. This plugin executes several tasks to secure your WordPress installation.</p>
<p><strong><a title="Subscribe to comments" href="http://txfx.net/wordpress-plugins/subscribe-to-comments/" target="_blank">Subscribe To Comments</a></strong> - Let the users subscribe to comments</p>
<p>When a user post a comment in your website, he want perhaps be notified about the next comments on the same post. This plugin adds exactly this feature to your blog. The users can subscribe to the comments on one post to be notified by email of the next comments.</p>
<p><strong><a title="Twitter Widget Pro" href="http://xavisys.com/wordpress-plugins/wordpress-twitter-widget/" target="_blank">Twitter Widget Pro</a></strong> - Add a widget with your tweets</p>
<p>This plugin add a widget to display your last tweets and a link to follow you on Twitter.</p>
<p><a href="wp-content/uploads/2010/07/TwitterWidgetPro.png"><img class="size-full wp-image-802" title="Twitter Widget Pro" src="wp-content/uploads/2010/07/TwitterWidgetPro.png" alt="Twitter Widget Pro" width="229" height="532"></a></p>
<p><strong><a title="W3 Total Cache" href="http://www.w3-edge.com/wordpress-plugins/w3-total-cache/" target="_blank">W3 Total Cache</a></strong> - Improve your performances</p>
<p>If you want good performances on your WordPress blog, W3 Total Cache is the best plugin you can ever found. For more informations, don't hesitate to read this article I wrote about it : <a title="Improve performances of WordPress using W3 Total Cache" href="http://www.baptiste-wicht.com/2010/05/improve-performances-wordpress-w3-total-cache/">Improve performances of WordPress with W3 Total Cache</a></p>
<p><strong><a title="Wordpress Related Posts" href="http://wordpress.org/extend/plugins/wordpress-23-related-posts-plugin/" target="_blank">WordPress Related Posts</a></strong> - Generate related posts</p>
<p>This plugin generate a list of related post to each of your post. This is a great way to give to your users a list of post related to their current reading.</p>
<p><a href="wp-content/uploads/2010/07/RelatedPosts.png"><img class="size-full wp-image-803" title="Related Posts" src="wp-content/uploads/2010/07/RelatedPosts.png" alt="Related Posts" width="523" height="157"></a></p>
<p><strong><a title="WP-Syntax" href="http://wordpress.org/extend/plugins/wp-syntax/" target="_blank">WP-Syntax</a></strong> - Syntax higlighting</p>
<p>It's an essential plugin for all persons who post code in their blog. It provide syntax higlighting for a lot of languages (more than 70). I principally use Java, HTML and XML. The renderering is quite simple but works well.</p>
<p><a href="wp-content/uploads/2010/07/WPSyntax.png"><img class="size-medium wp-image-804" title="WP Syntax Highlighting" src="wp-content/uploads/2010/07/WPSyntax-300x112.png" alt="WP Syntax Highlighting" width="300" height="112"></a></p>
<p><strong><a title="WPtouch iPhone Theme" href="http://www.bravenewcode.com/products/wptouch-pro/">WPtouch iPhone Theme</a></strong> - Make your site accessible on Iphone</p>
<p>This little plugin create an iPhone theme for your website. It's generated automatically, you have nothing to do, so when a visitor visit your blog from iPhone, it automatically see a theme adapted to this phone.</p>
<p><a href="wp-content/uploads/2010/07/WPTouch.jpg"><img class="size-full wp-image-805" title="WP Touch iPhone Theme" src="wp-content/uploads/2010/07/WPTouch.jpg" alt="WP Touch iPhone Theme" width="386" height="742"></a></p>
<p>All these plugins are available in the WordPress repository so you can automatically install them from your blog without any problem.</p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/07/top-15-best-wordpress-plugins.html#disqus_thread" data-disqus-identifier="cache/posts/2010/07/top-15-best-wordpress-plugins.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/07/tip-optimize-images-on-ubuntu-linux.html" class="u-url">Tip : Optimize images on Ubuntu Linux</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-07-22T07:15:16+00:00">2010-07-22 07:15</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>When working with a lot of images by example for galleries on a website, it could be really interesting to optimize the images to save a lot of space and directly improve the performances of the website and save some traffic if this is limited by your hosting. </p>
<h5>Optimize JPEG images with jpegoptim</h5>

<p>A great tool to optimize JPEG images is jpegoptim. It's a simple command line tool available as Ubuntu package. You can install it easily : </p>
<pre>sudo apt-get install jpegoptim</pre>

<p>And it's also really simple to use. First, to optimize an image without loss : </p>
<pre>jpegoptim image.jpg</pre>

<p>Or with a loss of max 25% : </p>
<pre>jpegoptim --max=75 image.jpg</pre>

<p>More informations on <a target="_blank" href="http://freshmeat.net/projects/jpegoptim/">the official site</a>.</p>
<h5>Optimize PNG, BMP and GIF images with optipng</h5>

<p>An other tool to optimize other types of images is optipng. Here again you can install it with apt-get : </p>
<pre>sudo apt-get install optipng</pre>

<p>It's as easy as the first tool : </p>
<pre>optipng image.png</pre>

<p>You can also configure the tool to use the best optimization level, but also the slowest : </p>
<pre>optipng -o7 image.png</pre>

<p>So here we are : You have now enough informations to optimize all you images on Ubuntu. I hope this will be useful to somebody.</p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/07/tip-optimize-images-on-ubuntu-linux.html#disqus_thread" data-disqus-identifier="cache/posts/2010/07/tip-optimize-images-on-ubuntu-linux.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/07/intellij-idea-9-0-3-is-here.html" class="u-url">IntelliJ Idea 9.0.3 is here !</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-07-22T05:04:42+00:00">2010-07-22 05:04</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>A new version of IntelliJ Idea is available : <strong>IntelliJ Idea 9.0.3</strong></p>
<ul>
    <li>A new UI for merging Subversion branches</li>
    <li>A new tool to store encrypted passwords for VCS, proxy server etc.</li>
    <li>A lot of bugfixes, more than 350</li>
    <li>The HTML editor comes with initial support for HTML 5</li>
    <li>The Flex debugger has been improved a lot</li>
    <li>This version supports now Grails 1.3.x</li>
    <li>Several little performance improvements in specific part (XHTML editing by example)</li>
</ul>

<p>The <a title="Idea 9.0.3 change notes" href="http://confluence.jetbrains.net/display/IDEADEV/IDEA+9.0.3+Release+Notes" target="_blank">change notes</a> are available on the site of JetBrains.</p>
<p>You can <a title="Download Idea 9.0.3" href="http://www.jetbrains.com/idea/download/" target="_blank">download it</a> from now and install it manually or just launch Idea and the patch will be downloaded and applied.</p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/07/intellij-idea-9-0-3-is-here.html#disqus_thread" data-disqus-identifier="cache/posts/2010/07/intellij-idea-9-0-3-is-here.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/07/osgi-spring-dynamic-modules-hello-world.html" class="u-url">OSGI and Spring Dynamic Modules - Simple Hello World</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-07-21T07:10:52+00:00">2010-07-21 07:10</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>In this post, we'll take <a target="_blank" href="http://www.baptiste-wicht.com/2010/07/osgi-hello-world-services/">the first implementation we made using <strong>OSGi</strong></a> and use <strong>Spring Dynamic Modules</strong> to improve the application. </p>
<p>Spring Dynamic Modules (Spring Dm) makes the development of <strong>OSGi-based applications</strong> a lot more easier. With that, the deployment of services is a lot easier. You can inject services like any other Spring beans. </p>
<p>So let's start with Spring dm. </p>
<!--more-->

<p>First of all, you need to download <a target="_blank" href="http://www.springsource.com/download/community/?project=Spring%20Dynamic%20Modules&amp;version=1.2.1">the Spring Dm Distribution</a>. For this article, I used the distributions with dependencies and I will only use this libraries : </p>
<pre>com.springsource.net.sf.cglib-2.1.3.jar
com.springsource.org.aopalliance-1.0.0.jar
log4j.osgi-1.2.15-SNAPSHOT.jar
com.springsource.slf4j.api-1.5.0.jar
com.springsource.slf4j.log4j-1.5.0.jar
com.springsource.slf4j.org.apache.commons.logging-1.5.0.jar
org.springframework.aop-2.5.6.SEC01.jar
org.springframework.beans-2.5.6.SEC01.jar
org.springframework.context-2.5.6.SEC01.jar
org.springframework.core-2.5.6.SEC01.jar
spring-osgi-core-1.2.1.jar
spring-osgi-extender-1.2.1.jar
spring-osgi-io-1.2.1.jar </pre>

<p>Of course, you can replace the Spring 2.5.6 libraries with the Spring 3.0 libraries. But for this article, Spring 2.5.6 will be enough. </p>
<p>So, start with the service bundle. If we recall, this bundle exported a single service : </p>
<div class="code"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">bw</span><span class="o">.</span><span class="na">osgi</span><span class="o">.</span><span class="na">provider</span><span class="o">.</span><span class="na">able</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">HelloWorldService</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">hello</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>


<div class="code"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">bw</span><span class="o">.</span><span class="na">osgi</span><span class="o">.</span><span class="na">provider</span><span class="o">.</span><span class="na">impl</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.bw.osgi.provider.able.HelloWorldService</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorldServiceImpl</span> <span class="kd">implements</span> <span class="n">HelloWorldService</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">hello</span><span class="o">(){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello World !"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>There is no changes to do here. Now, we can see the activator : </p>
<div class="code"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">bw</span><span class="o">.</span><span class="na">osgi</span><span class="o">.</span><span class="na">provider</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.osgi.framework.BundleActivator</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.osgi.framework.BundleContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.osgi.framework.ServiceRegistration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.bw.osgi.provider.able.HelloWorldService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.bw.osgi.provider.impl.HelloWorldServiceImpl</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProviderActivator</span> <span class="kd">implements</span> <span class="n">BundleActivator</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">ServiceRegistration</span> <span class="n">registration</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">start</span><span class="o">(</span><span class="n">BundleContext</span> <span class="n">bundleContext</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">registration</span> <span class="o">=</span> <span class="n">bundleContext</span><span class="o">.</span><span class="na">registerService</span><span class="o">(</span>
                <span class="n">HelloWorldService</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span>
                <span class="k">new</span> <span class="nf">HelloWorldServiceImpl</span><span class="o">(),</span>
                <span class="kc">null</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">stop</span><span class="o">(</span><span class="n">BundleContext</span> <span class="n">bundleContext</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">registration</span><span class="o">.</span><span class="na">unregister</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>So, here, we'll make simple. Let's delete this class, this is not useful anymore with Spring Dm. </p>
<p>We'll let Spring Dm export the bundle for us. We'll create a Spring context for this bundle. We just have to create a file provider-context.xml in the folder <em>META-INF/spring</em>. This is a simple context in XML file but we use a new namespace to register service, "<em>http://www.springframework.org/schema/osgi</em>". So let's start : </p>
<div class="code"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>

<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
       <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="na">xmlns:osgi=</span><span class="s">"http://www.springframework.org/schema/osgi"</span>
       <span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
       <span class="na">xsi:schemaLocation=</span><span class="s">"</span>
<span class="s">            http://www.springframework.org/schema/beans</span>
<span class="s">            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span>
<span class="s">            http://www.springframework.org/schema/osgi</span>
<span class="s">            http://www.springframework.org/schema/osgi/spring-osgi.xsd"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"helloWorldService"</span> <span class="na">class=</span><span class="s">"com.bw.osgi.provider.impl.HelloWorldServiceImpl"</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;osgi:service</span> <span class="na">ref=</span><span class="s">"helloWorldService"</span> <span class="na">interface=</span><span class="s">"com.bw.osgi.provider.able.HelloWorldService"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</pre></div>


<p>The only thing specific to OSGi is the <em>osgi:service</em> declaration. This line indicates that we register the <em>helloWorldService</em> as an OSGi service using the interface <em>HelloWorldService</em> as the name of the service. </p>
<p>If you put the context file in the <em>META-INF/spring</em> folder, it will be automatically detected by the Spring Extender and an application context will be created. </p>
<p>We can now go to the consumer bundle. In the first phase, we created that consumer : </p>
<div class="code"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">bw</span><span class="o">.</span><span class="na">osgi</span><span class="o">.</span><span class="na">consumer</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.Timer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.bw.osgi.provider.able.HelloWorldService</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorldConsumer</span> <span class="kd">implements</span> <span class="n">ActionListener</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">HelloWorldService</span> <span class="n">service</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Timer</span> <span class="n">timer</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">HelloWorldConsumer</span><span class="o">(</span><span class="n">HelloWorldService</span> <span class="n">service</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">();</span>

        <span class="k">this</span><span class="o">.</span><span class="na">service</span> <span class="o">=</span> <span class="n">service</span><span class="o">;</span>

        <span class="n">timer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Timer</span><span class="o">(</span><span class="mi">1000</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">startTimer</span><span class="o">(){</span>
        <span class="n">timer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">stopTimer</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">timer</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="n">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">service</span><span class="o">.</span><span class="na">hello</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>At this time, there is no changes to do here. Instead of the injection with constructor we could have used an @Resource annotation, but this doesn't work in Spring 2.5.6 and Spring Dm (but works well with Spring 3.0). </p>
<p>And now the activator : </p>
<div class="code"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">bw</span><span class="o">.</span><span class="na">osgi</span><span class="o">.</span><span class="na">consumer</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.osgi.framework.BundleActivator</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.osgi.framework.BundleContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.osgi.framework.ServiceReference</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.bw.osgi.provider.able.HelloWorldService</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorldActivator</span> <span class="kd">implements</span> <span class="n">BundleActivator</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">HelloWorldConsumer</span> <span class="n">consumer</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">start</span><span class="o">(</span><span class="n">BundleContext</span> <span class="n">bundleContext</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">ServiceReference</span> <span class="n">reference</span> <span class="o">=</span> <span class="n">bundleContext</span><span class="o">.</span><span class="na">getServiceReference</span><span class="o">(</span><span class="n">HelloWorldService</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>

        <span class="n">consumer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HelloWorldConsumer</span><span class="o">((</span><span class="n">HelloWorldService</span><span class="o">)</span> <span class="n">bundleContext</span><span class="o">.</span><span class="na">getService</span><span class="o">(</span><span class="n">reference</span><span class="o">));</span>
        <span class="n">consumer</span><span class="o">.</span><span class="na">startTimer</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">stop</span><span class="o">(</span><span class="n">BundleContext</span> <span class="n">bundleContext</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">consumer</span><span class="o">.</span><span class="na">stopTimer</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>The injection is not necessary anymore. We can keep the start of the timer here, but once again, we can use the features of the framework to start and stop the timer. So let's delete the activator and create an application context to create the consumer and start it automatically and put in the  <em>META-INF/spring</em> folder : </p>
<div class="code"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>

<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
       <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="na">xmlns:osgi=</span><span class="s">"http://www.springframework.org/schema/osgi"</span>
       <span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
       <span class="na">xsi:schemaLocation=</span><span class="s">"</span>
<span class="s">            http://www.springframework.org/schema/beans</span>
<span class="s">            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span>
<span class="s">            http://www.springframework.org/schema/osgi</span>
<span class="s">            http://www.springframework.org/schema/osgi/spring-osgi.xsd"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"consumer"</span> <span class="na">class=</span><span class="s">"com.bw.osgi.consumer.HelloWorldConsumer"</span> <span class="na">init-method=</span><span class="s">"startTimer"</span> <span class="na">destroy-method=</span><span class="s">"stopTimer"</span>
          <span class="na">lazy-init=</span><span class="s">"false"</span> <span class="nt">&gt;</span>
        <span class="nt">&lt;constructor-arg</span> <span class="na">ref=</span><span class="s">"eventService"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

    <span class="nt">&lt;osgi:reference</span> <span class="na">id=</span><span class="s">"eventService"</span> <span class="na">interface=</span><span class="s">"com.bw.osgi.provider.able.HelloWorldService"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</pre></div>


<p>We used the init-method and destroy-method attributes to start and stop the time with the framework and we use the constructor-arg to inject to reference to the service. The reference to the service is obtained using osgi:reference field and using the interface as a key to the service. </p>
<p>That's all we have to do with this bundle. A lot more simple than the first version isn't it ? And more than the simplification, you can see that the sources aren't depending of either OSGi or Spring Framework, this is plain Java and this is a great advantage. </p>
<p>The Maven POMs are the same than in the first phase except that we can cut the dependency to osgi. </p>
<p>The provider : </p>
<div class="code"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>

<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>OSGiDmHelloWorldProvider<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>OSGiDmHelloWorldProvider<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;packaging&gt;</span>bundle<span class="nt">&lt;/packaging&gt;</span>

    <span class="nt">&lt;build&gt;</span>
        <span class="nt">&lt;plugins&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;version&gt;</span>2.0.2<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;configuration&gt;</span>
                    <span class="nt">&lt;source&gt;</span>1.6<span class="nt">&lt;/source&gt;</span>
                    <span class="nt">&lt;target&gt;</span>1.6<span class="nt">&lt;/target&gt;</span>
                <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>

            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.apache.felix<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>maven-bundle-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;extensions&gt;</span>true<span class="nt">&lt;/extensions&gt;</span>
                <span class="nt">&lt;configuration&gt;</span>
                    <span class="nt">&lt;instructions&gt;</span>
                        <span class="nt">&lt;Bundle-SymbolicName&gt;</span>OSGiDmHelloWorldProvider<span class="nt">&lt;/Bundle-SymbolicName&gt;</span>
                        <span class="nt">&lt;Export-Package&gt;</span>com.bw.osgi.provider.able<span class="nt">&lt;/Export-Package&gt;</span>
                        <span class="nt">&lt;Bundle-Vendor&gt;</span>Baptiste Wicht<span class="nt">&lt;/Bundle-Vendor&gt;</span>
                    <span class="nt">&lt;/instructions&gt;</span>
                <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;/plugins&gt;</span>
    <span class="nt">&lt;/build&gt;</span> 
<span class="nt">&lt;/project&gt;</span>
</pre></div>


<p>The consumer : </p>
<div class="code"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>

<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>OSGiDmHelloWorldConsumer<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>OSGiDmHelloWorldConsumer<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;packaging&gt;</span>bundle<span class="nt">&lt;/packaging&gt;</span>

    <span class="nt">&lt;dependencies&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>OSGiDmHelloWorldProvider<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>OSGiDmHelloWorldProvider<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>

    <span class="nt">&lt;build&gt;</span>
        <span class="nt">&lt;plugins&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;version&gt;</span>2.0.2<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;configuration&gt;</span>
                    <span class="nt">&lt;source&gt;</span>1.6<span class="nt">&lt;/source&gt;</span>
                    <span class="nt">&lt;target&gt;</span>1.6<span class="nt">&lt;/target&gt;</span>
                <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>

            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.apache.felix<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>maven-bundle-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;extensions&gt;</span>true<span class="nt">&lt;/extensions&gt;</span>
                <span class="nt">&lt;configuration&gt;</span>
                    <span class="nt">&lt;instructions&gt;</span>
                        <span class="nt">&lt;Bundle-SymbolicName&gt;</span>OSGiDmHelloWorldConsumer<span class="nt">&lt;/Bundle-SymbolicName&gt;</span>
                        <span class="nt">&lt;Bundle-Vendor&gt;</span>Baptiste Wicht<span class="nt">&lt;/Bundle-Vendor&gt;</span>
                    <span class="nt">&lt;/instructions&gt;</span>
                <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;/plugins&gt;</span>
    <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</pre></div>


<p>And we can build the two bundles using maven install. So let's test our stuff in Felix : </p>
<pre>wichtounet@Linux-Desktop:~/Desktop/osgi/felix$ java -jar bin/felix.jar 
_______________
Welcome to Apache Felix Gogo
g! install file:../com.springsource.slf4j.org.apache.commons.logging-1.5.0.jar
Bundle ID: 5
g! install file:../com.springsource.slf4j.log4j-1.5.0.jar
Bundle ID: 6
g! install file:../com.springsource.slf4j.api-1.5.0.jar
Bundle ID: 7
g! install file:../log4j.osgi-1.2.15-SNAPSHOT.jar
Bundle ID: 8
g! install file:../com.springsource.net.sf.cglib-2.1.3.jar
Bundle ID: 9
g! install file:../com.springsource.org.aopalliance-1.0.0.jar
Bundle ID: 10
g! install file:../org.springframework.core-2.5.6.SEC01.jar
Bundle ID: 11
g! install file:../org.springframework.context-2.5.6.SEC01.jar
Bundle ID: 12
g! install file:../org.springframework.beans-2.5.6.SEC01.jar
Bundle ID: 13
g! install file:../org.springframework.aop-2.5.6.SEC01.jar
Bundle ID: 14
g! install file:../spring-osgi-extender-1.2.1.jar
Bundle ID: 15
g! install file:../spring-osgi-core-1.2.1.jar
Bundle ID: 16
g! install file:../spring-osgi-io-1.2.1.jar
Bundle ID: 17
g! start 5 7 8 9 10 11 12 13 14 15 16 17
log4j:WARN No appenders could be found for logger (org.springframework.osgi.extender.internal.activator.ContextLoaderListener).
log4j:WARN Please initialize the log4j system properly.
g! install file:../OSGiDmHelloWorldProvider-1.0.jar
Bundle ID: 18
g! install file:../OSGiDmHelloWorldConsumer-1.0.jar
Bundle ID: 19
g! start 18
g! start 19
g! Hello World !
Hello World !
Hello World !
Hello World !
Hello World !
Hello World !
Hello World !
Hello World !
stop 19
g! </pre>

<p>As you can see, it works perfectly !</p>
<p>In conclusion, Spring Dm really makes easier the development with OSGi.  With Spring Dm you can also start bundles. It also allows you to make web bundles and to use easily the services of the OSGi compendium. </p>
<p>Here are the sources of the two projects : </p>
<ul>
<li><a href="wp-content/uploads/2010/07/OSGiDmHelloWorldProvider.tar1.gz">OSGiDmHelloWorldProvider Sources</a></li>
<li><a href="wp-content/uploads/2010/07/OSGiDmHelloWorldConsumer.tar1.gz">OSGiDmHelloWorldConsumer Sources</a></li>
</ul>

<p>Here are directly the two buildeds Jars : </p>
<ul>
<li><a href="wp-content/uploads/2010/07/OSGiDmHelloWorldProvider-1.0.jar">OSGiDmHelloWorldProvider-1.0.jar</a></li>
<li><a href="wp-content/uploads/2010/07/OSGiDmHelloWorldConsumer-1.0.jar">OSGiDmHelloWorldConsumer-1.0.jar</a></li>
</ul>

<p>And here are the complete folder including Felix and Spring Dm : <a href="wp-content/uploads/2010/07/osgi-hello-world.tar.gz">osgi-hello-world.tar.gz</a></p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/07/osgi-spring-dynamic-modules-hello-world.html#disqus_thread" data-disqus-identifier="cache/posts/2010/07/osgi-spring-dynamic-modules-hello-world.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/07/tip-profile-osgi-application-visualvm.html" class="u-url">Tip : Profile an OSGi application with VisualVM</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-07-20T07:01:28+00:00">2010-07-20 07:01</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>When you develop applications and you've performance problems, it's really interesting to see what can cause this problems. And it that case, the profilers are the most useful tool. By example, we can use VisualVM, packed by default with the Java Virtual Machine. For more information, you can read <a href="http://www.baptiste-wicht.com/2010/07/profile-applications-java-visualvm/">this introduction to Java VisualVM</a>. </p>
<p>But, when you work with OSGi application, it's not as simple as a normal application. The profiler needs that its class can be found by the profiled classes, but with OSGi, the classloader are restricted by the framework and the classes of the profiler cannot be found. </p>
<!--more-->

<p>But there is a workaround using boot class path and boot delegation. You need to do 2 things. </p>
<h5>1. Add the classes to the boot class-path </h5>

<p>First of all, the classes of the profiler must be present in the application. For that, we use the boot class-path. You must add this library in the boot class-path : ${VISUALVM_HOME}/profiler3/lib/jfluid-server.jar.  The boot class-path is configured using the -Xbootclasspath option, but if you just add this option : </p>
<pre>-Xbootclasspath:${VISUALVM_HOME}/profiler3/lib/jfluid-server.jar</pre>

<p>The classes of the JRE will not be found and you will get that kind of error : </p>
<pre>Error occurred during initialization of VM
java/lang/NoClassDefFoundError: java/lang/Object</pre>

<p>So we need to keep the default boot class-path. To get this, just launch this program : </p>
<div class="code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BootClassPath</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"sun.boot.class.path"</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>And it will give you the default boot class-path. Then, you just have to append it to the jar of VisualVM with ':'. By example, on my computer, it's the option I need : </p>
<pre>-Xbootclasspath:/usr/lib/jvm/java-6-sun-1.6.0.20/lib/visualvm/profiler3/lib/jfluid-server.jar:/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/resources.jar:/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/rt.jar:/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/jsse.jar:/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/jce.jar:/usr/lib/jvm/java-6-sun-1.6.0.20/jre/lib/charsets.jar:/usr/lib/jvm/java-6-sun-1.6.0.20/jre/classes</pre>

<h5>2. Add boot delegation to the OSGi framework</h5>

<p>This is easier. Here you just have to said to the OSGi container, to made the classes of the profiler available to all bundles. For that, you need to add this property : </p>
<pre>-Dorg.osgi.framework.bootdelegation=org.netbeans.lib.profiler,org.netbeans.lib.profiler.*</pre>

<p>And normally, it's enough. But some OSGi containers, like Felix, doesn't take the command line properties in consideration in the framework depending on how you launch it. In my case, I embed the Felix Server in my application, so I need to explicitly add this property to the framework. For that, read the documentation of the containers to know how to add properties to the framework. </p>
<p>Here we are. Hope this will be useful to someone. Personally, I lost a lot of time trying several configurations before finding this successful one.</p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/07/tip-profile-osgi-application-visualvm.html#disqus_thread" data-disqus-identifier="cache/posts/2010/07/tip-profile-osgi-application-visualvm.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/07/play-framework-template-engine.html" class="u-url">Play Framework - The template engine</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-07-19T06:55:51+00:00">2010-07-19 06:55</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>In the previous post about <strong>Play Framework</strong>, we seen <a title="Getting started with Play Framework" href="http://www.baptiste-wicht.com/2010/07/getting-started-play-framework/" target="_blank">how to install Play and create a first simple application</a>. In this post, we'll see how to customize the views and use the template engine of the framework to easily create web pages.</p>
<p>Play has its own template engine to generate HTML web pages. The template engine use Groovy as expression language. You will use Groovy language to create all the dynamic parts of the web pages. But there is no need to learn completely Grooxy, it's really close to Java and if you know already knows Java, there is no problem to use Groovy in your templates. All the templates are located in the app/views folder in your application. All the dynamic part of the web page is resolved during the execution of the template and the result is a part of the HTTP Response.</p>
<!--more-->

<p>So first of all, we'll create a little application for our needs :</p>
<pre>wichtounet@wichtounet-laptop:~/dev/play$ /usr/share/play/play new views

~        _            _ 
~  _ __ | | __ _ _  _| |
~ | '_ \| |/ _' | || |_|
~ |  __/|_|\____|\__ (_)
~ |_|            |__/   

~ play! 1.0.3, http://www.playframework.org
~ The new application will be created in /home/wichtounet/dev/play/views
~ What is the application name? Views
~ OK, the application is created.
~ Start it with : play run views
~ Have fun!
~</pre>

<p>So we start to inspect what has been created by Play. If you go in app/views, you will see this structure :</p>
<ul>
    <li>Application : This folder is to store the templates of the Application controller</li>
    <li>errors : This folder contains the templates for the HTTP Error pages (404, 500, ...)</li>
    <li>main.html : This is the main template</li>
</ul>

<p>If you open Application/index.html, you obtain this kind of code :</p>
<div class="code"><pre>#{extends 'main.html' /}
#{set title:'Home' /}
#{welcome /}
</pre></div>


<p>The first line indicate that we extend an other template (main.html). The next line use a Play tag (set), to set the title of the page. A set tag has a brother, the get tag who get the value setted by the set tag. The last line use the welcome tag who print the content of the welcome page. </p>
<p>Now, let's see the main.html template : </p>
<div class="code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>#{get 'title' /}<span class="nt">&lt;/title&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=utf-8"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span> <span class="na">media=</span><span class="s">"screen"</span> <span class="na">href=</span><span class="s">"@{'/public/stylesheets/main.css'}"</span><span class="nt">&gt;</span>
        #{get 'moreStyles' /}
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"shortcut icon"</span> <span class="na">type=</span><span class="s">"image/png"</span> <span class="na">href=</span><span class="s">"@{'/public/images/favicon.png'}"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"@{'/public/javascripts/jquery-1.4.2.min.js'}"</span> <span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;&lt;/script&gt;</span>
        #{get 'moreScripts' /}
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        #{doLayout /}
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>


<p>There is some interesting things here : </p>
<ul>
<li>#{get 'title' /} : return the value of the variable title (not a Java variable, only a HTML variable)</li>
<li>@{'/public/stylesheets/main.css'} : resolve the resource to its URL</li>
<li>#{doLayout /} : Indicate where the sub templates (template who extends main.html) will be rendered</li>
</ul>

<h4>Pass variables to the view</h4>

<p>So let's go further. The first important thing is to know how to pass variables to the view from the controller. With Play Framework, this is really simple. just add the variables you need to the render() method of the controller. By example, to pass a String to the view : </p>
<div class="code"><pre><span class="kn">package</span> <span class="n">controllers</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">play.mvc.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Application</span> <span class="kd">extends</span> <span class="n">Controller</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">index</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">hello</span> <span class="o">=</span> <span class="s">"Hello World from Controller !"</span><span class="o">;</span>

        <span class="n">render</span><span class="o">(</span><span class="n">hello</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>The variable hello is now accessible from the view on the name "hello". To get it, you have to use ${variable_name} simply to display it : </p>
<div class="code"><pre>#{extends 'main.html' /}
#{set title:'Home' /}
Hello from the view
<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
${hello}
</pre></div>


<p>Easy, no ? </p>
<p>Let's try adding a simple class to our model : </p>
<div class="code"><pre><span class="kn">package</span> <span class="n">models</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Book</span><span class="o">(</span><span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">();</span>

        <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">title</span><span class="o">;</span>
    <span class="o">}</span>
</pre></div>


<p>And pass it to the view : </p>
<div class="code"><pre>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">index</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Book</span> <span class="n">book</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Book</span><span class="o">(</span><span class="s">"Hello Play !"</span><span class="o">);</span>

        <span class="n">render</span><span class="o">(</span><span class="n">book</span><span class="o">);</span>
    <span class="o">}</span>
</pre></div>


<p>And then get it from the view : </p>
<div class="code"><pre>#{extends 'main.html' /}
#{set title:'Home' /}
Hello from the view
<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
I've a book for you "${book.title}". 
</pre></div>


<p>The property is getted using the JavaBeans convention, so you have to create a getTitle() method to get the title of the book. </p>
<p>All the dynamic content is directly escaped by the template engine to avoid XSS security exploits. If you really want to not escape something, you have to use the raw() method available on all the strings. By example, for our title : </p>
<div class="code"><pre>${book.title.raw()}
</pre></div>


<p>But this is not a really good practice, and must be used only when it's necessary. </p>
<p>You can add comments to your templates if you want : </p>
<div class="code"><pre>*{Will not be evaluated by the template engine}*
</pre></div>


<h4>Iterate over a list</h4>

<p>An important thing to do in template and that comes really soon is the iterate over a collection. By example, we can pass a list of books to the view from the controller : </p>
<div class="code"><pre>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">index</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span> <span class="n">books</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;(</span><span class="mi">3</span><span class="o">);</span>

        <span class="n">books</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Book</span><span class="o">(</span><span class="s">"Hello Play !"</span><span class="o">));</span>
        <span class="n">books</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Book</span><span class="o">(</span><span class="s">"Hello Template !"</span><span class="o">));</span>
        <span class="n">books</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Book</span><span class="o">(</span><span class="s">"Hello Engine !"</span><span class="o">));</span>

        <span class="n">render</span><span class="o">(</span><span class="n">books</span><span class="o">);</span>
    <span class="o">}</span>
</pre></div>


<p>And then, you can iterate over the list using the <em>list</em> tag : </p>
<div class="code"><pre>#{extends 'main.html' /}
#{set title:'Home' /}
I've some books for your :
<span class="nt">&lt;ul&gt;</span>
    #{list items:books, as:'book'}
        <span class="nt">&lt;li&gt;</span>${book.title}<span class="nt">&lt;/li&gt;</span>
    #{/list}
<span class="nt">&lt;/ul&gt;</span>
</pre></div>


<p>And that will display a single little list in our web page. Not to complicated :)</p>
<h4>Using scripts</h4>

<p>If you have to make complicated things, you can using scripts in Groovy. In scripts, you can declare variables and use all the other variables. By example, you can make the title upper case in a script : </p>
<div class="code"><pre>#{extends 'main.html' /}
#{set title:'Home' /}
I've some books for your :
<span class="nt">&lt;ul&gt;</span>
    #{list items:books, as:'book'}
        %{
           bookTitle = book.title.toUpperCase();
        }%
        <span class="nt">&lt;li&gt;</span>${bookTitle}<span class="nt">&lt;/li&gt;</span>
    #{/list}
<span class="nt">&lt;/ul&gt;</span>
</pre></div>


<p>But you can also do iterations, conditions and a lot of other things. But keep in mind that the templates are not the good place to make complicated things, for that you have the controller and the models. The template must be as simple as possible. </p>
<h4>Define tags</h4>

<p>There is lot of tags in Play Framework, but you can create your own tags. For that, you just have to create a folder tags in your views folder. By example, if you create booklist.html in views/tags and add the following code : </p>
<div class="code"><pre><span class="nt">&lt;ul&gt;</span>
    #{list items:_items, as:'book'}
        %{
            bookTitle = book.title.toUpperCase();
        }%
        <span class="nt">&lt;li&gt;</span>${bookTitle}<span class="nt">&lt;/li&gt;</span>
    #{/list}
<span class="nt">&lt;/ul&gt;</span>
</pre></div>


<p>The arguments are obtained using '_' following by the name of the arguments (_items in our example). </p>
<p>You can refactor the template index.html using the new tag : </p>
<div class="code"><pre>#{extends 'main.html' /}
#{set title:'Home' /}
I've some books for your :
#{booklist items:books /}
</pre></div>


<p>You give arguments like in any other tag. This can help you to make cleaner templates and to avoid to copy/paste some codes. </p>
<p>So we've now covered the basis of the template engine of Play Framework. With all that we've seen, we can start to create simple Play Applications. </p>
<p>A really good resources for Play Developer is the <a target="_blank" href="http://download.playframework.org/miscellaneous/play-cheat-sheet.pdf">Play Cheat Sheet</a>. You can also consult the <a target="_blank" href="http://www.playframework.org/documentation/1.0.3/home">official documentation</a> for more complete informations.</p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/07/play-framework-template-engine.html#disqus_thread" data-disqus-identifier="cache/posts/2010/07/play-framework-template-engine.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/07/osgi-hello-world-services.html" class="u-url">OSGi - Simple Hello World with services</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-07-16T07:05:48+00:00">2010-07-16 07:05</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>In this post, we'll develop a simple Hello World application with <strong>OSGi</strong>. We will use <strong>Felix</strong> as <strong>OSGi container</strong>. In the next post, we'll continue with this application and use <strong>Spring Dynamic Modules</strong> to improve it. </p>
<p>To make the development interesting, we will create two bundles :</p>
<ul>
    <li>A bundle providing a service of HelloWorld</li>
    <li>A bundle consuming the service to print hello at regular interval time.</li>
</ul>

<!--more-->

<p>So let's start with the first bundle. What we need first is a very simple service providing a simple print in the console :</p>
<div class="code"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">bw</span><span class="o">.</span><span class="na">osgi</span><span class="o">.</span><span class="na">provider</span><span class="o">.</span><span class="na">able</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">HelloWorldService</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">hello</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>


<div class="code"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">bw</span><span class="o">.</span><span class="na">osgi</span><span class="o">.</span><span class="na">provider</span><span class="o">.</span><span class="na">impl</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.bw.osgi.provider.able.HelloWorldService</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorldServiceImpl</span> <span class="kd">implements</span> <span class="n">HelloWorldService</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">hello</span><span class="o">(){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello World !"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>We cannot make easier. Then, we need to export the Service using an activator : </p>
<div class="code"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">bw</span><span class="o">.</span><span class="na">osgi</span><span class="o">.</span><span class="na">provider</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.osgi.framework.BundleActivator</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.osgi.framework.BundleContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.osgi.framework.ServiceRegistration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.bw.osgi.provider.able.HelloWorldService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.bw.osgi.provider.impl.HelloWorldServiceImpl</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProviderActivator</span> <span class="kd">implements</span> <span class="n">BundleActivator</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">ServiceRegistration</span> <span class="n">registration</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">start</span><span class="o">(</span><span class="n">BundleContext</span> <span class="n">bundleContext</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">registration</span> <span class="o">=</span> <span class="n">bundleContext</span><span class="o">.</span><span class="na">registerService</span><span class="o">(</span>
                <span class="n">HelloWorldService</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span>
                <span class="k">new</span> <span class="nf">HelloWorldServiceImpl</span><span class="o">(),</span>
                <span class="kc">null</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">stop</span><span class="o">(</span><span class="n">BundleContext</span> <span class="n">bundleContext</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">registration</span><span class="o">.</span><span class="na">unregister</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>A lot more code here. For those who aren't confident with OSGi, some explanations. The start method will be called when the module is started and the stop when it's stopped. In the start method, we register our service in the bundle context using the name of the interface as the name of the exported service. The third parameter, null, indicate that we doesn't give any configuration for this service. In the stop method, we just unregister the service. </p>
<p>Now, our first bundle is ready. We can build it. For that we'll use Maven and the maven-bundle-plugin to build the OSGi Bundle directly. Here is the pom.xml file for the project. </p>
<div class="code"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>

<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

    <span class="nt">&lt;groupId&gt;</span>OSGiDmHelloWorldProvider<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>OSGiDmHelloWorldProvider<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>

    <span class="nt">&lt;dependencies&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.apache.felix<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>org.osgi.core<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.4.0<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>

    <span class="nt">&lt;build&gt;</span>
        <span class="nt">&lt;plugins&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;version&gt;</span>2.0.2<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;configuration&gt;</span>
                    <span class="nt">&lt;source&gt;</span>1.6<span class="nt">&lt;/source&gt;</span>
                    <span class="nt">&lt;target&gt;</span>1.6<span class="nt">&lt;/target&gt;</span>
                <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>

            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.apache.felix<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>maven-bundle-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;extensions&gt;</span>true<span class="nt">&lt;/extensions&gt;</span>
                <span class="nt">&lt;configuration&gt;</span>
                    <span class="nt">&lt;instructions&gt;</span>
                        <span class="nt">&lt;Bundle-SymbolicName&gt;</span>OSGiDmHelloWorldProvider<span class="nt">&lt;/Bundle-SymbolicName&gt;</span>
                        <span class="nt">&lt;Export-Package&gt;</span>com.bw.osgi.provider.able<span class="nt">&lt;/Export-Package&gt;</span>
                        <span class="nt">&lt;Bundle-Activator&gt;</span>com.bw.osgi.provider.ProviderActivator<span class="nt">&lt;/Bundle-Activator&gt;</span>
                        <span class="nt">&lt;Bundle-Vendor&gt;</span>Baptiste Wicht<span class="nt">&lt;/Bundle-Vendor&gt;</span>
                    <span class="nt">&lt;/instructions&gt;</span>
                <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;/plugins&gt;</span>
    <span class="nt">&lt;/build&gt;</span> 
<span class="nt">&lt;/project&gt;</span>
</pre></div>


<p>And then, use mvn install to build it. </p>
<p>We'll work in a folder called osgi, so we'll copy this new bundle in the osgi folder. </p>
<p>We can already test it in the OSGi container. If you dont' have already Felix, let's download it <a href="http://felix.apache.org/site/downloads.html">here</a>. You have to choose the "Felix Distribution". </p>
<p>Then extract it to the osgi folder we created before. You must now have this folder structure : </p>
<pre>osgi
  - felix 
  - OSGiDmHelloWorldProvider-1.0.jar</pre>

<p>So we can go in the felix folder and launch Felix : </p>
<pre>wichtounet@Linux-Desktop:~/Desktop/osgi/felix$ java -jar bin/felix.jar 
_______________
Welcome to Apache Felix Gogo
g! </pre>

<p>And install our bundle : </p>
<pre>g! install file:../OSGiDmHelloWorldProvider-1.0.jar         
Bundle ID: 5</pre>

<p>The install is good installed, we can try to start it and see its status : </p>
<pre>g! start 5
g! bundle 5
Location             file:../OSGiDmHelloWorldProvider-1.0.jar
State                32
Version              1.0.0
LastModified         1279124741320
Headers              [Tool=Bnd-0.0.357, Bundle-Activator=com.bw.osgi.provider.ProviderActivator, Export-Package=com.bw.osgi.provider.able, Build-Jdk=1.6.0_20, Bundle-Version=1.0.0, Created-By=Apache Maven Bundle Plugin, Bundle-ManifestVersion=2, Manifest-Version=1.0, Bundle-Vendor=Baptiste Wicht, Bnd-LastModified=1279124686551, Bundle-Name=Unnamed - OSGiDmHelloWorldProvider:OSGiDmHelloWorldProvider:bundle:1.0, Built-By=wichtounet, Bundle-SymbolicName=OSGiDmHelloWorldProvider, Import-Package=com.bw.osgi.provider.able,org.osgi.framework;version="1.5"]
BundleContext        org.apache.felix.framework.BundleContextImpl@2353f67e
BundleId             5
SymbolicName         OSGiDmHelloWorldProvider
RegisteredServices   [HelloWorldService]
ServicesInUse        null</pre>

<p>All is fine. Our service is good registered :)</p>
<p>Now we'll try to consume this service in our second bundle. Our consumer class will be very simple : </p>
<div class="code"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">bw</span><span class="o">.</span><span class="na">osgi</span><span class="o">.</span><span class="na">consumer</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.Timer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.bw.osgi.provider.able.HelloWorldService</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorldConsumer</span> <span class="kd">implements</span> <span class="n">ActionListener</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">HelloWorldService</span> <span class="n">service</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Timer</span> <span class="n">timer</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">HelloWorldConsumer</span><span class="o">(</span><span class="n">HelloWorldService</span> <span class="n">service</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">();</span>

        <span class="k">this</span><span class="o">.</span><span class="na">service</span> <span class="o">=</span> <span class="n">service</span><span class="o">;</span>

        <span class="n">timer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Timer</span><span class="o">(</span><span class="mi">1000</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">startTimer</span><span class="o">(){</span>
        <span class="n">timer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">stopTimer</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">timer</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="n">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">service</span><span class="o">.</span><span class="na">hello</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>And now, we must create the activator to get the service and then give it to the consumer. That will give use something like this : </p>
<div class="code"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">bw</span><span class="o">.</span><span class="na">osgi</span><span class="o">.</span><span class="na">consumer</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.osgi.framework.BundleActivator</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.osgi.framework.BundleContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.osgi.framework.ServiceReference</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.bw.osgi.provider.able.HelloWorldService</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorldActivator</span> <span class="kd">implements</span> <span class="n">BundleActivator</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">HelloWorldConsumer</span> <span class="n">consumer</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">start</span><span class="o">(</span><span class="n">BundleContext</span> <span class="n">bundleContext</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">ServiceReference</span> <span class="n">reference</span> <span class="o">=</span> <span class="n">bundleContext</span><span class="o">.</span><span class="na">getServiceReference</span><span class="o">(</span><span class="n">HelloWorldService</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>

        <span class="n">consumer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HelloWorldConsumer</span><span class="o">((</span><span class="n">HelloWorldService</span><span class="o">)</span> <span class="n">bundleContext</span><span class="o">.</span><span class="na">getService</span><span class="o">(</span><span class="n">reference</span><span class="o">));</span>
        <span class="n">consumer</span><span class="o">.</span><span class="na">startTimer</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">stop</span><span class="o">(</span><span class="n">BundleContext</span> <span class="n">bundleContext</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">consumer</span><span class="o">.</span><span class="na">stopTimer</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>We get a service reference from the bundle context using the name of the class. After that, we get the service instance from the bundle context. </p>
<p>We create also a little pom.xml file to build the bundle : </p>
<div class="code"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>

<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>OSGiDmHelloWorldConsumer<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>OSGiDmHelloWorldConsumer<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;packaging&gt;</span>bundle<span class="nt">&lt;/packaging&gt;</span>

    <span class="nt">&lt;dependencies&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.apache.felix<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>org.osgi.core<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.0.0<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>

        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>OSGiDmHelloWorldProvider<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>OSGiDmHelloWorldProvider<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>

    <span class="nt">&lt;build&gt;</span>
        <span class="nt">&lt;plugins&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;version&gt;</span>2.0.2<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;configuration&gt;</span>
                    <span class="nt">&lt;source&gt;</span>1.6<span class="nt">&lt;/source&gt;</span>
                    <span class="nt">&lt;target&gt;</span>1.6<span class="nt">&lt;/target&gt;</span>
                <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>

            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.apache.felix<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>maven-bundle-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;extensions&gt;</span>true<span class="nt">&lt;/extensions&gt;</span>
                <span class="nt">&lt;configuration&gt;</span>
                    <span class="nt">&lt;instructions&gt;</span>
                        <span class="nt">&lt;Bundle-SymbolicName&gt;</span>OSGiDmHelloWorldConsumer<span class="nt">&lt;/Bundle-SymbolicName&gt;</span>
                        <span class="nt">&lt;Bundle-Activator&gt;</span>com.bw.osgi.consumer.HelloWorldActivator<span class="nt">&lt;/Bundle-Activator&gt;</span>
                        <span class="nt">&lt;Bundle-Vendor&gt;</span>Baptiste Wicht<span class="nt">&lt;/Bundle-Vendor&gt;</span>
                    <span class="nt">&lt;/instructions&gt;</span>
                <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;/plugins&gt;</span>
    <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</pre></div>


<p>Then, we use mvn install to create the bundle and we install it in the container : </p>
<pre>g! start 6
g! Hello World !
Hello World !
Hello World !
Hello World !
Hello World !
Hello World !
Hello World !
Hello World !
Hello World !
Hello World !
Hello World !
Hello World !
Hello World !
Hello World !
g! stop 6</pre>

<p>And here we are :) We've created our first application using OSGi. With that technology you can build modules really independant. </p>
<p>In the next post about OSGi, we'll see how to use Spring to make the OSGi development easier and to concentrate our effort on the application not OSGi.  </p>
<p>The sources of the two bundles are available here : </p>
<ul>
    <li><a href="wp-content/uploads/2010/07/OSGiDmHelloWorldProvider.tar.gz">OSGiDmHelloWorldProvider sources</a></li>
    <li><a href="wp-content/uploads/2010/07/OSGiDmHelloWorldConsumer.tar.gz">OSGiDmHelloWorldConsumer</a></li>
</ul></div>
        </div>
            
        
    <p>
        <a href="posts/2010/07/osgi-hello-world-services.html#disqus_thread" data-disqus-identifier="cache/posts/2010/07/osgi-hello-world-services.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/07/state-of-the-lambda.html" class="u-url">State of the Lambda</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-07-15T01:52:02+00:00">2010-07-15 01:52</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p><strong>Brian Goetz</strong>, from Oracle, has posted an updated proposal for the <strong>lambda expressions</strong> : <a target="_blank" href="http://cr.openjdk.java.net/~briangoetz/lambda/lambda-state-2.html">State of the Lambda</a></p>
<p>Here are some examples of closures taken from the proposal : </p>
<p>We can use lambda expressions to replace the heavy usage of Single Abstract Method (SAM) interfaces : </p>
<div class="code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CallbackHandler</span> <span class="o">{</span> 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">callback</span><span class="o">(</span><span class="n">Context</span> <span class="n">c</span><span class="o">);</span>
<span class="o">}</span>

<span class="n">CallbackHandler</span> <span class="n">cb</span> <span class="o">=</span> <span class="o">{</span> <span class="n">c</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"pippo"</span><span class="o">)</span> <span class="o">};</span>
</pre></div>


<p>We can make references to methods to use it as SAM interfaces : </p>
<div class="code"><pre><span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span> 
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">compareByAge</span><span class="o">(</span><span class="n">Person</span> <span class="n">a</span><span class="o">,</span> <span class="n">Person</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">compareByName</span><span class="o">(</span><span class="n">Person</span> <span class="n">a</span><span class="o">,</span> <span class="n">Person</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
<span class="o">}</span>

<span class="n">Person</span><span class="o">[]</span> <span class="n">people</span> <span class="o">=</span> <span class="o">...</span>

<span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">people</span><span class="o">,</span> <span class="err">#</span><span class="n">Person</span><span class="o">.</span><span class="na">compareByAge</span><span class="o">);</span>
</pre></div></div>
        </div>
            
        
    <p>
        <a href="posts/2010/07/state-of-the-lambda.html#disqus_thread" data-disqus-identifier="cache/posts/2010/07/state-of-the-lambda.html">Comments</a>


        </p></article>
    
        <div>
        <ul class="pager">
            <li class="previous">
                <a href="index-10.html" rel="prev">← Newer posts</a>
            </li>
            <li class="next">
                <a href="index-8.html" rel="next">Older posts →</a>
            </li>
        </ul>
        </div>

    
        
       <script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>


	


            </div>
        </div>
    </div>
</div>

<!-- Footer -->

<footer>
    Contents © 2014         <a href="mailto:baptistewicht@gmail.com">Baptiste Wicht</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/4.0/88x31.png"></a>
        <ul class="footer_inline_ul">
            
        </ul>
</footer>


            <script src="assets/js/all-nocdn.js" type="text/javascript"></script>


    <script type="text/javascript">
      $(document).ready(function() {
        jQuery.getJSON('/assets/js/tag_cloud_data.json', function(data) {
            var items = [];

            $.each(data, function(key, val) {
                items.push('<li><a href="' + val[1] +'" '+'data-weight="'+val[0]+'"'+'>' + key + '</a></li>');
            });

            $('<div/>', {
                'id': 'tags',
                html: '<ul>' + items.join('') + '</ul>'
            }).appendTo('body');

            if(!$('#tags_canvas').tagcanvas({
                textColour: '#FFFFFF',
                outlineColour: '#ff00ff',
                reverse: true,
                depth: 0.8,
                maxSpeed: 0.05,
                weight: true,
                weightFrom: "data-weight",
                weightSizeMin: 8,
                weightSizeMax: 24
            },'tags')) {
                //something went wrong, hide the canvas container
                $('#tags_container').hide();
            }});
        });
    </script>
    
<script type="text/javascript" src="https://apis.google.com/js/platform.js"></script>


    
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5327566b264df4ee"></script>
<script type="text/javascript">
  addthis.layers({
    'theme' : 'dark',
    'share' : {
      'position' : 'right',
      //'services' : 'google_plusone,facebook_like,tweet',
      'services' : 'google_plusone_share,facebook,twitter'
    }, 
    'follow' : {
      'services' : [
        {'service': 'twitter', 'id': 'wichtounet'},
        {'service': 'google_follow', 'id': '+BaptisteWicht'}
      ]
    }   
  });
</script>



<!-- Search -->

    <script type="text/javascript" src="assets/js/tipuesearch_set.js"></script>
    <script type="text/javascript" src="assets/js/tipuesearch.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#tipue_search_input').tipuesearch({
            'mode': 'json',
            'contentLocation': '/assets/js/tipuesearch_content.json',
            'showUrl': false
            });
            });
    </script>

<script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script>






</body>
</html>