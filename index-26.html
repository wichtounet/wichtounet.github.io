<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang=en> <head><meta charset=utf-8><meta name=description content="Website about vtechnologies Java, Spring, OSGi, Hardware,..."><meta name=viewport content="width=device-width"><title>@Blog("Baptiste Wicht") (old posts, page 26) | @Blog("Baptiste Wicht")</title><link href=assets/css/all-nocdn.css rel=stylesheet type=text/css><link rel=alternate type=application/rss+xml title=RSS href=rss.xml><link rel=canonical href=http://baptiste-wicht.com/index-26.html><script type=text/javascript>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2175227-7']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script><link href=favicon.ico rel=icon type=image/x-icon></head><body><div class=social_container> <div class=social_container_gplus> <a target=_blank title="Share on Google+" href="https://plusone.google.com/_/+1/confirm?hl=en&amp;url=http://baptiste-wicht.com/index-26.html"><img src=assets/img/google_plus.png></a> </div> <div class=social_container_facebook> <a target=_blank title="Share on Facebook" href="http://www.facebook.com/sharer/sharer.php?u=#url"><img src=assets/img/facebook.png></a> </div> <div class=social_container_twitter> <a target=_blank title="Tweet on Twitter" href="http://twitter.com/home?status=#url"><img src=assets/img/twitter.svg></a> </div></div><nav class="navbar navbar-inverse navbar-fixed-top" role=navigation> <div class=container-fluid> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-ex1-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=http://baptiste-wicht.com/> <span id=blog-title>@Blog("Baptiste Wicht")</span> </a> </div> <div class="collapse navbar-collapse navbar-ex1-collapse"> <ul class="nav navbar-nav"> <li><a href=stories/about.html>About</a> </li><li><a href=stories/publications.html>Publications</a> </li><li><a href=stories/donate.html>Donate</a> </li><li><a href=stories/contact.html>Contact</a> </li><li><a href=stories/faq.html>FAQ</a> </li><li><a href=stories/legal.html>Legal</a> </li><li><a href=categories/index.html>Tags</a> </li><li><a href=archive.html>Archives</a> </li><li><a href=http://feeds.feedburner.com/BaptisteWicht>RSS</a> </li></ul> <span class="navbar-form pull-left"> <form action=stories/search.html> <input type=text name=q id=tipue_search_input> </form> </span> <ul class="nav navbar-nav navbar-right"> <li> <a target=_blank title="Follow @wichtounet on Twitter" href=https://twitter.com/wichtounet> <img src=assets/img/twitter.svg alt="Follow @wichtounet on Twitter"> </a> </li> <li> <a target=_blank title="Follow +BaptisteWicht on Google+" href=https://plus.google.com/+BaptisteWicht> <img src=assets/img/google_plus.svg alt="Follow +BaptisteWicht on Google+"> </a> </li> </ul> </div> </div></nav><div class=body-container> <div class=left-sidebar> <div class=left-sidebar-widget> <h3>Welcome to my blog</h3> <div class=left-sidebar-widget-content> <div class=g-person data-width=275 data-href=//plus.google.com/u/0/103113673902796202116 data-theme=dark data-layout=landscape data-rel=author></div> </div> </div> <div class=left-sidebar-widget> <h3>Tags</h3> <div class=left-sidebar-widget-content> <div id=tags_container> <canvas width=275 height=250 id=tags_canvas> <p>Anything in here will be replaced on browsers that support the canvas element</p> </canvas> </div> </div> </div> <div class=left-sidebar-widget> <h3>Recent comments</h3> <div class=left-sidebar-widget-content> <div id=recentcomments class=dsq-widget> <script type=text/javascript src="http://blogwichtounet.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=28&amp;excerpt_length=50"></script> </div> </div> </div> <div class=left-sidebar-widget> <h3>Blogroll</h3> <div class=left-sidebar-widget-content> <ul> <li><a target=_blank href=http://www.asjava.com/>AsJava.com : Java Tutorial</a></li> <li><a target=_blank href=http://www.mkyong.com/>Mkyong : Java Tutorials</a></li> </ul> </div> </div> </div> <div class=container> <div class=body-content> <div class=row> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2014/07/pm-011-a-simple-workspace-manager-for-git-projects.html class=u-url>pm 0.1.1 - A simple workspace manager for Git projects</a> <br><small>   Posted: <time class="published dt-published" datetime=2014-07-20T20:52:18+02:00>2014-07-20 20:52</time> </small></h1> <hr> <div class=p-summary> <p>In the last month, I've developped a very simple tool in Python: <em>pm</em>. This tool allows to check the status of all the Git repositories inside a repository. I've just released the first version of this tool: pm-0.1.1</p><p>Those who are following this blog will perhaps wonder why Python and not C++ :) The reason is quite simple, I wanted to improve my skills in Python. And what is better than to develop a project from scratch.</p><div class=section id=features><h2>Features</h2><p>The main feature of this application is to show the status of every projects in a directory. The status of your projects can be queried by using <code>pm status</code>. On my computer this gives something like that:</p><img alt=/images/pm_status.png src=images/pm_status.png><p>The state of each branch of each project is shown. There different possible status (they are cumulative): * Behind remote: Commits are available on the remote repository * Ahead of remote: Some local commits are no pushed * Diverged: Behind and Ahead * Uncomitted changes: Some changes are not committed * Clean: Indicates that everything is committed, pushed and pull.</p><p>By default, the directory is ~/dev/ but you can change it by passing the repository to the command, if you pass a relative directory, it will be relative to home. For instance, here is the status of my doc repositories:</p><img alt=/images/pm_status_2.png src=images/pm_status_2.png><p>Another feature that can be useful is that it is able to check the status of submodules with the -s option:</p><img alt=/images/pm_status_sm.png src=images/pm_status_sm.png><p>As you can see it supports recursive submodules. For each submodule it will indicate if there are new commits available or not.</p><p>pm is not only able to show status of the projects, it can also fetch the status of branches from remote by using <code>pm fetch</code>. All the remote branches are fetched from remote. It can also automatically update the projects that are behind remote (equivalent of git pull) with <code>pm update</code>. Only projects that can be fast-forwarded are updated.</p></div><div class=section id=installation><h2>Installation</h2><p>Thanks to <em>pip</em>, installation of pm is quite simple:</p><pre class=literal-block>
pip install pm
</pre><p>If you don't want to use pip, you can install it by hand:</p><pre class=literal-block>
wget https://github.com/wichtounet/pm/archive/0.1.1.tar.gz
tar xf 0.1.1.tar.gz
cd 0.1.1
python setup.py install
</pre><p>For those interested, source code is available <a class="reference external" href=https://github.com/wichtounet/pm>on Github</a>.</p><p>If you have any suggestion for the tool or on the source code, post a comment to this post ;)</p></div> </div> <a href=posts/2014/07/pm-011-a-simple-workspace-manager-for-git-projects.html#disqus_thread data-disqus-identifier=cache/posts/2014/07/pm-011-a-simple-workspace-manager-for-git-projects.html>Comments</a> </article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2014/07/a-mutt-journey-download-mails-with-offlineimap.html class=u-url>A Mutt Journey: Download mails with offlineimap</a> <br><small>   Posted: <time class="published dt-published" datetime=2014-07-16T19:54:40+02:00>2014-07-16 19:54</time> </small></h1> <hr> <div class=p-summary> <p>In the series of posts about Mutt, I recently presented how I was <a class="reference external" href=posts/2014/07/a-mutt-journey-filter-mails-with-imapfilter.html>filtering my email</a>. In this post, I'll show how I download my emails locally using offlineimap. This is the perfect companion for Mutt.</p><p>With Mutt, you can easily directly query an IMAP server and keep the views up to date with it. There are a few problem with this approach:</p><ul class=simple><li>First, you wont' be able to read your mails when you'are offline. It is rarely an issue in these days, but it can be useful.</li><li>Opening an IMAP folder with a large number of mails (&gt;1000) can be quite slow. I've several large folders and it was a pain opening them.</li><li>When Mutt synchronizes with the state of the IMAP server, you'll encounter a freeze. If you want to synchronize often, it is quite boring.</li></ul><p>Having your mails offline on your computers solves all these problems. Moreover, it is also a good way to have a backup of your mails. I'm gonna talk here about the usage for Mutt, but you can use offlineimap just for backup or for migration reasons. The downside is that you have to store it locally. My mails takes around 5GB on my computer.</p><p>offlineimap is a very simple tool to synchronize emails from IMAP servers. It only supports IMAP, but in those days it is not a limitation. The synchronization is made both ways, it will upload your local changes to the IMAP server. It is very powerful when paired with a MUA such as Mutt.</p><p>To use offlineimap, you have to put your configuration in the ~/.offlineimaprc. You can synchronize several accounts at once, in this post, we'll focus on one, but the process is the same for several accounts. I'll focus on Gmail too, but again it is the same with a bit different parameters for other mail accounts.</p><div class=section id=configuration><h2>Configuration</h2><p>First, we have to declare the account:</p><pre class="code literal-block">
[general]
accounts = Gmail

[Account Gmail]
localrepository = Gmail-Local
remoterepository = Gmail-Remote
</pre><p><strong>accounts</strong> is the list of accounts that we have, here only one. Then, in account, repositories are just names of the repositories we'll declare now.</p><p>The local repository has to be configured:</p><pre class="code literal-block">
[Repository Gmail-Local]
type = Maildir
localfolders = /data/oi/Gmail/
sep = /
</pre><p>The first important point is <strong>localfolders</strong> that sets where the mail will be put on your computer. <strong>sep</strong> defines the separator used for nested IMAP folders. I recommend / since Mutt will nest them automatically if / is used as separator.</p><p>Then, the remote repository has to be configured:</p><pre class="code literal-block">
[Repository Gmail-Remote]
type = Gmail
remoteuser = USER
remotepass = PASSWORD
realdelete = no
folderfilter = lambda folder: folder not in ['[Gmail]/All Mail',
                                             '[Gmail]/Important',
                                             '[Gmail]/Starred',
                                             ]
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
</pre><p><strong>remotepass</strong> and <strong>remoteuser</strong> are your user names and password. You can also use <strong>remotepassfile</strong> to read the password from a file. <strong>realdelete=no</strong>indicates that we only want to remove all the labels of deleted mails. For Gmail, it means that the mail will still be in the All Mail folder. The last line (sslcacertfile) is mandatory for recent versions of offlineimap. The <strong>folderfilter</strong> is a function that filters some folders. In my case, I do not want to get the "All Mail", "Important" and "Starred" of my Gmail account because it is only a duplicata of the mails in other labels. What is pretty cool with offlineimap is that you can write Python directly in it for some of the configuration options. Here is rule for filter is plain Python, so you can complicated filtering if you want.</p><p>Last, but not least, offlineimap can generates a list of mailboxes (one for each folder in every account). It is pretty useful since Mutt can then read this file and you'll find your mailboxes directly configured in Mutt :)</p><p>This code will generate a file ~/.mutt/mailboxes that you can source in your Mutt configuration and get the complete list of available mailboxes. This will be kept up to date if you add new IMAP folders on the server for instance.</p><pre class="code literal-block">
[mbnames]
enabled = yes
filename = ~/.mutt/mailboxes
header = "mailboxes "
peritem = "+%(accountname)s/%(foldername)s"
sep = " "
footer = "\n"
</pre></div><div class=section id=translate-names><h2>Translate names</h2><p>You may have seen in the previous section some weird folder name like "[Gmail]/All mail", this is how Gmail names folders that are not labels. This is quite ugly and will create odd looking folders on your computer. You can configure offlineimap to rename these names to better ones. For that, you'll need to rule (in Python ;) ), one to translate from remote to local and one to do the reverse.</p><p>Here is what I did:</p><pre class="code literal-block">
[Repository Gmail-Local]
nametrans = lambda folder: {'drafts':   '[Gmail]/Drafts',
                            'sent':     '[Gmail]/Sent Mail',
                            'important':'[Gmail]/Important',
                            'spam':     '[Gmail]/Spam',
                            'starred':  '[Gmail]/Starred',
                            'trash':    '[Gmail]/Trash',
                            'archive':  '[Gmail]/All Mail',
                            }.get(folder, folder)

[Repository Gmail-Remote]
nametrans = lambda folder: {'[Gmail]/Drafts':    'drafts',
                            '[Gmail]/Sent Mail': 'sent',
                            '[Gmail]/Starred':   'flagged',
                            '[Gmail]/Important':   'important',
                            '[Gmail]/Spam':   'spam',
                            '[Gmail]/Trash':     'trash',
                            '[Gmail]/All Mail':  'archive',
                            }.get(folder, folder)
</pre><p>I simply renamed all "[Gmail]" folders into something more readable and that makes more sense to me. It is not limited to special Gmail folders of course, this can also be applied to rename a folder X into a folder Y in the same. As it is Python, you can do sophisticated stuff if necessary.</p></div><div class=section id=speed-up-things><h2>Speed up things</h2><p>If you happen to sync your mails often, you may want to speed things up. There are several ways to do that.</p><p>The first thing you can do is use several connections to the server. You can set maxconnections to a number higher than 1 in the remote repository configuration. I tested several values and for Gmail 2 was the fastest choice. You can try some values with your server to see what value is good.</p><p>Instead of plain old text files for the status of the mails, offlineimap can use a sqlite backend. This is much faster since the complete file is not rewritten for each update of the flags. For that behaviour, you have to set <strong>status_backend = sqlite</strong> in the Account configuration.</p><p>Another thing you can do is reduce the I/O involved during sync by setting general.fsync to false. With that, offlineimap won't have to wait for disk operation completion after each operation.</p><p>You can run offlineimap in quick mode with -q option. With this option, change in flags of remote messages will not be updated locally. Changes on the local side will be uploaded corectly. It is generally a good idea is to run offlineimap in quick mode often (every X minutes) and run it in normal mode once or twice a day.</p><p>You can also specify which folder to sync with the -f option. Sometimes it is enough to sync INBOX for instance. It may be much faster.</p></div><div class=section id=conclusion><h2>Conclusion</h2><p>Now that you have fully configured offlineimap, you can make it run by hand or in a cron job. I personally run it every 5 minutes, you can choose your favourite frequency according to your workflow. I think I'll reduce the frequency further, it is more comfortable to get mails only by batch and not too much of them.</p><p>If you're interested, you can take a look at <a class="reference external" href=https://github.com/wichtounet/dotfiles/blob/master/.offlineimaprc>my .offlineimaprc configuration</a>.</p><p>If you want more information about this awesome tool, you can take a look at the <a class="reference external" href=http://docs.offlineimap.org/en/latest/>reference documentation</a>.</p><p>This is it for this part of this series. In the next post, I'll present my Mutt configuration and how I use it.</p></div> </div> <a href=posts/2014/07/a-mutt-journey-download-mails-with-offlineimap.html#disqus_thread data-disqus-identifier=cache/posts/2014/07/a-mutt-journey-download-mails-with-offlineimap.html>Comments</a> </article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2014/07/a-mutt-journey-filter-mails-with-imapfilter.html class=u-url>A Mutt Journey: Filter mails with imapfilter</a> <br><small>   Posted: <time class="published dt-published" datetime=2014-07-08T20:58:32+02:00>2014-07-08 20:58</time> </small></h1> <hr> <div class=p-summary> <p>About a month ago, I decided to switch to Mutt to read my emails. I kept my GMail account, but I don't use the web interface anymore. It took me a long time to prepare a complete enviromnent.</p><p>Currently, i'm using:</p><ul class=simple><li>imapfilter to filter mails</li><li>offlineimap to download my mails</li><li>notmuch to quickly search all my mails</li></ul><p>And of course Mutt. To be precise, I use mutt-kz, a fork of mutt with very good notmuch integration.</p><p>I'll try to explain each part of my environment in a series of articles on this blog. The first one will be about imapfilter.</p><p>imapfilter is a mail filtering utility. It connects to a remote server using IMAP and is then able to move, copy or delete mails around. You can use it for several tasks:</p><ul class=simple><li>Delete unwanted mail</li><li>Move mails into folders according to rules</li></ul><p>What is pretty cool is that the configuration is entirely made in Lua. It is quite easy to write rules and then apply them to several mailboxes as if you were programming.</p><p>Another advantage of imapfilter is that it works at the server level. Therefore, even if you use your web client from time to time or check your mail on your phone, the changes will still be viewable.</p><p>The configuration is done in the ~/.imapfilter/config.lua file. The configuration is quite easy, you have to declare an IMAP object as the account.</p><pre class="code lua literal-block">
<span class=kd>local</span> <span class=n>account</span> <span class=o>=</span> <span class=n>IMAP</span> <span class=p>{</span>
    <span class=n>server</span> <span class=o>=</span> <span class=s1>'</span><span class=s>imap_sever'</span><span class=p>,</span>
    <span class=n>username</span> <span class=o>=</span> <span class=s1>'</span><span class=s>username'</span><span class=p>,</span>
    <span class=n>password</span> <span class=o>=</span> <span class=s1>'</span><span class=s>password'</span><span class=p>,</span>
    <span class=n>ssl</span> <span class=o>=</span> <span class=s1>'</span><span class=s>ssl3'</span><span class=p>,</span>
<span class=p>}</span>
</pre><p>As the configuration is in Lua, you can easily get the password from another file. For instance, here is my account declaration:</p><pre class="code lua literal-block">
<span class=kd>local</span> <span class=n>account</span> <span class=o>=</span> <span class=n>IMAP</span> <span class=p>{</span>
    <span class=n>server</span> <span class=o>=</span> <span class=s1>'</span><span class=s>imap.gmail.com'</span><span class=p>,</span>
    <span class=n>username</span> <span class=o>=</span> <span class=s1>'</span><span class=s>baptiste.wicht@gmail.com'</span><span class=p>,</span>
    <span class=n>password</span> <span class=o>=</span> <span class=n>get_imap_password</span><span class=p>(</span><span class=s2>"</span><span class=s>.password.offlineimaprc"</span><span class=p>),</span>
    <span class=n>ssl</span> <span class=o>=</span> <span class=s1>'</span><span class=s>ssl3'</span><span class=p>,</span>
<span class=p>}</span>

<span class=c1>-- Utility function to get IMAP password from file</span>
<span class=k>function</span> <span class=nf>get_imap_password</span><span class=p>(</span><span class=n>file</span><span class=p>)</span>
    <span class=kd>local</span> <span class=n>home</span> <span class=o>=</span> <span class=nb>os.getenv</span><span class=p>(</span><span class=s2>"</span><span class=s>HOME"</span><span class=p>)</span>
    <span class=kd>local</span> <span class=n>file</span> <span class=o>=</span> <span class=n>home</span> <span class=o>..</span> <span class=s2>"</span><span class=s>/"</span> <span class=o>..</span> <span class=n>file</span>
    <span class=kd>local</span> <span class=n>str</span> <span class=o>=</span> <span class=nb>io.open</span><span class=p>(</span><span class=n>file</span><span class=p>):</span><span class=n>read</span><span class=p>()</span>
    <span class=k>return</span> <span class=n>str</span><span class=p>;</span>
<span class=k>end</span>
</pre><p>It gets the password by reading a file in the home directory.</p><p>Once, you have the account, you can check the status of a folder with the check_status() function. For instance:</p><pre class="code lua literal-block">
<span class=n>account</span><span class=p>.</span><span class=n>INBOX</span><span class=p>:</span><span class=n>check_status</span><span class=p>()</span>
<span class=n>account</span><span class=p>[</span><span class=s1>'</span><span class=s>[Gmail]/Trash'</span><span class=p>]:</span><span class=n>check_status</span><span class=p>()</span>
</pre><p>You can run imapfilter simply by launching imapfilter on the command line. Once imapfilter is run, it will print the status of the folder you choses:</p><pre class=literal-block>
38 messages, 0 recent, 6 unseen, in baptiste.wicht@gmail.com@imap.gmail.com/INBOX.
70 messages, 0 recent, 67 unseen, in baptiste.wicht@gmail.com@imap.gmail.com/[Gmail]/Trash.
</pre><p>Several functions are important:</p><ul class=simple><li>select_all() on a folder allows you to get messages from an account to them perform action on them</li><li>contain_subject('subject') on a list of mails allows you to keep only the mails that contains 'subject' in their subject</li><li>contain_from('from') on a list of mails allows you to keep only the mails that comes from 'from'</li><li>contain_to('to') on a list of mails allows you to keep only the mails that are addressed to 'to'</li><li>delete_messages() on a collection of mails deletes all of them</li><li>move_messages(folder) on a collection of mails moves all of them to another folder.</li></ul><p>You can also mix different IMAP accounts, you don't have to use only one.</p><p>For instance, if you would delete all the mail coming from me, you could do:</p><pre class="code lua literal-block">
<span class=n>mails</span> <span class=o>=</span> <span class=n>account</span><span class=p>.</span><span class=n>INBOX</span><span class=p>:</span><span class=n>select_all</span><span class=p>()</span>
<span class=n>filtered</span> <span class=o>=</span> <span class=n>mails</span><span class=p>:</span><span class=n>contains_from</span><span class=p>(</span><span class=s2>"</span><span class=s>baptiste.wicht@gmail.com"</span><span class=p>)</span>
<span class=n>filtered</span><span class=p>:</span><span class=n>delete_messages</span><span class=p>()</span>
</pre><p>Or you could move all the mails containing Urgent in the subject line to an IMAP folder:</p><pre class="code lua literal-block">
<span class=n>mails</span> <span class=o>=</span> <span class=n>account</span><span class=p>.</span><span class=n>INBOX</span><span class=p>:</span><span class=n>select_all</span><span class=p>()</span>
<span class=n>filtered</span> <span class=o>=</span> <span class=n>mails</span><span class=p>:</span><span class=n>contains_subject</span><span class=p>(</span><span class=s2>"</span><span class=s>Urgent"</span><span class=p>)</span>
<span class=n>filtered</span><span class=p>:</span><span class=n>move_messages</span><span class=p>(</span><span class=n>account</span><span class=p>[</span><span class=s2>"</span><span class=s>urgent_mails"</span><span class=p>])</span>
</pre><p>If you want some more examples, you can take a look at <a class="reference external" href=https://github.com/wichtounet/dotfiles/blob/master/.imapfilter/config.lua>my imapfilter configuration</a>.</p><p>The best way to start using it is to look at examples, there are plenty of them in the internet, especially in Github dotfiles repositories.</p><p>The reference documentation is available using 'man imapfilter_config', there is plenty more to see.</p><p>For more information, you can also consult the <a class="reference external" href=https://github.com/lefcha/imapfilter>offical site</a>.</p><p>That is it for this part of the mutt series. In the next post about mutt, I'll talk about how I use offlineimap to get my mails.</p> </div> <a href=posts/2014/07/a-mutt-journey-filter-mails-with-imapfilter.html#disqus_thread data-disqus-identifier=cache/posts/2014/07/a-mutt-journey-filter-mails-with-imapfilter.html>Comments</a> </article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2014/07/budgetwarrior-04-enhanced-wish-list-and-aggregate.html class=u-url>budgetwarrior 0.4 - Enhanced wish list and aggregate</a> <br><small>   Posted: <time class="published dt-published" datetime=2014-07-06T10:59:55+02:00>2014-07-06 10:59</time> </small></h1> <hr> <div class=p-summary> <p>I've just released a new version of my command-line budget manager: budgetwarrior 0.4.</p><div class=section id=enhanced-aggregate-overview><h2>Enhanced aggregate overview</h2><p>The aggregate overviews have been greatly improved. First, there is now a <em>budget overview month</em> command that groups all expenses of amonth together. Here is a possible output:</p><img alt=/images/budget_04_aggregate_month.png src=images/budget_04_aggregate_month.png><p>It also possible to use <em>--full</em> option to also aggregate together the different accounts:</p><img alt=/images/budget_04_aggregate_month_full.png src=images/budget_04_aggregate_month_full.png><p>Another new option is <em>--no-group</em> that disables the grouping by categories:</p><img alt=/images/budget_04_aggregate_month_full_ng.png src=images/budget_04_aggregate_month_full_ng.png><p>Moreover, the separator of categories can now be configured with <em>--separator=</em>.</p><p>All these options can also be set in the configuration with these options:</p><ul class=simple><li>aggregate_full : If set to true, does the same as the --full option.</li><li>aggregate_no_group : If set to true, does the same as the --no-group option.</li><li>aggregate_separator : Sets the separator for grouping.</li></ul></div><div class=section id=enhanced-wish-list><h2>Enhanced wish list</h2><p>The wishes management has also been improved.</p><p>First, each wish can now be set an Urgency and Importance level. This is now shown in wish status as simple indicators:</p><img alt=/images/budget_04_wish_status.png src=images/budget_04_wish_status.png><p>Moreover, the accuracy of the estimation compared to the paid amount is shown in <em>wish list</em>:</p><img alt=/images/budget_04_wish_list.png src=images/budget_04_wish_list.png></div><div class=section id=various-changes><h2>Various changes</h2><p>Objective status now shows more information about the status of the objectives:</p><img alt=/images/budget_04_objective_status.png src=images/budget_04_objective_status.png><p>The versioning module has been improved. The <em>versioning sync</em> does now perform a commmit as well as pull/push. <em>versioning push</em>, <em>versioning pull</em> and <em>versioning status</em> commands have been added.</p><p><em>budget version</em> command shows the version of budgetwarrior.</p><p>Aliases a now available to make shorted commands:</p><ul class=simple><li>budget sync -&gt; budget versioning sync</li><li>budget aggregate -&gt; budget overview aggregate</li></ul></div><div class=section id=installation><h2>Installation</h2><p>If you are on Gentoo, you can install it using layman:</p><pre class=literal-block>
layman -a wichtounet
emerge -a budgetwarrior
</pre><p>If you are on Arch Linux, you can use this <a class="reference external" href=https://github.com/StreakyCobra/aur>AUR repository</a>.</p><p>For other systems, you'll have to install from sources:</p><pre class=literal-block>
git clone git://github.com/wichtounet/budgetwarrior.git
cd budgetwarrior
make
sudo make install
</pre></div><div class=section id=conclusion><h2>Conclusion</h2><p>If you are interested by the sources, you can download them on Github: <a class="reference external" href=https://github.com/wichtounet/budgetwarrior>budgetwarrior</a>.</p><p>If you have a suggestion or you found a bug, please post an issue on Github.</p><p>If you have any comment, don't hesitate to contact me, either by letting a comment on this post or by email.</p></div> </div> <a href=posts/2014/07/budgetwarrior-04-enhanced-wish-list-and-aggregate.html#disqus_thread data-disqus-identifier=cache/posts/2014/07/budgetwarrior-04-enhanced-wish-list-and-aggregate.html>Comments</a> </article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2014/07/compile-integer-square-roots-at-compile-time-in-cpp.html class=u-url>Compile integer Square Roots at compile-time in C++</a> <br><small>   Posted: <time class="published dt-published" datetime=2014-07-02T21:05:11+02:00>2014-07-02 21:05</time> </small></h1> <hr> <div class=p-summary> <p>For one of my projects, I needed to evaluate a square root at compile-time. There are several ways to implement it and some are better than the others.</p><p>In this post, I'll show several versions, both with Template Metaprogramming (TMP) and constexpr functions.</p><div class=section id=naive-version><h2>Naive version</h2><p>The easiest way to implement it is to enumerate the integers until we find two integers that when multiplied are equal to our number. This can easily be implemented in C++ with class template and partial specialization:</p><pre class="code c++ literal-block">
<span class=k>template</span> <span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>N</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>I</span><span class=o>=</span><span class=mi>1</span><span class=o>&gt;</span>
<span class=k>struct</span> <span class=n>ct_sqrt</span> <span class=o>:</span> <span class=n>std</span><span class=o>::</span><span class=n>integral_constant</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span><span class=p>,</span> <span class=p>(</span><span class=n>I</span><span class=o>*</span><span class=n>I</span><span class=o>&lt;</span><span class=n>N</span><span class=p>)</span> <span class=o>?</span> <span class=n>ct_sqrt</span><span class=o>&lt;</span><span class=n>N</span><span class=p>,</span><span class=n>I</span><span class=o>+</span><span class=mi>1</span><span class=o>&gt;::</span><span class=n>value</span> <span class=o>:</span> <span class=n>I</span><span class=o>&gt;</span> <span class=p>{};</span>

<span class=k>template</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>N</span><span class=o>&gt;</span>
<span class=k>struct</span> <span class=n>ct_sqrt</span><span class=o>&lt;</span><span class=n>N</span><span class=p>,</span><span class=n>N</span><span class=o>&gt;</span> <span class=o>:</span> <span class=n>std</span><span class=o>::</span><span class=n>integral_constant</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span><span class=p>,</span> <span class=n>N</span><span class=o>&gt;</span> <span class=p>{};</span>
</pre><p>Really easy, isn't it ? If we test it with 100, it gives 10. But, if we try with higher values, we are going to run into problem. For instance, when compiled with 289, here is what clang++ gives me:</p><pre class=literal-block>
src/sqrt/tmp.cpp:5:64: fatal error: recursive template instantiation exceeded maximum depth of 256
struct ct_sqrt : std::integral_constant&lt;std::size_t, (I*I&lt;N) ? ct_sqrt&lt;N,I+1&gt;::value : I &gt; {};
                                                               ^
src/sqrt/tmp.cpp:5:64: note: in instantiation of template class 'ct_sqrt&lt;289, 257&gt;' requested here
struct ct_sqrt : std::integral_constant&lt;std::size_t, (I*I&lt;N) ? ct_sqrt&lt;N,I+1&gt;::value : I &gt; {};
                                                               ^
src/sqrt/tmp.cpp:5:64: note: in instantiation of template class 'ct_sqrt&lt;289, 256&gt;' requested here
struct ct_sqrt : std::integral_constant&lt;std::size_t, (I*I&lt;N) ? ct_sqrt&lt;N,I+1&gt;::value : I &gt; {};
                                                               ^
src/sqrt/tmp.cpp:5:64: note: in instantiation of template class 'ct_sqrt&lt;289, 255&gt;' requested here
struct ct_sqrt : std::integral_constant&lt;std::size_t, (I*I&lt;N) ? ct_sqrt&lt;N,I+1&gt;::value : I &gt; {};
                                                               ^
src/sqrt/tmp.cpp:5:64: note: in instantiation of template class 'ct_sqrt&lt;289, 254&gt;' requested here
struct ct_sqrt : std::integral_constant&lt;std::size_t, (I*I&lt;N) ? ct_sqrt&lt;N,I+1&gt;::value : I &gt; {};
                                                               ^
src/sqrt/tmp.cpp:5:64: note: in instantiation of template class 'ct_sqrt&lt;289, 253&gt;' requested here
struct ct_sqrt : std::integral_constant&lt;std::size_t, (I*I&lt;N) ? ct_sqrt&lt;N,I+1&gt;::value : I &gt; {};
                                                               ^
src/sqrt/tmp.cpp:5:64: note: (skipping 247 contexts in backtrace; use -ftemplate-backtrace-limit=0 to see all)
src/sqrt/tmp.cpp:5:64: note: in instantiation of template class 'ct_sqrt&lt;289, 5&gt;' requested here
struct ct_sqrt : std::integral_constant&lt;std::size_t, (I*I&lt;N) ? ct_sqrt&lt;N,I+1&gt;::value : I &gt; {};
                                                               ^
src/sqrt/tmp.cpp:5:64: note: in instantiation of template class 'ct_sqrt&lt;289, 4&gt;' requested here
struct ct_sqrt : std::integral_constant&lt;std::size_t, (I*I&lt;N) ? ct_sqrt&lt;N,I+1&gt;::value : I &gt; {};
                                                               ^
src/sqrt/tmp.cpp:5:64: note: in instantiation of template class 'ct_sqrt&lt;289, 3&gt;' requested here
struct ct_sqrt : std::integral_constant&lt;std::size_t, (I*I&lt;N) ? ct_sqrt&lt;N,I+1&gt;::value : I &gt; {};
                                                               ^
src/sqrt/tmp.cpp:5:64: note: in instantiation of template class 'ct_sqrt&lt;289, 2&gt;' requested here
struct ct_sqrt : std::integral_constant&lt;std::size_t, (I*I&lt;N) ? ct_sqrt&lt;N,I+1&gt;::value : I &gt; {};
                                                               ^
src/sqrt/tmp.cpp:11:18: note: in instantiation of template class 'ct_sqrt&lt;289, 1&gt;' requested here
    std::cout &lt;&lt; ct_sqrt&lt;289&gt;::value &lt;&lt; std::endl;
                 ^
src/sqrt/tmp.cpp:5:64: note: use -ftemplate-depth=N to increase recursive template instantiation depth
struct ct_sqrt : std::integral_constant&lt;std::size_t, (I*I&lt;N) ? ct_sqrt&lt;N,I+1&gt;::value : I &gt; {};
                                                               ^
</pre><p>And it is only to compute the square root for 289, not a big number. We could of course increase the template depth limit (-ftemplate-depth=X), but that would only get us a bit farther. If you try with g++, you should see that this works, that is because g++ has a higher template depth limit (900 for 4.8.2 on my machine) where clang has a default limit of 256. It can be noted too that with g++ no context is skipped, therefore the error is quite long.</p><p>Now that C++11 gives us constexpr function, we can rewrite it more cleanly:</p><pre class="code c++ literal-block">
<span class=n>constexpr</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>ct_sqrt</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>n</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>){</span>
    <span class=k>return</span> <span class=n>n</span> <span class=o>==</span> <span class=n>i</span> <span class=o>?</span> <span class=n>n</span> <span class=o>:</span> <span class=p>(</span><span class=n>i</span> <span class=o>*</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span> <span class=o>?</span> <span class=n>ct_sqrt</span><span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=o>:</span> <span class=n>i</span><span class=p>);</span>
<span class=p>}</span>
</pre><p>Much nicer :) And it works perfectly with 289. And it works quite well up to a large number. But it still fails once we git large numbers. For instance, here is what clang++ gives me with 302500 (550*550):</p><pre class=literal-block>
src/sqrt/constexpr.cpp:8:36: error: constexpr variable 'result' must be initialized by a constant expression
static constexpr const std::size_t result = ct_sqrt(SQRT_VALUE);
                                   ^        ~~~~~~~~~~~~~~~~~~~
src/sqrt/constexpr.cpp:5:38: note: constexpr evaluation exceeded maximum depth of 512 calls
    return n == i ? n : (i * i &lt; n ? ct_sqrt(n, i + 1) : i);
                                     ^
src/sqrt/constexpr.cpp:5:38: note: in call to 'ct_sqrt(302500, 512)'
src/sqrt/constexpr.cpp:5:38: note: in call to 'ct_sqrt(302500, 511)'
src/sqrt/constexpr.cpp:5:38: note: in call to 'ct_sqrt(302500, 510)'
src/sqrt/constexpr.cpp:5:38: note: in call to 'ct_sqrt(302500, 509)'
src/sqrt/constexpr.cpp:5:38: note: in call to 'ct_sqrt(302500, 508)'
src/sqrt/constexpr.cpp:5:38: note: (skipping 502 calls in backtrace; use -fconstexpr-backtrace-limit=0 to see all)
src/sqrt/constexpr.cpp:5:38: note: in call to 'ct_sqrt(302500, 5)'
src/sqrt/constexpr.cpp:5:38: note: in call to 'ct_sqrt(302500, 4)'
src/sqrt/constexpr.cpp:5:38: note: in call to 'ct_sqrt(302500, 3)'
src/sqrt/constexpr.cpp:5:38: note: in call to 'ct_sqrt(302500, 2)'
src/sqrt/constexpr.cpp:8:45: note: in call to 'ct_sqrt(302500, 1)'
static constexpr const std::size_t result = ct_sqrt(SQRT_VALUE);
                                            ^
</pre><p>Again, we run into the limits of the compiler. And again, the limit can be change with fconstexpr-backtrace-limit=X. With g++, the result is the same (without the skipped part, which makes the error horribly long), but the command to change the depth is -fconstexpr-depth=X.</p><p>So, if we need to compute higher square roots at compile-time, we need a better version.</p></div><div class=section id=binary-search-version><h2>Binary Search version</h2><p>To find the good square root, you don't need to iterate through all the numbers from 1 to N, you can perform a binary search to find the numbers to test. I found a very nice implementation by John Khvatov (<a class="reference external" href=http://jkhvatov.blogspot.ch/2009/11/c-compile-time-square-root-sqrt-using.html>source</a>).</p><p>Here is an adaptation of its code:</p><pre class="code c++ literal-block">
<span class=cp>#define MID(a, b) ((a+b)/2)
#define POW(a) (a*a)
</span>
<span class=k>template</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>res</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>l</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>r</span> <span class=o>=</span> <span class=n>res</span><span class=o>&gt;</span>
<span class=k>struct</span> <span class=n>ct_sqrt</span><span class=p>;</span>

<span class=k>template</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>res</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>r</span><span class=o>&gt;</span>
<span class=k>struct</span> <span class=n>ct_sqrt</span><span class=o>&lt;</span><span class=n>res</span><span class=p>,</span> <span class=n>r</span><span class=p>,</span> <span class=n>r</span><span class=o>&gt;</span> <span class=o>:</span> <span class=n>std</span><span class=o>::</span><span class=n>integral_constant</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span><span class=p>,</span> <span class=n>r</span><span class=o>&gt;</span> <span class=p>{};</span>

<span class=k>template</span> <span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>res</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>l</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>r</span><span class=o>&gt;</span>
<span class=k>struct</span> <span class=n>ct_sqrt</span> <span class=o>:</span> <span class=n>std</span><span class=o>::</span><span class=n>integral_constant</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span><span class=p>,</span> <span class=n>ct_sqrt</span><span class=o>&lt;</span><span class=n>res</span><span class=p>,</span>
        <span class=p>(</span><span class=n>POW</span><span class=p>(</span><span class=n>MID</span><span class=p>(</span><span class=n>r</span><span class=p>,</span> <span class=n>l</span><span class=p>))</span> <span class=o>&gt;=</span> <span class=n>res</span> <span class=o>?</span> <span class=n>l</span> <span class=o>:</span> <span class=n>MID</span><span class=p>(</span><span class=n>r</span><span class=p>,</span> <span class=n>l</span><span class=p>)</span><span class=o>+</span><span class=mi>1</span><span class=p>),</span>
        <span class=p>(</span><span class=n>POW</span><span class=p>(</span><span class=n>MID</span><span class=p>(</span><span class=n>r</span><span class=p>,</span> <span class=n>l</span><span class=p>))</span> <span class=o>&gt;=</span> <span class=n>res</span> <span class=o>?</span> <span class=n>MID</span><span class=p>(</span><span class=n>r</span><span class=p>,</span> <span class=n>l</span><span class=p>)</span> <span class=o>:</span> <span class=n>r</span><span class=p>)</span><span class=o>&gt;::</span><span class=n>value</span><span class=o>&gt;</span> <span class=p>{};</span>
</pre><p>With smart binary search, you can reduce A LOT the numbers that needs to be tested in order to find the answer. It very easily found the answer for 302500. It can find the square root of almost all integers, until it fails due to overflows. I think it is really great :)</p><p>Of course, we can also do the constexpr version:</p><pre class="code c++ literal-block">
<span class=k>static</span> <span class=n>constexpr</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>ct_mid</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>a</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>b</span><span class=p>){</span>
    <span class=k>return</span> <span class=p>(</span><span class=n>a</span><span class=o>+</span><span class=n>b</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>;</span>
<span class=p>}</span>

<span class=k>static</span> <span class=n>constexpr</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>ct_pow</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>a</span><span class=p>){</span>
    <span class=k>return</span> <span class=n>a</span><span class=o>*</span><span class=n>a</span><span class=p>;</span>
<span class=p>}</span>

<span class=k>static</span> <span class=n>constexpr</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>ct_sqrt</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>res</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>l</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>r</span><span class=p>){</span>
    <span class=k>return</span>
        <span class=n>l</span> <span class=o>==</span> <span class=n>r</span> <span class=o>?</span> <span class=n>r</span>
        <span class=o>:</span> <span class=n>ct_sqrt</span><span class=p>(</span><span class=n>res</span><span class=p>,</span> <span class=n>ct_pow</span><span class=p>(</span>
            <span class=n>ct_mid</span><span class=p>(</span><span class=n>r</span><span class=p>,</span> <span class=n>l</span><span class=p>))</span> <span class=o>&gt;=</span> <span class=n>res</span> <span class=o>?</span> <span class=n>l</span> <span class=o>:</span> <span class=n>ct_mid</span><span class=p>(</span><span class=n>r</span><span class=p>,</span> <span class=n>l</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
            <span class=n>ct_pow</span><span class=p>(</span><span class=n>ct_mid</span><span class=p>(</span><span class=n>r</span><span class=p>,</span> <span class=n>l</span><span class=p>))</span> <span class=o>&gt;=</span> <span class=n>res</span> <span class=o>?</span> <span class=n>ct_mid</span><span class=p>(</span><span class=n>r</span><span class=p>,</span> <span class=n>l</span><span class=p>)</span> <span class=o>:</span> <span class=n>r</span><span class=p>);</span>
<span class=p>}</span>

<span class=k>static</span> <span class=n>constexpr</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>ct_sqrt</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>res</span><span class=p>){</span>
    <span class=k>return</span> <span class=n>ct_sqrt</span><span class=p>(</span><span class=n>res</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>res</span><span class=p>);</span>
<span class=p>}</span>
</pre><p>Which is a bit more understandable. It works the same way than the previous one and is only limited by numeric overflow.</p></div><div class=section id=c-14-fun><h2>C++14 Fun</h2><p>In C++14, the constraints on constexpr functions have been highly relaxed, we can now use variables, if/then/else statements, loops and so on... in constexpr functions making them much more readable. Here is the C++14 version of the previous code:</p><pre class="code c++ literal-block">
<span class=k>static</span> <span class=n>constexpr</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>ct_sqrt</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>res</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>l</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>r</span><span class=p>){</span>
    <span class=k>if</span><span class=p>(</span><span class=n>l</span> <span class=o>==</span> <span class=n>r</span><span class=p>){</span>
        <span class=k>return</span> <span class=n>r</span><span class=p>;</span>
    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
        <span class=k>const</span> <span class=k>auto</span> <span class=n>mid</span> <span class=o>=</span> <span class=p>(</span><span class=n>r</span> <span class=o>+</span> <span class=n>l</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>;</span>

        <span class=k>if</span><span class=p>(</span><span class=n>mid</span> <span class=o>*</span> <span class=n>mid</span> <span class=o>&gt;=</span> <span class=n>res</span><span class=p>){</span>
            <span class=k>return</span> <span class=n>ct_sqrt</span><span class=p>(</span><span class=n>res</span><span class=p>,</span> <span class=n>l</span><span class=p>,</span> <span class=n>mid</span><span class=p>);</span>
        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
            <span class=k>return</span> <span class=n>ct_sqrt</span><span class=p>(</span><span class=n>res</span><span class=p>,</span> <span class=n>mid</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>r</span><span class=p>);</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>

<span class=k>static</span> <span class=n>constexpr</span> <span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>ct_sqrt</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span> <span class=n>res</span><span class=p>){</span>
    <span class=k>return</span> <span class=n>ct_sqrt</span><span class=p>(</span><span class=n>res</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>res</span><span class=p>);</span>
<span class=p>}</span>
</pre><p>I think this version is highly superior than the previous version. Don't you think ?</p><p>It performs exactly the same as the previous. This can only be done in clang for now, but that will come eventually to gcc too.</p></div><div class=section id=conclusion><h2>Conclusion</h2><p>As you saw, there are several ways to compute a square root at compile-time in C++. The constexpr versions are much more readable and generally more scalable than the template metaprogramming version. Moreover, now, with C++14, we can write constexpr functions almost as standard function, which makes really great.</p><p>I hope that is is helpful to some of you :)</p><p>All the sources are available on Github: <a class="reference external" href=https://github.com/wichtounet/articles/tree/master/src/sqrt>https://github.com/wichtounet/articles/tree/master/src/sqrt</a></p></div> </div> <a href=posts/2014/07/compile-integer-square-roots-at-compile-time-in-cpp.html#disqus_thread data-disqus-identifier=cache/posts/2014/07/compile-integer-square-roots-at-compile-time-in-cpp.html>Comments</a> </article> <nav class=postindexpager> <ul class=pager> <li class=previous> <a href=index.html rel=prev>Newer posts</a> </li> <li class=next> <a href=index-25.html rel=next>Older posts</a> </li> </ul> </nav> <script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script> </div> </div> </div></div><footer> Contents © 2015 <a href=mailto:baptistewicht@gmail.com>Baptiste Wicht</a> - Powered by <a href=http://getnikola.com rel=nofollow>Nikola</a><a rel=license href=http://creativecommons.org/licenses/by/4.0/><img alt="Creative Commons License" style=padding-left:5px;border-width:0 src=assets/img/cc.png></a> <ul class=footer_inline_ul> </ul></footer> <script src=assets/js/all-nocdn.js></script> <script type=text/javascript>
      $(document).ready(function() {
        jQuery.getJSON('/assets/js/tag_cloud_data.json', function(data) {
            var items = [];

            $.each(data, function(key, val) {
                items.push('<li><a href="' + val[1] +'" '+'data-weight="'+val[0]+'"'+'>' + key + '</a></li>');
            });

            $('<div/>', {
                'id': 'tags',
                html: '<ul>' + items.join('') + '</ul>'
            }).appendTo('body');

            if(!$('#tags_canvas').tagcanvas({
                textColour: '#FFFFFF',
                outlineColour: '#ff00ff',
                reverse: true,
                depth: 0.8,
                maxSpeed: 0.05,
                weight: true,
                weightFrom: "data-weight",
                weightSizeMin: 8,
                weightSizeMax: 24
            },'tags')) {
                //something went wrong, hide the canvas container
                $('#tags_container').hide();
            }});
        });
    </script><script type=text/javascript src=https://apis.google.com/js/platform.js></script></body></html>