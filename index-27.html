<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<base href="http://baptiste-wicht.com/index-27.html">
<meta name="description" content="Website about vtechnologies Java, Spring, OSGi, Hardware,...">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>@Blog("Baptiste Wicht") (old posts, page 27) | @Blog("Baptiste Wicht")</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="http://baptiste-wicht.com/index-27.html">
<link rel="prev" href="index.html" type="text/html">
<link rel="next" href="index-26.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2175227-7']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script><link href="favicon.ico" rel="icon" type="image/x-icon">
</head>
<body>

<div class="social_container">
    <div class="social_container_gplus">
        <a target="_blank" title="Share on Google+" href="https://plusone.google.com/_/+1/confirm?hl=en&amp;url=http://baptiste-wicht.com/index-27.html"><img src="assets/img/google_plus.png"></a>
    </div>
    <div class="social_container_facebook">
        <a target="_blank" title="Share on Facebook" href="http://www.facebook.com/sharer/sharer.php?u=#url"><img src="assets/img/facebook.png"></a>
    </div>
    <div class="social_container_twitter">
        <a target="_blank" title="Tweet on Twitter" href="http://twitter.com/home?status=#url"><img src="assets/img/twitter.svg"></a>
    </div>
</div>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container-fluid">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://baptiste-wicht.com/">
                <span id="blog-title">@Blog("Baptiste Wicht")</span>
            </a>
        </div>
<!-- /.navbar-header -->
        
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
<li>
<a href="stories/about.html">About</a>
                </li>
<li>
<a href="stories/publications.html">Publications</a>
                </li>
<li>
<a href="stories/donate.html">Donate</a>
                </li>
<li>
<a href="stories/contact.html">Contact</a>
                </li>
<li>
<a href="stories/faq.html">FAQ</a>
                </li>
<li>
<a href="stories/legal.html">Legal</a>
                </li>
<li>
<a href="categories/index.html">Tags</a>
                </li>
<li>
<a href="archive.html">Archives</a>
                </li>
<li>
<a href="http://feeds.feedburner.com/BaptisteWicht">RSS</a>

            </li>
</ul>
<span class="navbar-form pull-left">
                <form action="stories/search.html">
                    <input type="text" name="q" id="tipue_search_input">
</form>
            </span>
            
            <ul class="nav navbar-nav navbar-right">
<li>
                    <a target="_blank" title="Follow @wichtounet on Twitter" href="https://twitter.com/wichtounet">
                        <img src="assets/img/twitter.svg" alt="Follow @wichtounet on Twitter"></a>
                </li>
                <li>
                    <a target="_blank" title="Follow +BaptisteWicht on Google+" href="https://plus.google.com/+BaptisteWicht">
                        <img src="assets/img/google_plus.svg" alt="Follow +BaptisteWicht on Google+"></a>
                </li>
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container-fluid -->
</nav><!-- End of Menubar --><div class="body-container">

    <!-- Sidebar -->

    <div class="left-sidebar">
            <div class="left-sidebar-widget">
                <h3>Welcome to my blog</h3>
                <div class="left-sidebar-widget-content">
                    <div class="g-person" data-width="275" data-href="//plus.google.com/u/0/103113673902796202116" data-theme="dark" data-layout="landscape" data-rel="author"></div>
                </div>
            </div>

            <div class="left-sidebar-widget">
                <h3>Tags</h3>
                <div class="left-sidebar-widget-content">
                    <div id="tags_container">
                        <canvas width="275" height="250" id="tags_canvas"><p>Anything in here will be replaced on browsers that support the canvas element</p>
                        </canvas>
</div>
                </div>
            </div>

        
        <div class="left-sidebar-widget">
            <h3>Recent comments</h3>
            <div class="left-sidebar-widget-content">
                <div id="recentcomments" class="dsq-widget">
                    <script type="text/javascript" src="http://blogwichtounet.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=28&amp;excerpt_length=50"></script>
</div>
            </div>
        </div>

        <div class="left-sidebar-widget">
            <h3>Blogroll</h3>
            <div class="left-sidebar-widget-content">
                <ul>
<li><a target="_blank" href="http://www.asjava.com/">AsJava.com : Java Tutorial</a></li>
                    <li><a target="_blank" href="http://www.mkyong.com/">Mkyong : Java Tutorials</a></li>
                </ul>
</div>
        </div>
    </div>


    <!-- Content -->

    <div class="container">
        <div class="body-content">
            <div class="row">
                
        <article class="postbox h-entry post-text"><h1 class="p-name">
<a href="posts/2014/10/linux-tip-force-systemd-networkd-to-wait-for-dhcp.html" class="u-url">Linux tip: Force systemd networkd to wait for DHCP</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2014-10-01T20:18:55+02:00">2014-10-01 20:18</time></small>
</h1>
        <hr>
<div class="p-summary">
        <div>
<p>Recently, I started using systemd-networkd to manage my network. It works really
good for static address configuration, but I experienced some problem with DHCP.
There is DHCP client support integrated into systemd, so I wanted to use this
instead of using another DHCP client.</p>
<p>(If you are not familiar with systemd-networkd, you can have a look at the last
section of this article)</p>
<p>The problem with that is that services are not waiting for DHCP leases to be
obtained. Most services (sshd for instance), are waiting for network.target,
however, network.target does not wait for the DHCP lease to be obtained from the
server. If you configured ssh on a specific IP and this IP is obtained with
DHCP, it will fail at startup. The same is true for NFS mounts for instance.</p>
<div class="section" id="force-services-to-wait-for-the-network-to-be-configured">
<h2>Force services to wait for the network to be configured</h2>
<p>The solution is to make services like sshd waits for network-online.target
instead of network.target. There is a simple way in systemd to override default
service files. For a X.service, systemd will also parse all the
/etc/systemd/X.service.d/*.conf files.</p>
<p>For instance, to make sshd be started only after DHCP is finished</p>
<p>/etc/systemd/systemd/sshd.service.d/network.conf:</p>
<pre class="literal-block">
[Unit]
Wants=network-online.target
After=network-online.target
</pre>
<p>However, by default, network-online.target does not wait for anything. You'll
have to enable another service to make it work:</p>
<pre class="literal-block">
systemctl enable systemd-networkd-wait-online
</pre>
<p>And another note, at least on Gentoo, I had to use systemd-216 for it to work:</p>
<pre class="literal-block">
emerge -a "=sys-apps/systemd-216"
</pre>
<p>And after this, it worked like a charm at startup.</p>
</div>
<div class="section" id="force-nfs-mounts-to-wait-for-the-network">
<h2>Force NFS mounts to wait for the network</h2>
<p>There is no service file for nfs mounts, but there is a target remote-fs.target
that groups the remote file systems mounts. You can override its configuration
in the same as a service:</p>
<p>/etc/systemd/systemd/remote-fs.target.d/network.conf:</p>
<pre class="literal-block">
[Unit]
Wants=network-online.target
After=network-online.target
</pre>
</div>
<div class="section" id="conclusion">
<h2>Conclusion</h2>
<p>Here we are, I hope this tip will be useful to some of you ;)</p>
</div>
<div class="section" id="appendix-configure-interface-with-dhcp-with-systemd">
<h2>Appendix. Configure interface with DHCP with systemd</h2>
<p>To configure an interface with DHCP, you have to create a .network file in
/etc/systemd/network/. For instance, here is my
/etc/systemd/network/local.network file:</p>
<pre class="code text"><a name="rest_code_dc4a2742582247878225c7af0532b938-1"></a>[Match]
<a name="rest_code_dc4a2742582247878225c7af0532b938-2"></a>Name=enp3s0
<a name="rest_code_dc4a2742582247878225c7af0532b938-3"></a>
<a name="rest_code_dc4a2742582247878225c7af0532b938-4"></a>[Network]
<a name="rest_code_dc4a2742582247878225c7af0532b938-5"></a>DHCP=v4
</pre>
<p>and you have to enable systemd-networkd:</p>
<pre class="literal-block">
systemctl enable systemd-networkd
</pre>
</div>
</div>
        </div>
            
        
    <a href="posts/2014/10/linux-tip-force-systemd-networkd-to-wait-for-dhcp.html#disqus_thread" data-disqus-identifier="cache/posts/2014/10/linux-tip-force-systemd-networkd-to-wait-for-dhcp.html">Comments</a>


        </article><article class="postbox h-entry post-text"><h1 class="p-name">
<a href="posts/2014/09/budgetwarrior-041-expense-templates-and-year-projection.html" class="u-url">budgetwarrior 0.4.1 - Expense templates and year projection</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2014-09-21T20:53:53+02:00">2014-09-21 20:53</time></small>
</h1>
        <hr>
<div class="p-summary">
        <div>
<p>I've been able to finish the version 0.4.1 of budgetwarrior before I though :)</p>
<div class="section" id="expense-templates">
<h2>Expense templates</h2>
<p>The "most useful" new feature of this release is the ability to create template
for expenses.</p>
<p>For that, you can give an extra parameter to budget expense add:</p>
<pre class="literal-block">
budget expense add template name
</pre>
<p>This will works exactly the same as creating a new expense expect that it will
be saved as a template. Then, the next time you do:</p>
<pre class="literal-block">
budget expense add template name
</pre>
<p>A new expense will be created with the date of the day and with the name and
amount saved into the template. You can create as many templates as you want as
long as they have different names. You can see all the templates you have by
using 'budget expense template'. A template can be deleted the exact same as an
expense with 'budget expense delete id'.</p>
<p>I think this is very useful for expense that are made several times a month, for
instance a coffee at your workplace. The price should not change a lot and it is
faster to just use the template name rather than entering all the information
again.</p>
</div>
<div class="section" id="year-prediction">
<h2>Year prediction</h2>
<p>You can now see what would be next year if you changed a bit your expenses. For
instance, how much would you still have at the end of the year if you increased
your house expenses by 20% and reduced your insurances by 5% ?</p>
<p>The 'budget predict' can be used for that purpose. You can enter a multiplier
for each account in your budget and a new year will be "predicted" based on
the expenses of the current year multiplied by the specified multiplier:</p>
<img alt="/images/budget_041_prediction.png" src="images/budget_041_prediction.png"><p>I think that this feature can be very useful if you want to estimate how your
budget will be for moving to a more expensive house or another insurance for
instance.</p>
</div>
<div class="section" id="various-changes">
<h2>Various changes</h2>
<p>Two accounts can be merged together with the 'budget account migrate' command.
This command will move all expenses from an account to another and adapt the
amount of the target account. The source account will be deleted. This supports
migrated accounts.</p>
<p>The 'budget wish list' command will now display the mean accuracy of your
predictions.</p>
<p>You don't need Boost anymore for this project. The only remaining dependency is
libuuid. I will perhaps remove it in the next version since the UUID are not
used in the application for now.</p>
<p>The command 'budget gc' will clean the IDs of all your data in order to fill the
holes and make all the IDs contiguous. It is mostly a feature for order-freaks
like me who do not like to have holes in a sequence of identifiers ;)</p>
<p>There was a bug in the monthly report causing the scale to be displayed
completely moved, it is now fixed:</p>
<img alt="https://raw.githubusercontent.com/wichtounet/budgetwarrior/develop/screenshots/budget_report.png" src="https://raw.githubusercontent.com/wichtounet/budgetwarrior/develop/screenshots/budget_report.png">
</div>
<div class="section" id="installation">
<h2>Installation</h2>
<p>If you are on Gentoo, you can install it using layman:</p>
<pre class="literal-block">
layman -a wichtounet
emerge -a budgetwarrior
</pre>
<p>If you are on Arch Linux, you can use this <a class="reference external" href="https://github.com/StreakyCobra/aur">AUR repository</a>.</p>
<p>For other systems, you'll have to install from sources:</p>
<pre class="literal-block">
git clone git://github.com/wichtounet/budgetwarrior.git
cd budgetwarrior
make
sudo make install
</pre>
</div>
<div class="section" id="conclusion">
<h2>Conclusion</h2>
<p>If you are interested by the sources, you can download them on Github:
<a class="reference external" href="https://github.com/wichtounet/budgetwarrior">budgetwarrior</a>.</p>
<p>If you have a suggestion for a new features or you found a bug, please post an
issue on Github, I'd be glad to help you.</p>
<p>If you have any comment, don't hesitate to contact me, either by letting a
comment on this post or by email.</p>
</div>
</div>
        </div>
            
        
    <a href="posts/2014/09/budgetwarrior-041-expense-templates-and-year-projection.html#disqus_thread" data-disqus-identifier="cache/posts/2014/09/budgetwarrior-041-expense-templates-and-year-projection.html">Comments</a>


        </article><nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-26.html" rel="next">Older posts</a>
            </li>
        </ul></nav><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        </div>
    </div>
</div>

<!-- Footer -->

<footer>
    Contents © 2015         <a href="mailto:baptistewicht@gmail.com">Baptiste Wicht</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="assets/img/cc.png"></a>
        <ul class="footer_inline_ul"></ul></footer><!-- Late loading stuff  --><script src="assets/js/all-nocdn.js"></script><script type="text/javascript">
      $(document).ready(function() {
        jQuery.getJSON('/assets/js/tag_cloud_data.json', function(data) {
            var items = [];

            $.each(data, function(key, val) {
                items.push('<li><a href="' + val[1] +'" '+'data-weight="'+val[0]+'"'+'>' + key + '</a></li>');
            });

            $('<div/>', {
                'id': 'tags',
                html: '<ul>' + items.join('') + '</ul>'
            }).appendTo('body');

            if(!$('#tags_canvas').tagcanvas({
                textColour: '#FFFFFF',
                outlineColour: '#ff00ff',
                reverse: true,
                depth: 0.8,
                maxSpeed: 0.05,
                weight: true,
                weightFrom: "data-weight",
                weightSizeMin: 8,
                weightSizeMax: 24
            },'tags')) {
                //something went wrong, hide the canvas container
                $('#tags_container').hide();
            }});
        });
    </script><!-- Google platform JS --><script type="text/javascript" src="https://apis.google.com/js/platform.js"></script>
</body>
</html>
