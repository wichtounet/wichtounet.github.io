<p>In Java 7, we'll see a new class : <a href="http://download.java.net/jdk7/docs/api/java/util/Objects.html" target="_blank">java.util.Objects</a>. This class contains 9 static methods to work on Objects. I found these methods really useful.</p>
<p>First, two really simple methods to assert non-null objects in getter/setter (or other methods, of course) :</p>
<ul>
    <li><T> T <strong>nonNull</strong>(T obj) : If obj is not null, return obj else throw a NullPointerException.</li>
    <li><T> T <strong>nonNull</strong>(T obj, String message) : If obj is not null return obj else throw a customized NullPointerException with the given message</li>
</ul>

<p>Some simple examples :</p>
<pre class="code literal-block"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">setFoo</span><span class="o">(</span><span class="n">Foo</span> <span class="n">foo</span><span class="o">){</span>
    <span class="k">this</span><span class="o">.</span><span class="na">foo</span> <span class="o">=</span> <span class="n">Objects</span><span class="o">.</span><span class="na">nonNull</span><span class="o">(</span><span class="n">foo</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBar</span><span class="o">(</span><span class="n">Bar</span> <span class="n">bar</span><span class="o">){</span>
    <span class="k">this</span><span class="o">.</span><span class="na">foo</span> <span class="o">=</span> <span class="n">Objects</span><span class="o">.</span><span class="na">nonNull</span><span class="o">(</span><span class="n">bar</span><span class="o">,</span> <span class="s">&quot;bar cannot be null&quot;</span><span class="o">);</span>
<span class="o">}</span>
</pre>


<p>Although simple, these methods can improve the readability of code and avoid having to write the is-null check ourselves.</p>
<p>Then, we have two methods to compute a toString() value for Object supporting null objects :</p>
<ul>
    <li>String <strong>toString</strong>(Object o) : Return the toString() value of a non-null object otherwise "null".</li>
    <li>String <strong>toString</strong>(Object o, String nullDefault) : Return the toString() value of a non-null object otherwise return nullDefault</li>
</ul>

<p>Again, this is useful for code readibility :</p>
<pre class="code literal-block"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Bar</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Foo</span> <span class="n">foo</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Bar</span> <span class="n">parent</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">(){</span>
        <span class="k">return</span> <span class="s">&quot;Bar {foo = &quot;</span> <span class="o">+</span> <span class="n">Objects</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">foo</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;, parent = &quot;</span> <span class="o">+</span> <span class="n">Objects</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">parent</span><span class="o">,</span> <span class="s">&quot;no parent, orphan&quot;</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;}&quot;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>


<p>I think, it's a lot better than :</p>
<pre class="code literal-block"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Bar</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Foo</span> <span class="n">foo</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Bar</span> <span class="n">parent</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">(){</span>
        <span class="k">return</span> <span class="s">&quot;Bar {foo = &quot;</span> <span class="o">+</span> <span class="o">(</span><span class="n">foo</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="s">&quot;null&quot;</span> <span class="o">:</span> <span class="n">foo</span><span class="o">.</span><span class="na">toString</span><span class="o">())</span> <span class="o">+</span> <span class="s">&quot;, parent = &quot;</span> <span class="o">+</span> <span class="o">(</span><span class="n">parent</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="s">&quot;o parent, orphan&quot;</span> <span class="o">:</span> <span class="n">parent</span><span class="o">.</span><span class="na">toString</span><span class="o">())</span> <span class="o">+</span> <span class="s">&quot;}&quot;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>


<p>Isn't it ?</p>
<p>After that, we also two similar methods for hashing :</p>
<ul>
    <li>int <strong>hash</strong>(Object... values) : Compute a hash code for all the given values</li>
    <li>int <strong>hashCode</strong>(Object o) : If 0 is null return 0 othewise return o.hashCode()</li>
</ul>

<p>If we take again the exemple of the Bar class. If we have to write the hashCode() method without Objects, we could do that :</p>
<pre class="code literal-block"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Bar</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Foo</span> <span class="n">foo</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Bar</span> <span class="n">parent</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">(){</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">17</span><span class="o">;</span>

        <span class="n">result</span> <span class="o">=</span> <span class="mi">31</span> <span class="o">*</span> <span class="n">result</span> <span class="o">+</span> <span class="o">(</span><span class="n">foo</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">foo</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>
        <span class="n">result</span> <span class="o">=</span> <span class="mi">31</span> <span class="o">*</span> <span class="n">result</span> <span class="o">+</span> <span class="o">(</span><span class="n">parent</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">parent</span><span class="o">.</span><span class="na">hashCode</span><span class="o">());</span>

        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>


<p>With Java 7, we only have to do that :</p>
<pre class="code literal-block"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Bar</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Foo</span> <span class="n">foo</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Bar</span> <span class="n">parent</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">Objects</span><span class="o">.</span><span class="na">hash</span><span class="o">(</span><span class="n">foo</span><span class="o">,</span> <span class="n">parent</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>


<p>And that's it :)</p>
<p>On the same model, we've also two methods for equality checks :</p>
<ul>
    <li>boolean <strong>equals</strong>(Object a, Object b) : Return true if the two arguments are null or they are both not null and a.equals(b) return true, otherwise false.</li>
    <li>boolean <strong>deepEquals</strong>(Object a, Object b) : Almost the same as the first method except that if both a and b are arrays, the equality is evaluated using Arrays.deepEquals method.</li>
</ul>

<p>Once again, that can really ease the coding of equals() methods :</p>
<pre class="code literal-block"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Bar</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Foo</span> <span class="n">foo</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Bar</span> <span class="n">parent</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">obj</span><span class="o">){</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">obj</span> <span class="o">==</span> <span class="k">this</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span> 

        <span class="k">if</span> <span class="o">(</span><span class="n">obj</span> <span class="k">instanceof</span> <span class="n">Bar</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Bar</span> <span class="n">other</span> <span class="o">=</span> <span class="o">(</span><span class="n">Bar</span><span class="o">)</span> <span class="n">obj</span><span class="o">;</span> 

            <span class="k">if</span> <span class="o">(</span><span class="n">foo</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="na">foo</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">foo</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="o">!</span><span class="n">foo</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">foo</span><span class="o">))</span> <span class="o">{</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span> 

            <span class="k">if</span> <span class="o">(</span><span class="n">parent</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="na">parent</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">parent</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="o">!</span><span class="n">parent</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">parent</span><span class="o">))</span> <span class="o">{</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span> 

            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span> 

        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>


<p>become :</p>
<pre class="code literal-block"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Bar</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Foo</span> <span class="n">foo</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Bar</span> <span class="n">parent</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">obj</span><span class="o">){</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">obj</span> <span class="o">==</span> <span class="k">this</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span> 

        <span class="k">if</span> <span class="o">(</span><span class="n">obj</span> <span class="k">instanceof</span> <span class="n">Bar</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Bar</span> <span class="n">other</span> <span class="o">=</span> <span class="o">(</span><span class="n">Bar</span><span class="o">)</span> <span class="n">obj</span><span class="o">;</span> 

            <span class="k">return</span> <span class="n">Objects</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">foo</span><span class="o">,</span> <span class="n">other</span><span class="o">.</span><span class="na">foo</span><span class="o">)</span> <span class="o">&amp;</span><span class="n">amp</span><span class="o">;</span><span class="n">amp</span><span class="o">;&amp;</span><span class="n">amp</span><span class="o">;</span><span class="n">amp</span><span class="o">;</span> <span class="n">Objects</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">parent</span><span class="o">,</span> <span class="n">other</span><span class="o">.</span><span class="na">parent</span><span class="o">);</span>
        <span class="o">}</span> 

        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>


<p>Better, no ?</p>
<p>And the last one : <T> int <strong>compare</strong>(T a, T b, Comparator&lt;? super T&gt; c). This method returns 0 if a == b or if both are null otherwise c.compare(a, b). The support of null is delegated to the comparator.</p>
<p>We've covered all the features offered by this new class.</p>
<p>Of course, there is already some methods like that in librairies like Jarkarta Commons or Google Guava, but it's always better when we doesn't have to include a library for that kind of features.</p>
<p>I hope you found this post interesting.</p>