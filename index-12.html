<!DOCTYPE html><html lang="en">
<head>
    <link href="favicon.ico" rel="icon" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Website about vtechnologies Java, Spring, OSGi, Hardware,...">
    <meta name="author" content="Baptiste Wicht">
    <title>@Blog("Baptiste Wicht") (old posts, page 12) | @Blog("Baptiste Wicht")</title>
    
            <link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
      <link rel="canonical" href="http://wichtounet.github.io/index-12.html">
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
            <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">

    
    
    <link rel="stylesheet" type="text/css" href="assets/css/tipuesearch.css">
    
</head>
<body>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid"><!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://wichtounet.github.io/">@Blog("Baptiste Wicht")</a>
        </div><!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                
                <li><a href="stories/about.html">About</a>
                </li><li><a href="stories/publications.html">Publications</a>
                </li><li><a href="stories/donate.html">Donate</a>
                </li><li><a href="stories/contact.html">Contact</a>
                </li><li><a href="stories/faq.html">FAQ</a>
                </li><li><a href="stories/legal.html">Legal</a>
                </li><li><a href="archive.html">Archives</a>
                </li><li><a href="categories/index.html">Tags</a>
                </li><li><a href="rss.xml">RSS</a>

            </li></ul>

            <span class="navbar-form pull-left">
                <form action="stories/search.html">
                    <div style="float: left;"><input type="text" name="q" id="tipue_search_input"></div>
                    <div style="float: left; margin-left: 13px;"><input type="button" id="tipue_search_button" onclick="this.form.submit();"></div>
                </form>
            </span>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

<!-- End of Menubar -->

<div class="body-container">

    <!-- Sidebar -->

    <div class="left-sidebar">
            <div class="left-sidebar-widget">
                <h3>Welcome to my blog</h3>
                <div class="left-sidebar-widget-content">
                    <!-- <p>
                        I'm writing about C++, Linux, Gentoo, Home Servers, etc...
                    </p> -->
                    <div class="g-person" data-width="275" data-href="//plus.google.com/u/0/103113673902796202116" data-theme="dark" data-layout="landscape" data-rel="author"></div>
                </div>
            </div>

            <div class="left-sidebar-widget">
                <h3>Tags</h3>
                <div class="left-sidebar-widget-content">
                    <div id="tags_container">
                        <canvas width="275" height="250" id="tags_canvas">
                            <p>Anything in here will be replaced on browsers that support the canvas element</p>
                        </canvas>
                    </div>
                </div>
            </div>

        
        <div class="left-sidebar-widget">
            <h3>Recent comments</h3>
            <div class="left-sidebar-widget-content">
                <div id="recentcomments" class="dsq-widget">
                    <script type="text/javascript" src="http://blogwichtounet.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=28&amp;excerpt_length=50"></script> 
                </div>
            </div>
        </div>

        <div class="left-sidebar-widget">
            <h3>Popular posts</h3>
            <div class="left-sidebar-widget-content">
                <div id="popularthreads" class="dsq-widget">
                    <script type="text/javascript" src="http://blogwichtounet.disqus.com/popular_threads_widget.js?num_items=5&amp;days_back=90"></script>
                </div>
            </div>
        </div>
        
        <div class="left-sidebar-widget">
            <h3>Blogroll</h3>
            <div class="left-sidebar-widget-content">
                <ul>
                    <li><a target="_blank" href="http://www.asjava.com/">AsJava.com : Java Tutorial</a></li>
                    <li><a target="_blank" href="http://www.mkyong.com/">Mkyong : Java Tutorials</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Content -->

    <div class="container">
            <div class="body-content">

            <div class="row">
                
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/10/jtheque-core-2-1-0-released.html" class="u-url">JTheque Core 2.1.0 released !</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-10-20T07:12:33+00:00">2010-10-20 07:12</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>It's my pleasure to announce that I've finally released <strong>JTheque Core 2.1.0</strong> !</p>
<p>The different services of the core are now separated using <strong>OSGi</strong>. With this separation, I've improved a lot the design of the core and the orthogonality of the different services. Each service is now an OSGi bundle. I've also refactored the implementation of all services. Several services have been completely rewritten. The majority of the bundles are now thread-safe.</p>
<p>Now, to create modules for a JTheque application, you have to write an OSGi bundle representing the module. Then, you only have to use Spring to launch the module. This is done using <strong>Spring Dynamic Modules</strong>. The used OSGi container is <strong>Felix</strong>.</p>
<p>Now that this version of the core is finalized, I'll updates the applications. First of all, JTheque Movies with the new version of the core.</p>
<p>Fore more informations and to download JTheque Core, you can go on <a href="http://www.jtheque.com/jtheque-core">the description page</a>. If you want to try developing a module (or see how it is done), you can consult <a href="http://www.jtheque.com/jtheque-core/guides/develop-modular-application-jtheque-core-2-1-0">this starter guide</a>.</p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/10/jtheque-core-2-1-0-released.html#disqus_thread" data-disqus-identifier="cache/posts/2010/10/jtheque-core-2-1-0-released.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/10/compute-command-line-arguments-with-apache-commons-cli.html" class="u-url">Compute command-line arguments with Apache Commons CLI</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-10-14T07:22:45+00:00">2010-10-14 07:22</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>For a project at school, I needed to refactor an old code parsing almost 30 command line arguments. I needed to add some more arguments and change some old args, but the old code was not maintainable at all. So I decided to use a library to make the parsing. of the args. </p>
<p>I chose Apache Commons CLI. This is a really simple library to make that parsing. It's not perfect, but it makes the work I needed and is powerful to do that job. </p>
<p>With this API, you have to declare an Options instance. This class is used to describe the command line arguments of the program. Options constructor don't take any arguments. </p>
<div class="code"><pre><span class="n">Options</span> <span class="n">options</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Options</span><span class="o">();</span>
</pre></div>


<!--more-->

<p>Then you have to use the addOption methods to add some arguments to the application. There is three versions of the methods : </p>
<ul>
    <li>addOption(Option opt) : Add an option of the class Option. </li>
    <li>addOption(String opt, boolean hasArg, String description) : Add a new option to the arguments. This option has only a short name. </li>
    <li>addOption(String opt, String longOpt, boolean hasArg, String description) : Add a new option to the arguments.  The option has a short name and a long name. </li>
</ul>

<p>We need some explanations here. The short opt is used to define an arg with a simple dash (-shortopt) and the long opt is defined with double dash (--longopt). The hasArg indicate if the parameter accepts an argument. The description is, like its name indicates, the description of the option. It's used to print the help of the program.</p>
<p>Using Option instances you can configure all the properties of an option using the setters and the constructor. Here is all the setters that can be used to configure the option : </p>
<ul>
    <li> void   setArgName(String argName) : The name of the args</li>
    <li> void   setArgs(int num) : The number of args the option takes</li>
    <li>void    setDescription(String description) : The description of the option</li>
    <li> void   setLongOpt(String longOpt) : The long option name</li>
    <li> void   setOptionalArg(boolean optionalArg) : Indicate if the argument of this option is optional</li>
    <li> void   setRequired(boolean required) : Indicate if the option is required or not</li>
    <li>void    setType(Object type) : Set the type of the Option. Here are the supported type : File.class, Number.class, Class.class, Object.class, Url.class</li>
    <li> void   setValueSeparator(char sep) : Set the value separator, it's used to make a system like the property of Java like -Dmaven.test.skip=true, the separator is = </li>
</ul>

<p>There is also an other way to create Option instance, using the OptionBuilder class. It's a little weird because all the methods are static and the method returns a reference to the builder. And then you make a call to the builder instance using the static method. The method are equivalent with the methods of the Option class with different names (withXXX, hasXXX, ...). When you have configured the option, you have to call one of the create methods to create the instance and reset the OptionBuilder. </p>
<p>Once you filled the Options instance with the arguments of the program, you can use it. You have to use a CommandLineParser to parse the Options. There is three implementation of this interface : </p>
<ul>
    <li><strong>BasicParser</strong> : A very simple parser</li>
    <li><strong>PosixParser</strong> : A parser to parse short options</li>
    <li><strong>GnuParser </strong>: A parser to parse both long and short options</li>
</ul>

<p>A simple example using the GnuParser : </p>
<div class="code"><pre><span class="n">CommandLineParser</span> <span class="n">parser</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GnuParser</span><span class="o">();</span>

<span class="n">CommandLine</span> <span class="n">cmd</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">options</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
</pre></div>


<p>You receive a CommandLine object representing all the arguments. The parse() method can throw a ParseException if the given arguments are not valid. With that object, you can get the options that have been passed to the application. For that, you can use the given methods : </p>
<p></p><ul>
    <li>Object  getOptionObject : Return the option value parsed to the specified type</li>
    <li> Properties getOptionProperties(String opt) </li>
    <li> String getOptionValue : Return the value of the option</li>
    <li> String[]   getOptionValues : Return the values of the option</li>
    <li> Object getParsedOptionValue(String opt)  : Return the option value parsed to the specified type</li>
    <li> boolean    hasOption : Indicate if the option has been specified or not</li>
    <li> List   getArgList()  : Return all the args that are not specified args</li>
    <li> String[]   getArgs() : Return all the args that are not specified args</li>
</ul>
<p>With this API, you can also generate the help of the program : </p>
<div class="code"><pre><span class="n">HelpFormatter</span> <span class="n">formatter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HelpFormatter</span><span class="o">();</span>

<span class="n">formatter</span><span class="o">.</span><span class="na">printHelp</span><span class="o">(</span> <span class="s">"program"</span><span class="o">,</span> <span class="n">options</span><span class="o">);</span>
</pre></div>


<p>With that, you display the list of arguments taken by the program. </p>
<p>With that example, we've seen the main features of this library. </p>
<p>For more information, you consult the <a target="_blank" href="http://commons.apache.org/cli/index.html">Apache Commons CLI</a> website.</p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/10/compute-command-line-arguments-with-apache-commons-cli.html#disqus_thread" data-disqus-identifier="cache/posts/2010/10/compute-command-line-arguments-with-apache-commons-cli.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/09/the-pragmatic-programmer-book-review.html" class="u-url">The Pragmatic Programmer - Book Review</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-09-29T07:12:10+00:00">2010-09-29 07:12</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>This week, I finished a new book : <strong>The Pragmatic Programmer</strong>, from journeyman to master, written by Andrew Hunt and David Thomas.</p>
<p>According to the author, reading this book will make you a better programmer, a pragmatic programmer. A pragmatic programmer is a person who loves its work and who always want to improve it. He wants to improve its skills and to learn new technologies. He doesn't only code, he wants to provide better and better code.</p>
<p>This book don't focus on any language, it can be useful to programmer of every language.</p>
<p>I don't advice this book to complete beginners because this book contains a lot of different ideas that can discourage neophyte because of the lot of works they must provide to become a real pragmatic programmer.</p>
<p>You will learn several very important things in these books :</p>
<ul>
    <li>Have a pragmatic philosophy : Assume your responsibilities, don't let broken windows appears, fix issues as they come, make quality software, improve your knowledges, communicate with other persons, ...</li>
    <li>Adopt a pragmatic approach : Duplication is Hell, Orthogonality is Heaven, use tracer bullets and prototype when starting projects to achieve your objectives</li>
    <li>Use the good tools : Use good editors, automate all that you can, construct a set of tools for your usage</li>
    <li>Be paranoiac : design by contract, use exceptions, ...</li>
    <li>Don't go to deep in your errors</li>
    <li>Make your code better and better while you're coding, consider the speed of algorithms</li>
    <li>Before the project, get the good requirements, specify as good as you can</li>
    <li>Create a pragmatic team</li>
</ul>

<p>Like you can see this book provide a long list of advices, that is not always easy to read and to understand. I've made a lot of pauses, re-reading a passage to have a good understanding of the whole lot.</p>
<p>I''ve found all the advices very good and interesting and I think that applying these advices will help me to make better work.</p>
<p>But, I must say that some chapters have not aged well. Especially, on tools. The authors advice to use only tools like plain text editor and shell commands. I think that with the power of modern IDE we can save a lot of time.</p>
<p>But this little default expected, this book is a great book, a must read book, that every programmer should read once in its life.</p>
<p>More informations on the website of the book : <a target="_blank" href="http://www.pragprog.com/titles/tpp/the-pragmatic-programmer">http://www.pragprog.com/titles/tpp/the-pragmatic-programmer</a></p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/09/the-pragmatic-programmer-book-review.html#disqus_thread" data-disqus-identifier="cache/posts/2010/09/the-pragmatic-programmer-book-review.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/09/a-better-swingworker.html" class="u-url">Swing tip : A better SwingWorker without exception swallowing</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-09-24T07:36:55+00:00">2010-09-24 07:36</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>When we develop Swing applications, SwingWorker are very helpful. But there is a big disadvantage using this class. if you don't call get() in the done method, you will lose all the exceptions that the computation in the doInBackground() has thrown. And you action can stop and you will never see why. In 95% of my actions using SwingWorker, the doInBackground() return nothing.</p>
<p>Jonathan Giles has presented on his blog a good solution to solve this exception swallowing. In my side, I've often something to do in the EDT before the doInBackground() run, so I've made the changes on the code presented by Jonathan and it gave me that simple class that I found better than the SwingWorker :</p>
<div class="code"><pre><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">BetterSwingWorker</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">SwingWorker</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">,</span> <span class="n">Void</span><span class="o">&gt;</span> <span class="n">worker</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleSwingWorker</span><span class="o">();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">SwingUtilities</span><span class="o">.</span><span class="na">invokeLater</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">before</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="n">worker</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">before</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">//Nothing by default</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">doInBackground</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span>

    <span class="kd">protected</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">done</span><span class="o">();</span>

    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">SimpleSwingWorker</span> <span class="kd">extends</span> <span class="n">SwingWorker</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">,</span> <span class="n">Void</span><span class="o">&gt;</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="n">Void</span> <span class="nf">doInBackground</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
            <span class="n">BetterSwingWorker</span><span class="o">.</span><span class="na">this</span><span class="o">.</span><span class="na">doInBackground</span><span class="o">();</span>

            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">done</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">get</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="kd">final</span> <span class="n">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="kd">final</span> <span class="n">ExecutionException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">ex</span><span class="o">.</span><span class="na">getCause</span><span class="o">());</span>
            <span class="o">}</span>

            <span class="n">BetterSwingWorker</span><span class="o">.</span><span class="na">this</span><span class="o">.</span><span class="na">done</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>You can use it as the default SwingWorker. You must implement the doInBackground() and done() methods and you can, only if you want, override the before() method that is invoked in the EDT at the start of the process. And then, you can execute your SwingWorker using execute(). </p>
<p>I hope this little class can be useful to somebody. </p>
<p><a title="A SwingWorker that doesn’t swallow exceptions" href="http://jonathangiles.net/blog/?p=341" target="_blank">Source for the non-swallowing swingworker.</a></p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/09/a-better-swingworker.html#disqus_thread" data-disqus-identifier="cache/posts/2010/09/a-better-swingworker.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/09/solve-einsteins-riddle-using-prolog.html" class="u-url">Solve Einstein’s Riddle using Prolog</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-09-22T07:01:30+00:00">2010-09-22 07:01</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>This week, we started learning Prolog at school. So to exercise, I choose the Einstein's Riddle. Einstein wrote this riddle in the 19th century. He stated that only 2% of the population can solve it by mind. Personnally, I'm not of this two %, I needed paper and pens to solve it. But this is not the them of the post, so let's use Prolog to solve it. I will present my solution, there is certainly other solutions, and certainly better, but it makes only some days that I started learning this language and this new kind of developing, logical programming. </p>
<p>Here is the riddle as stated by Einstein :</p>
<ol>
    <li>In a street there are five houses, painted five different colours.</li>
    <li>In each house lives a person of different nationality</li>
    <li>These five homeowners each drink a different kind of beverage, smoke different brand of cigar and keep a different pet.</li>
</ol>

<p>The question is : Who owns the fish ?</p>
<p>And there are 15 hints :</p>
<ol>
    <li>The Brit lives in a red house.</li>
    <li>The Swede keeps dogs as pets.</li>
    <li>The Dane drinks tea.</li>
    <li>The Green house is next to, and on the left of the White house.</li>
    <li>The owner of the Green house drinks coffee.</li>
    <li>The person who smokes Pall Mall rears birds.</li>
    <li>The owner of the Yellow house smokes Dunhill.</li>
    <li>The man living in the centre house drinks milk.</li>
    <li>The Norwegian lives in the first house.</li>
    <li>The man who smokes Blends lives next to the one who keeps cats.</li>
    <li>The man who keeps horses lives next to the man who smokes Dunhill.</li>
    <li>The man who smokes Blue Master drinks beer.</li>
    <li>The German smokes Prince.</li>
    <li>The Norwegian lives next to the blue house.</li>
    <li>The man who smokes Blends has a neighbour who drinks water.</li>
</ol>

<p>So let's start with the code !</p>
<!--more-->

<p>First of all, we'll create a list of tuple containing all the informations about a men . The position in the list represent the position of the house in the street. So we'll create a predicate to create the list :</p>
<div class="code"><pre><span class="nf">persons</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="p">[])</span> <span class="p">:-</span> <span class="p">!.</span>
<span class="nf">persons</span><span class="p">(</span><span class="nv">N</span><span class="p">,</span> <span class="p">[(</span><span class="k">_</span><span class="nv">Men</span><span class="p">,</span><span class="k">_</span><span class="nv">Color</span><span class="p">,</span><span class="k">_</span><span class="nv">Drink</span><span class="p">,</span><span class="k">_</span><span class="nv">Smoke</span><span class="p">,</span><span class="k">_</span><span class="nv">Animal</span><span class="p">)|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nv">N1</span> <span class="o">is</span> <span class="nv">N</span><span class="o">-</span><span class="m">1</span><span class="p">,</span> <span class="nf">persons</span><span class="p">(</span><span class="nv">N1</span><span class="p">,</span><span class="nv">T</span><span class="p">).</span>
</pre></div>


<p>The first predicate, is to end when the index is 0 and the list is empty. And the second one create a recursive list with N element. Then, I needed a predicate to get the Nth element if corresponding to some informations of the recursive list : </p>
<div class="code"><pre><span class="nf">person</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="p">[</span><span class="nv">H</span><span class="p">|</span><span class="k">_</span><span class="p">],</span> <span class="nv">H</span><span class="p">)</span> <span class="p">:-</span> <span class="p">!.</span>
<span class="nf">person</span><span class="p">(</span><span class="nv">N</span><span class="p">,</span> <span class="p">[</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">],</span> <span class="nv">R</span><span class="p">)</span> <span class="p">:-</span> <span class="nv">N1</span> <span class="o">is</span> <span class="nv">N</span><span class="o">-</span><span class="m">1</span><span class="p">,</span> <span class="nf">person</span><span class="p">(</span><span class="nv">N1</span><span class="p">,</span> <span class="nv">T</span><span class="p">,</span> <span class="nv">R</span><span class="p">).</span>
</pre></div>


<p>Again, the first one is used to stop when we are at the good element. And the second predicate iterate until the good element is found. </p>
<p>Then, I have translated the hints into predicate : </p>
<div class="code"><pre><span class="c1">% The Brit lives in a red house</span>
<span class="nf">hint1</span><span class="p">([(</span><span class="s-Atom">brit</span><span class="p">,</span><span class="s-Atom">red</span><span class="p">,</span><span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint1</span><span class="p">([</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nf">hint1</span><span class="p">(</span><span class="nv">T</span><span class="p">).</span>
<span class="c1">% The Swede keeps dogs as pets</span>
<span class="nf">hint2</span><span class="p">([(</span><span class="s-Atom">swede</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">dog</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint2</span><span class="p">([</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nf">hint2</span><span class="p">(</span><span class="nv">T</span><span class="p">).</span>
<span class="c1">% The Dane drinks tea</span>
<span class="nf">hint3</span><span class="p">([(</span><span class="s-Atom">dane</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">tea</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint3</span><span class="p">([</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nf">hint3</span><span class="p">(</span><span class="nv">T</span><span class="p">).</span>
<span class="c1">% The Green house is on the left of the White house</span>
<span class="nf">hint4</span><span class="p">([(</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">green</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">),(</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">white</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint4</span><span class="p">([</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nf">hint4</span><span class="p">(</span><span class="nv">T</span><span class="p">).</span>
<span class="c1">% The owner of the Green house drinks coffee. </span>
<span class="nf">hint5</span><span class="p">([(</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">green</span><span class="p">,</span><span class="s-Atom">coffee</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint5</span><span class="p">([</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nf">hint5</span><span class="p">(</span><span class="nv">T</span><span class="p">).</span>
<span class="c1">% The person who smokes Pall Mall rears birds</span>
<span class="nf">hint6</span><span class="p">([(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">pallmall</span><span class="p">,</span><span class="s-Atom">bird</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint6</span><span class="p">([</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nf">hint6</span><span class="p">(</span><span class="nv">T</span><span class="p">).</span>
<span class="c1">% The owner of the Yellow house smokes Dunhill</span>
<span class="nf">hint7</span><span class="p">([(</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">yellow</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">dunhill</span><span class="p">,</span><span class="k">_</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint7</span><span class="p">([</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nf">hint7</span><span class="p">(</span><span class="nv">T</span><span class="p">).</span>
<span class="c1">% The man living in the centre house drinks milk</span>
<span class="nf">hint8</span><span class="p">(</span><span class="nv">Persons</span><span class="p">)</span> <span class="p">:-</span> <span class="nf">person</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="nv">Persons</span><span class="p">,</span> <span class="p">(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">milk</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">)).</span>
<span class="c1">% The Norwegian lives in the first house</span>
<span class="nf">hint9</span><span class="p">(</span><span class="nv">Persons</span><span class="p">)</span> <span class="p">:-</span> <span class="nf">person</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="nv">Persons</span><span class="p">,</span> <span class="p">(</span><span class="s-Atom">norwegian</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">)).</span>
<span class="c1">% The man who smokes Blends lives next to the one who keeps cats</span>
<span class="nf">hint10</span><span class="p">([(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">blend</span><span class="p">,</span><span class="k">_</span><span class="p">),(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">cat</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint10</span><span class="p">([(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">cat</span><span class="p">),(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">blend</span><span class="p">,</span><span class="k">_</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint10</span><span class="p">([</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nf">hint10</span><span class="p">(</span><span class="nv">T</span><span class="p">).</span>
<span class="c1">% The man who keeps horses lives next to the man who smokes Dunhill</span>
<span class="nf">hint11</span><span class="p">([(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">dunhill</span><span class="p">,</span><span class="k">_</span><span class="p">),(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">horse</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint11</span><span class="p">([(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">horse</span><span class="p">),(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">dunhill</span><span class="p">,</span><span class="k">_</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint11</span><span class="p">([</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nf">hint11</span><span class="p">(</span><span class="nv">T</span><span class="p">).</span>
<span class="c1">% The man who smokes Blue Master drinks beer</span>
<span class="nf">hint12</span><span class="p">([(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">beer</span><span class="p">,</span><span class="s-Atom">bluemaster</span><span class="p">,</span><span class="k">_</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint12</span><span class="p">([</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nf">hint12</span><span class="p">(</span><span class="nv">T</span><span class="p">).</span>
<span class="c1">% The German smokes Prince</span>
<span class="nf">hint13</span><span class="p">([(</span><span class="s-Atom">german</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">prince</span><span class="p">,</span><span class="k">_</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint13</span><span class="p">([</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nf">hint13</span><span class="p">(</span><span class="nv">T</span><span class="p">).</span>
<span class="c1">% The Norwegian lives next to the blue house</span>
<span class="nf">hint14</span><span class="p">([(</span><span class="s-Atom">norwegian</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">),(</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">blue</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint14</span><span class="p">([(</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">blue</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">),(</span><span class="s-Atom">norwegian</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint14</span><span class="p">([</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nf">hint14</span><span class="p">(</span><span class="nv">T</span><span class="p">).</span>
<span class="c1">% The man who smokes Blends has a neighbour who drinks water</span>
<span class="nf">hint15</span><span class="p">([(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">blend</span><span class="p">,</span><span class="k">_</span><span class="p">),(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">water</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint15</span><span class="p">([(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">water</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">),(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">blend</span><span class="p">,</span><span class="k">_</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">hint15</span><span class="p">([</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nf">hint15</span><span class="p">(</span><span class="nv">T</span><span class="p">).</span>
<span class="c1">% The question : Who owns the fish ?</span>
<span class="nf">question</span><span class="p">([(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">fish</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">question</span><span class="p">([</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nf">question</span><span class="p">(</span><span class="nv">T</span><span class="p">).</span>
</pre></div>


<p>I've used one main way to do the predicates. The first predicate type used for every predicates except 8 and 9 is really  simple. I expressed the valid values and then, I used iteration to iterate over the arrays. With that, the predicate is true when the the list contains the good value (or values when testing for an house next to another). </p>
<p>The other predicate is that we specify that the Nth contains some values. </p>
<p>After that, we must specify the question : </p>
<div class="code"><pre><span class="nf">question</span><span class="p">([(</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="s-Atom">fish</span><span class="p">)|</span><span class="k">_</span><span class="p">]).</span>
<span class="nf">question</span><span class="p">([</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nf">question</span><span class="p">(</span><span class="nv">T</span><span class="p">).</span>
</pre></div>


<p>We just iterate the list, specifying that there is a man with a fish. Without the question, we can solve the problem, but we don't know that the last animal is a fish. </p>
<p>And after all, we can try to solve the riddle : </p>
<div class="code"><pre><span class="nf">solution</span><span class="p">(</span><span class="nv">Persons</span><span class="p">)</span> <span class="p">:-</span>
  <span class="nf">persons</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="nv">Persons</span><span class="p">),</span>
  <span class="nf">hint1</span><span class="p">(</span><span class="nv">Persons</span><span class="p">),</span>
  <span class="nf">hint2</span><span class="p">(</span><span class="nv">Persons</span><span class="p">),</span>
  <span class="nf">hint3</span><span class="p">(</span><span class="nv">Persons</span><span class="p">),</span>
  <span class="nf">hint4</span><span class="p">(</span><span class="nv">Persons</span><span class="p">),</span>
  <span class="nf">hint5</span><span class="p">(</span><span class="nv">Persons</span><span class="p">),</span>
  <span class="nf">hint6</span><span class="p">(</span><span class="nv">Persons</span><span class="p">),</span>
  <span class="nf">hint7</span><span class="p">(</span><span class="nv">Persons</span><span class="p">),</span>
  <span class="nf">hint8</span><span class="p">(</span><span class="nv">Persons</span><span class="p">),</span>
  <span class="nf">hint9</span><span class="p">(</span><span class="nv">Persons</span><span class="p">),</span>
  <span class="nf">hint10</span><span class="p">(</span><span class="nv">Persons</span><span class="p">),</span>
  <span class="nf">hint11</span><span class="p">(</span><span class="nv">Persons</span><span class="p">),</span>
  <span class="nf">hint12</span><span class="p">(</span><span class="nv">Persons</span><span class="p">),</span>
  <span class="nf">hint13</span><span class="p">(</span><span class="nv">Persons</span><span class="p">),</span>
  <span class="nf">hint14</span><span class="p">(</span><span class="nv">Persons</span><span class="p">),</span>
  <span class="nf">hint15</span><span class="p">(</span><span class="nv">Persons</span><span class="p">),</span>
  <span class="nf">question</span><span class="p">(</span><span class="nv">Persons</span><span class="p">).</span>
</pre></div>


<p>We just say that the solution is the combinaison of all the hints and the question, so that the solution must validate all predicates. </p>
<p>So let's try our program : </p>
<pre>wichtounet@wichtounet-laptop:~/Desktop$ gprolog
GNU Prolog 1.3.0
By Daniel Diaz
Copyright (C) 1999-2007 Daniel Diaz
| ?- [einstein.pl].      
uncaught exception: error(syntax_error('user_input:1 (char:10) , | ] or operator expected in list'),read_term/3)
| ?- 
Prolog interruption (h for help) ? e
wichtounet@wichtounet-laptop:~/Desktop$ gprolog
GNU Prolog 1.3.0
By Daniel Diaz
Copyright (C) 1999-2007 Daniel Diaz
| ?- consult('einstein.pl').
compiling /home/wichtounet/Desktop/einstein.pl for byte code...
/home/wichtounet/Desktop/einstein.pl compiled, 100 lines read - 14891 bytes written, 17 ms
yes
| ?- solution(Persons).
Persons = [(norwegian,yellow,water,dunhill,cat),(dane,blue,tea,blend,horse),(brit,red,milk,pallmall,bird),
(german,green,coffee,prince,fish),(swede,white,beer,bluemaster,dog)] ? a
(20 ms) no
| ?- 
Prolog interruption (h for help) ? e
</pre>

<p>With that, we found not only the man who have fish but also all the other informations. The answer is the german. </p>
<p>That's all we need :)</p>
<p>I hope you found that post interesting. </p>
<p>Here is the complete source code : <a href="wp-content/uploads/2010/09/einstein.pl">Einstein's Riddle in Prolog</a></p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/09/solve-einsteins-riddle-using-prolog.html#disqus_thread" data-disqus-identifier="cache/posts/2010/09/solve-einsteins-riddle-using-prolog.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/09/jdk-7-features-updated-plan-b-is-apparently-here.html" class="u-url">JDK 7 Features updated ! Plan B has apparently been approved</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-09-20T06:15:28+00:00">2010-09-20 06:15</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>I was presenting the <strong>Plan B</strong> of <strong>JDK 7</strong> the last week and apparently, this plan has been approved.</p>
<p>The <a href="http://openjdk.java.net/projects/jdk7/features/" target="_blank">JDK 7 Features page</a> has been updated on the site of <strong>Oracle</strong>.</p>
<p>So here are the (definitive ?) list of features for JDK 7 :</p>
<ul>
    <li>JSR 292: Support for dynamically-typed languages (InvokeDynamic)</li>
    <li>Languages update of the project Coin</li>
    <li>Concurrency and collections updates (jsr166y)</li>
    <li>ionet   JSR 203: More new I/O APIs for the Java platform (NIO.2)</li>
    <li>SCTP (Stream Control Transmission Protocol)</li>
    <li>SDP (Sockets Direct Protocol)</li>
    <li>Elliptic-curve cryptography (ECC)</li>
    <li>client  XRender pipeline for Java 2D</li>
    <li>Create new platform APIs for 6u10 graphics features</li>
    <li>Nimbus look-and-feel for Swing</li>
    <li>Swing JLayer component</li>
</ul>

<p>And we can also see that there is some new features that we doesn't have seen before:</p>
<ul>
    <li>TLS 1.2</li>
    <li>JDBC 4.1</li>
    <li>Unicode 6.0</li>
    <li>Locale enhancement</li>
    <li>Separate user locale and user-interface locale</li>
    <li>NIO.2 filesystem provider for zip/jar archives</li>
    <li>Use the Windows Vista IPv6 stack when available</li>
</ul>

<p>And after all that informations, we can see the features delayed to JDK 8 :</p>
<ul>
    <li>JSR 294: Language and VM support for modular programming</li>
    <li>JSR 308: Annotations on Java types</li>
    <li>JSR TBD: Language support for collections [NEW]</li>
    <li>JSR TBD: Project Lambda</li>
    <li>Modularization (Project Jigsaw)</li>
    <li>JSR 296: Swing application framework</li>
    <li>Swing JDatePicker component</li>
</ul>

<p>For more informations and the complete list of features for the two versions of JDK, you can consult the <a title="JDK 7 Features" href="http://openjdk.java.net/projects/jdk7/features/" target="_blank">JDK 7 Features</a> page. There will certainly be some additional informations at JavaOne this week.</p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/09/jdk-7-features-updated-plan-b-is-apparently-here.html#disqus_thread" data-disqus-identifier="cache/posts/2010/09/jdk-7-features-updated-plan-b-is-apparently-here.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/09/jtheque-utils-1-1-5.html" class="u-url">JTheque Utils 1.1.5</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-09-16T08:01:19+00:00">2010-09-16 08:01</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>It's my pleasure to announce the release of a new version of <strong>JTheque Utils</strong>, the <strong>1.1.5</strong>.</p>
<p>There is a lot of changes in this version. First of all, the library is now OSGi Ready, you can use it with no problem in an OSGi application. Here are the main changes of this version :</p>
<p></p><ul>
    <li>The main classes have been made thread safe and all the classes are now documented to indicate if they are thread safe, not thread safe or immutable.</li>
    <li>The library has now some annotations to document thread safety, thanks to Brian Goetz for the idea</li>
    <li>SwingUtils support now headless environment</li>
    <li>Version has a better version comparison</li>
    <li>A new simple way to manage system properties with the SystemProperty class</li>
    <li>CollectionUtils has a new set of methods to create collections and concurrent collections</li>
    <li>A simple thread safe weak event listener list, WeakEventListenerList</li>
    <li>HashCodeUtils has been improved to manage arrays</li>
    <li>Some classes have been made Immutable</li>
    <li>The utility class have new methods</li>
    <li>And a lot of other little changes and bug fixes</li>
</ul>
<p>More informations on <a title="JTheque Utils" href="http://www.jtheque.com/jtheque-utils" target="_self">the JTheque website</a>.  You can download it <a title="Downloads of JTheque Utils" href="http://www.jtheque.com/jtheque-utils/downloads" target="_blank">from here</a>.</p>
<p>I hope that this library will be useful to someone.</p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/09/jtheque-utils-1-1-5.html#disqus_thread" data-disqus-identifier="cache/posts/2010/09/jtheque-utils-1-1-5.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/09/java-concurrency-part-7-executors-and-thread-pools.html" class="u-url">Java Concurrency - Part 7 : Executors and thread pools</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-09-15T07:17:27+00:00">2010-09-15 07:17</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>Let's start with a new post in the Java concurrency series.</p>
<p>This time we'll learn how to start cleanly new threads and to manage thread pools. In Java, if you have a Runnable like this :</p>
<div class="code"><pre><span class="n">Runnable</span> <span class="n">runnable</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Runnable</span><span class="o">(){</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Run"</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>You can easily run it in a new thread :</p>
<div class="code"><pre><span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="n">runnable</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
</pre></div>


<p>This is very simple and clean, but what if you've several long running tasks that you want to load in parralel and then wait for the completion of all the tasks, it's a little bit harder to code and if you want to get the return value of all the tasks it becomes really difficult to keep a good code. But like for almost any problems, Java has a solution for you, the Executors. This simple class allows you to create thread pools and thread factories.</p>
<!--more-->

<p>A thread pool is represented by an instance of the class ExecutorService. With an ExecutorService, you can submit task that will be completed in the future. Here are the type of thread pools you can create with the Executors class :</p>
<ul>
    <li><strong>Single Thread Executor</strong> : A thread pool with only one thread. So all the submitted task will be executed sequentially. Method : <em>Executors.newSingleThreadExecutor()</em></li>
    <li><strong>Cached Thread Pool</strong> : A thread pool that create as many threads it needs to execute the task in parralel. The old available threads will be reused for the new tasks. If a thread is not used during 60 seconds, it will be terminated and removed from the pool. Method : <em>Executors.newCachedThreadPool()</em></li>
    <li><strong>Fixed Thread Pool</strong> : A thread pool with a fixed number of threads. If a thread is not available for the task, the task is put in queue waiting for an other task to ends. Method : <em>Executors.newFixedThreadPool()</em></li>
    <li><strong>Scheduled Thread Pool</strong> : A thread pool made to schedule future task. Method : <em>Executors.newScheduledThreadPool()</em></li>
    <li><strong>Single Thread Scheduled Pool</strong> : A thread pool with only one thread to schedule future task. Method : <em>Executors.newSingleThreadScheduledExecutor()</em></li>
</ul>

<p>Once you have a thread pool, you can submit task to it using the different submit methods. You can submit a Runnable or a Callableto the thread pool. The method return a Future representing the future state of the task. If you submitted a Runnable, the Future object return null once the task finished.</p>
<p>By example, if you have this Callable :</p>
<div class="code"><pre><span class="kd">private</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">StringTask</span> <span class="kd">implements</span> <span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="o">{</span>
   <span class="kd">public</span> <span class="n">String</span> <span class="nf">call</span><span class="o">(){</span>
      <span class="c1">//Long operations</span>

      <span class="k">return</span> <span class="s">"Run"</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>If you want to execute that task 10 times using 4 threads, you can use that code :</p>
<div class="code"><pre><span class="n">ExecutorService</span> <span class="n">pool</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>

<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
   <span class="n">pool</span><span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="k">new</span> <span class="n">StringTask</span><span class="o">());</span>
<span class="o">}</span>
</pre></div>


<p>But you must shutdown the thread pool in order to terminate all the threads of the pool :</p>
<div class="code"><pre><span class="n">pool</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
</pre></div>


<p>If you don't do that, the JVM risk to not shutdown because there is still threads not terminated. You can also force the shutdown of the pool using shutdownNow, with that the currently running tasks will be interrupted and the tasks not started will not be started at all.</p>
<p>But with that example, you cannot get the result of the task. So let's get the Future objects of the tasks :</p>
<div class="code"><pre><span class="n">ExecutorService</span> <span class="n">pool</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Future</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span> <span class="n">futures</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Future</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;(</span><span class="mi">10</span><span class="o">);</span>

<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
   <span class="n">futures</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">pool</span><span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="k">new</span> <span class="n">StringTask</span><span class="o">()));</span>
<span class="o">}</span>

<span class="k">for</span><span class="o">(</span><span class="n">Future</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">future</span> <span class="o">:</span> <span class="n">futures</span><span class="o">){</span>
   <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">future</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>

   <span class="c1">//Compute the result</span>
<span class="o">}</span>

<span class="n">pool</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
</pre></div>


<p>But this code is a bit complicated. And there is a disadvantage. If the first task takes a long time to compute and all the other tasks ends before the first, the current thread cannot compute the result before the first task ends. Once again, Java has the solution for you, CompletionService.</p>
<p>A CompletionService is a service that make easier to wait for result of submitted task to an executor. The implementation is ExecutorCompletionService who's based on an ExecutorService to work. So let's try :</p>
<div class="code"><pre><span class="n">ExecutorService</span> <span class="n">threadPool</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>

<span class="n">CompletionService</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">pool</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ExecutorCompletionService</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;(</span><span class="n">threadPool</span><span class="o">);</span>

<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
   <span class="n">pool</span><span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="k">new</span> <span class="n">StringTask</span><span class="o">());</span>
<span class="o">}</span>

<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
   <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="na">take</span><span class="o">().</span><span class="na">get</span><span class="o">();</span>

   <span class="c1">//Compute the result</span>
<span class="o">}</span>

<span class="n">threadPool</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
</pre></div>


<p>With that, you have the result in the order they are completed and you don't have to keep a collection of Future.</p>
<p>Here we are, you have the tools in hand to launch tasks in parralel using performing thread pools. Using Executors, ExecutorService and CompletionService you can create complex algorithm using several taks. With that tools, it's really easy to change the number of threads performing in parralel or adding more tasks without changing a lot of code.</p>
<p>I hope that this post will help you to write better concurrent code.</p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/09/java-concurrency-part-7-executors-and-thread-pools.html#disqus_thread" data-disqus-identifier="cache/posts/2010/09/java-concurrency-part-7-executors-and-thread-pools.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/09/hardware-guide-the-power-supply.html" class="u-url">Hardware Guide : The power supply</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-09-10T07:33:12+00:00">2010-09-10 07:33</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>After writing a lot about Java concurrency, I wanted to write about something else, I chosen Hardware, so I wrote a new guide about power supplies.</p>
<h4>Introduction</h4>

<p>The power supply provide electrical power to the computer and to the several components. Without power supply, a computer cannot start. The power supply is connected to the power distribution system of your home and convert this power into the good number of watts needed by the components of your PC. All the power is redistributed using several different connectors.</p>
<p>When we buy a power supply, you need to keep in mind several elements, the available connectors and the power generated by the power supply.</p>
<!--more-->

<h4>Connectors</h4>

<p>From your power supply, several connectors go out. All of these connectors have a specific use. Here are the existing types of connectors that you can find on a power supply :</p>
<ul>
    <li><strong>ATX Connectors</strong> : This connector is used to power the motherboard. Generally, there is 20 pins, but new motherboards need 24. So new power supplies provide a 24 pins connectors with 4 pins detachable. Pay attention that some motherboard also needs an additional 4 pins connector, so verify that your power supply has this  connector before buying it.</li>
    <li><strong>Molex Connectors for  5 ¼ et 3 ½ peripheral</strong> : This connector power an IDE component (hard disk, CD/DVD reader/writer).</li>
    <li><strong>Molex Connectors for  floppy</strong> : this connector is less and less used so not all power supply provide this connector.</li>
    <li><strong>12V 6 pins Connector</strong> : This connector enable to connect a PCI-Express graphics card. Not all cards need that connector, only the last generation graphics card need a power addition. Most of the graphics card have a connector of this type, but for big configuration with two graphics card (SLI or CrossFire), you'll need two connectors. The power supply with two connectors of this type are named SLI-Ready.</li>
    <li><strong>SATA Connectors</strong> : To power SATA peripheral.</li>
</ul>

<p>Generally each type of connector have keyed to avoid branch the cable in the wrong direction. There is also adapters to switch from one type to an other one or to double a connector (but pay attention to not overhead your power supply).</p>
<p>Pay also attention to the length of the cables if you have a big case (Big Tower).</p>
<h4>The power</h4>

<p>The power of your power supply is the number of Watts that it can deliver. Pay attention that a basic power supply will often have brownouts if there is a lot of load. This is why it's more interesting to choose a known power supply with a lower tension than a noname one with a bigger tension.</p>
<p>Pay attention to the tension on each connector. Some alimentations don't provide the indicated tension. It's why, it's always good to find tests of clients on Internet before buying something.</p>
<p>Of course, you need enough power for your components. The components needing the more power is the processor and the graphics cards. The other components needs less power. For a basic computer a power supply of 300W is enough. When we use last generation graphics card or dual/quadri core processor, you need to have more power, almost 400W-450W. When you have several processors or graphics card, there is a lot more. There is power supply with 1000W but this is an exception only needed (not always...) by big gamers or scientists.</p>
<p>To compute the number of Watt that a component need, you can almost use this list :</p>
<p>Pour calculer le besoin en Watts d'un composant vous pouvez plus ou moins vous fier à cette liste :</p>
<ul>
    <li>Motherboard : 40-50 W</li>
    <li>Simple core processor : 40-50 W</li>
    <li>Dual Core processor : 90-100 W</li>
    <li>Server Processor (Xeon by example) : ~150W</li>
    <li>Graphics card PCI/AGP : 50 W</li>
    <li>Graphics card PCI Express : 125W</li>
    <li>Additional PCI Card : 15-55 W</li>
    <li>Hard Disk : 15-40 W depending on the use</li>
    <li>CD/DVD Readers/Writers : 10-20 W</li>
</ul>

<p>Of course, these datas can change from one peripheral to an other, but this is a good mean.</p>
<p>You can use <a title="PSU Calculator" href="http://www.extreme.outervision.com/psucalculatorlite.jsp" target="_blank">this online calculator</a> to compute the power you need.</p>
<h4>Standards</h4>

<p>You need to choose the power supply in terms of the standard of your computer case. An ATX power supply doesn't fit an case of type Micro-ATX.</p>
<h4>Noise</h4>

<p>The power supply is an element who heats a lot, so you need a cooling system. Generally a power supply have a fan, but some power supply use a passive cooling system. The better is to have a big fan (120mm), it makes less noise.</p>
<p>We can also use a power supply with two fans for a better air extraction.</p>
<p>Pay attention that the fans are the most silent.</p>
<h4>Modularity</h4>

<p>Some power supply are modular. This power supplies don't have the connectors directly connected to the box, but you can connect them yourself. So we only connect the connectors we need. This improve the air flow. But these models are more expensive.</p>
<h4>Size</h4>

<p>Some power supplies are bigger than the other, so pay attention that it fits in your case. This the case for the most powerful models and some modular models. It can also be hard to put some power supplies in some cases due to their concept. To be sure that the two are compatibles, you can directly contact your vendor or make a search on the internet to have returns on the mount of this power supply on your case. But generally you will not have compatibility problems.</p>
<h4>Power Consumption</h4>

<p>More and more vendors put the power consumption on the front of the stage. So it's interesting to choose a power supply with less power consumption if you have the choice between several power supplies that are in your needs. There is some standards like the Certification 80 plus that guarantee that the efficiency of the power supply is at least of 80%.</p>
<h4>Conclusion</h4>

<p>To conclude, the choice of a power supply is not really serious, but it's a serious point in a configuration. Pay attention to have a power supply with enough connectors and enough power to power all your components.</p>
<h4>Tips</h4>

<p>Here are some rules to choose a good power supply :</p>
<ul>
    <li>Don't use too much connectors splitters, you risk to overload your power supply</li>
    <li>Clean regularly your power supply. Don't let the dust win. The fan can block and don't correctly evacuate the heating and the components can be broken. Of course, this is also a good thing to do for the computer in general.</li>
    <li>Don't use a power supply in a configuration where the components needs more power than the power supply provide. If you make it you can stress the power supply and the different connectors will not provide enough tension and some of your components may not appreciate this situation.</li>
</ul></div>
        </div>
            
        
    <p>
        <a href="posts/2010/09/hardware-guide-the-power-supply.html#disqus_thread" data-disqus-identifier="cache/posts/2010/09/hardware-guide-the-power-supply.html">Comments</a>


        </p></article>
        <article class="postbox h-entry post-text">
        <h1 class="p-name"><a href="posts/2010/09/java-7-delays-and-plan-b.html" class="u-url">Java 7 Delays and Plan B</a>
        <br><small>  
             Posted: <time class="published dt-published" datetime="2010-09-09T07:17:29+00:00">2010-09-09 07:17</time>
        </small></h1>
        <hr>
        <div class="e-content">
        <div><p>Mark Reinhold has posted a message about the planning of <strong>Java </strong>7. In this message, he explains that the current schedule of the JDK 7 is completely unrealistic. This delay is due to the add of new projects (lambda, Coin, Jigsaw) and the acquisition of Sun by Oracle. </p>
<p>The current estimate by the team is that the JDK7 can be complete for a release around the middle of 2012. </p>
<p>But, Mark indicates a new option, the "Plan B". With this plan, the JDK7 will be available at mid 2011 without Jigsaw and Lambda and with only a portion of the Coin Project. And JDK8 will be released in late 2012 with the complete set of features scheduled actually for JDK7. </p>
<p>Personnally, I think it's a good idea to separate the two releases and have a first release soon. Like Mark says, it makes a very long time that we don't have had a new Java release, so it will be interesting to have a light JDK7 before 2012. </p>
<p>And you, what do you think ? </p>
<p>Source : <a target="_blank" href="http://blogs.sun.com/mr/entry/rethinking_jdk7">Re-thinking JDK7</a>, by Mark Reinhold</p></div>
        </div>
            
        
    <p>
        <a href="posts/2010/09/java-7-delays-and-plan-b.html#disqus_thread" data-disqus-identifier="cache/posts/2010/09/java-7-delays-and-plan-b.html">Comments</a>


        </p></article>
    
        <div>
        <ul class="pager">
            <li class="previous">
                <a href="index-13.html" rel="prev">← Newer posts</a>
            </li>
            <li class="next">
                <a href="index-11.html" rel="next">Older posts →</a>
            </li>
        </ul>
        </div>

    
        
       <script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>


	


            </div>
        </div>
    </div>
</div>

<!-- Footer -->

<footer>
    Contents © 2014         <a href="mailto:baptistewicht@gmail.com">Baptiste Wicht</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/4.0/88x31.png"></a>
        <ul class="footer_inline_ul">
            
        </ul>
</footer>


            <script src="assets/js/all-nocdn.js" type="text/javascript"></script>


<!-- Late loading stuff  -->

    <script type="text/javascript">
      $(document).ready(function() {
        jQuery.getJSON('/assets/js/tag_cloud_data.json', function(data) {
            var items = [];

            $.each(data, function(key, val) {
                items.push('<li><a href="' + val[1] +'" '+'data-weight="'+val[0]+'"'+'>' + key + '</a></li>');
            });

            $('<div/>', {
                'id': 'tags',
                html: '<ul>' + items.join('') + '</ul>'
            }).appendTo('body');

            if(!$('#tags_canvas').tagcanvas({
                textColour: '#FFFFFF',
                outlineColour: '#ff00ff',
                reverse: true,
                depth: 0.8,
                maxSpeed: 0.05,
                weight: true,
                weightFrom: "data-weight",
                weightSizeMin: 8,
                weightSizeMax: 24
            },'tags')) {
                //something went wrong, hide the canvas container
                $('#tags_container').hide();
            }});
        });
    </script>

<!-- Google platform JS -->
    
<script type="text/javascript" src="https://apis.google.com/js/platform.js"></script>


    
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5327566b264df4ee"></script>
<script type="text/javascript">
  addthis.layers({
    'theme' : 'dark',
    'share' : {
      'position' : 'right',
      //'services' : 'google_plusone,facebook_like,tweet',
      'services' : 'google_plusone_share,facebook,twitter'
    }, 
    'follow' : {
      'services' : [
        {'service': 'twitter', 'id': 'wichtounet'},
        {'service': 'google_follow', 'id': '+BaptisteWicht'}
      ]
    }   
  });
</script>



<!-- Tipue Search -->

<script type="text/javascript" src="assets/js/tipuesearch_set.js"></script>
<script type="text/javascript" src="assets/js/tipuesearch.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('#tipue_search_input').tipuesearch({
        'mode': 'json',
        'contentLocation': '/assets/js/tipuesearch_content.json',
        'showUrl': false
        });
        });
</script>

<script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script>






</body>
</html>