<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang=en> <head><meta charset=utf-8><meta name=description content="Website about vtechnologies Java, Spring, OSGi, Hardware,..."><meta name=viewport content="width=device-width"><title>@Blog("Baptiste Wicht") (old posts, page 25) | @Blog("Baptiste Wicht")</title><link href=assets/css/all-nocdn.css rel=stylesheet type=text/css><link rel=alternate type=application/rss+xml title=RSS href=rss.xml><link rel=canonical href=http://baptiste-wicht.com/index-25.html><script type=text/javascript>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2175227-7']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script><link href=favicon.ico rel=icon type=image/x-icon></head><body><div class=social_container> <div class=social_container_gplus> <a target=_blank title="Share on Google+" href="https://plusone.google.com/_/+1/confirm?hl=en&amp;url=http://baptiste-wicht.com/index-25.html"><img src=assets/img/google_plus.png></a> </div> <div class=social_container_facebook> <a target=_blank title="Share on Facebook" href="http://www.facebook.com/sharer/sharer.php?u=#url"><img src=assets/img/facebook.png></a> </div> <div class=social_container_twitter> <a target=_blank title="Tweet on Twitter" href="http://twitter.com/home?status=#url"><img src=assets/img/twitter.svg></a> </div></div><nav class="navbar navbar-inverse navbar-fixed-top" role=navigation> <div class=container-fluid> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-ex1-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=http://baptiste-wicht.com/> <span id=blog-title>@Blog("Baptiste Wicht")</span> </a> </div> <div class="collapse navbar-collapse navbar-ex1-collapse"> <ul class="nav navbar-nav"> <li><a href=stories/about.html>About</a> </li><li><a href=stories/publications.html>Publications</a> </li><li><a href=stories/donate.html>Donate</a> </li><li><a href=stories/contact.html>Contact</a> </li><li><a href=stories/faq.html>FAQ</a> </li><li><a href=stories/legal.html>Legal</a> </li><li><a href=categories/index.html>Tags</a> </li><li><a href=archive.html>Archives</a> </li><li><a href=http://feeds.feedburner.com/BaptisteWicht>RSS</a> </li></ul> <span class="navbar-form pull-left"> <form action=stories/search.html> <input type=text name=q id=tipue_search_input> </form> </span> <ul class="nav navbar-nav navbar-right"> <li> <a target=_blank title="Follow @wichtounet on Twitter" href=https://twitter.com/wichtounet> <img src=assets/img/twitter.svg alt="Follow @wichtounet on Twitter"> </a> </li> <li> <a target=_blank title="Follow +BaptisteWicht on Google+" href=https://plus.google.com/+BaptisteWicht> <img src=assets/img/google_plus.svg alt="Follow +BaptisteWicht on Google+"> </a> </li> </ul> </div> </div></nav><div class=body-container> <div class=left-sidebar> <div class=left-sidebar-widget> <h3>Welcome to my blog</h3> <div class=left-sidebar-widget-content> <div class=g-person data-width=275 data-href=//plus.google.com/u/0/103113673902796202116 data-theme=dark data-layout=landscape data-rel=author></div> </div> </div> <div class=left-sidebar-widget> <h3>Tags</h3> <div class=left-sidebar-widget-content> <div id=tags_container> <canvas width=275 height=250 id=tags_canvas> <p>Anything in here will be replaced on browsers that support the canvas element</p> </canvas> </div> </div> </div> <div class=left-sidebar-widget> <h3>Recent comments</h3> <div class=left-sidebar-widget-content> <div id=recentcomments class=dsq-widget> <script type=text/javascript src="http://blogwichtounet.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=28&amp;excerpt_length=50"></script> </div> </div> </div> <div class=left-sidebar-widget> <h3>Blogroll</h3> <div class=left-sidebar-widget-content> <ul> <li><a target=_blank href=http://www.asjava.com/>AsJava.com : Java Tutorial</a></li> <li><a target=_blank href=http://www.mkyong.com/>Mkyong : Java Tutorials</a></li> </ul> </div> </div> </div> <div class=container> <div class=body-content> <div class=row> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2014/07/all-packt-publishing-ebooks-at-10-for-10-years-anniversary.html class=u-url>All Packt Publishing ebooks at $10 for 10 years anniversary</a> <br><small>   Posted: <time class="published dt-published" datetime=2014-07-01T22:56:04+02:00>2014-07-01 22:56</time> </small></h1> <hr> <div class=p-summary> <img alt=/images/packt-10years.jpg src=images/packt-10years.jpg><br><p>To celebrate the 10 years anniversay of Packt Publishing, all of the available ebooks on <a class="reference external" href=http://bit.ly/1mE9FUz>Packt Publishing</a> are available at $10 with no limit per client.</p><p>In 10 years, Packt Publishing has published more than 200 titles. Throught its Open Source Project Royalty Scheme, Packt Publishing supports Open Source project and already has awarded more than $400'000.</p><p>If you need something to read or just want to use this occasion to pile some ebooks, don't hesitate to profit from this superb offer.</p><p>More information on the official site: <a class="reference external" href=http://bit.ly/1mE9FUz>http://bit.ly/1mE9FUz</a></p> </div> <a href=posts/2014/07/all-packt-publishing-ebooks-at-10-for-10-years-anniversary.html#disqus_thread data-disqus-identifier=cache/posts/2014/07/all-packt-publishing-ebooks-at-10-for-10-years-anniversary.html>Comments</a> </article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2014/06/build-opencv-with-libcxx-on-gentoo-and-static-libs.html class=u-url>Build OpenCV with libc++ on Gentoo and static-libs</a> <br><small>   Posted: <time class="published dt-published" datetime=2014-06-10T14:09:29+02:00>2014-06-10 14:09</time> </small></h1> <hr> <div class=p-summary> <p>When you build C++ projects with CLang, you have the choice between using the stdlibc++ that is provided along G++ and the new libc++ that is provided by CLang.</p><p>libc++ is another implementation of the C++ Standard Library. This implementation is dual-licensed under the MIT license and UIUC license. It is especially targeting C++11 and has already 100% support for C++14. This last point is the reason that I use libc++ on several of my projects. Moreover, it is also the default on Mac OS X.</p><p>The problem with linking with another library is that you can only works with libraries that have been compiled with libc++ support. For instance, if you want to use Boost dynamic libraries, you'll have to compile Boost from sources with libc++.</p><p>For one of my project, I'm using OpenCV and libc++. To simplify the installation of OpenCV, I created a new ebuild with a <em>libcxx</em> use flag to selectively build the library with libc++. This requires LLVM/CLang on the build machine. Moreover, by default, the Gentoo ebuild does not have support for building the static libraries. The reason for that is that OpenCV build is not able to build dynamic and static libraries. I added a <em>static-libs</em> use flag that build the static libraries by building OpenCV a second time after the first. That will likely double the compile time (unless ccache is used). Anyhow, it is simple easier than to build that by hand on several machine.</p><p>The ebuild is available on <a class="reference external" href=https://github.com/wichtounet/wichtounet-overlay>my overlay</a>. You can add the overlay to your machine by modifying <em>/etc/layman/layman.cfg</em>:</p><pre class=literal-block>
overlays: http://www.gentoo.org/proj/en/overlays/repositories.xml
          http://github.com/wichtounet/wichtounet-overlay/raw/master/repository.xml
</pre><p>Then, you can add it to layman:</p><pre class=literal-block>
layman -S
layman -a wichtounet
</pre><p>For now, I have created an ebuild for <em>opencv-2.4.8-r1</em>. If someone is interested in other versions, I'd be glad to create new ebuilds.</p><p>I hope that this ebuild will be helpful.</p> </div> <a href=posts/2014/06/build-opencv-with-libcxx-on-gentoo-and-static-libs.html#disqus_thread data-disqus-identifier=cache/posts/2014/06/build-opencv-with-libc-on-gentoo-and-static-libs.html>Comments</a> </article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2014/06/software-reliability-presentation.html class=u-url>Software Reliability Presentation</a> <br><small>   Posted: <time class="published dt-published" datetime=2014-06-07T16:45:33+02:00>2014-06-07 16:45</time> </small></h1> <hr> <div class=p-summary> <p>In behalf of my school (College of Engineering and Architecture of Fribourg), I presented a shoft presentation about Software Reliability. In this presentation, I outline the main issues about the subject and propose some solutions:</p><ul class=simple><li>Software Validation</li><li>Defensive Programming</li><li>Software Analysis Tools</li></ul><p>In the Software Analysis Tools, I present three tools: cppcheck, Valgrind and the Clang Static analyzer. Several examples are presented for each tools as well as some recommendations for using them. A short presentation of SonarQube is also performed.</p><p>I thought that it could be of some interest to some of the readers, so here it is:</p><div style=text-align:center;><iframe src=http://www.slideshare.net/slideshow/embed_code/35576524 width=597 height=486 frameborder=0 marginwidth=0 marginheight=0 scrolling=no style="border:1px solid #CCC; border-width:1px 1px 0; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe></div><p>Don't hesitate if you have any comments or questions about the presentation ;)</p><p>The source code for the examples is available <a class="reference external" href=https://github.com/wichtounet/analysis-examples>on Github</a>.</p> </div> <a href=posts/2014/06/software-reliability-presentation.html#disqus_thread data-disqus-identifier=cache/posts/2014/06/software-reliability-presentation.html>Comments</a> </article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2014/05/budgetwarrior-031-git-versioning-easier-creation.html class=u-url>budgetwarrior 0.3.1 - Git versioning and easier creation</a> <br><small>   Posted: <time class="published dt-published" datetime=2014-05-10T16:45:43+02:00>2014-05-10 16:45</time> </small></h1> <hr> <div class=p-summary> <p>I've finished a new version of budgetwarrior: budgetwarrior 0.3.1</p><h3>Changes</h3><p>The most interesting change is the ability to estimate the date when it is a good time to buy something from the wish list. This is done with the <em>budget wish estimate</em> command: </p><p><img alt="budget wish estimate" src=images/budget_031_wish_estimate.jpg></p><p>This command gives you two dates for each wish in your list. The first is the date wating for each yearly objectives to be fullfilled. The second one considers only the monthly objectives. For now on, no estimation of expenses is made for the future months. It means that the estimation is made as if there were no expenses in the future months. I'll try to improve that by considering averages of expenses in the previous months to make it more reliable. </p><p>Still on the wish module, you can now mark your wishes as paid instead of deleting them. This helps you keep track of the prices of your wishes. This is done with the <em>budget wish paid id</em> command. Finally, the totals of the unpaid wishes and of the paid wishes is displayed in <em>budget wish list</em>.</p><p>Another helpful change is the ability to set a date relative to today's date when creating an expense or an earning. For instance, you can create an expense one month before (-1m) or in one year ((+1y) or yesterday (-1d): </p><p><img alt="new date selection mechanism" src=images/budget_031_date_selection.jpg></p><p>Of course, you can also still set the date manually. </p><p>The last major change is the addition of a new module: <em>budget versioning</em>. This module helps you manipulate you budget directory with Git. There are two new commands: </p><ul><li><em>budget versioning save</em>: Commit the current changes with a default message (Update). </li><li><em>budget versioning sync</em>: Pull the changes from the remote directory and push the local changes. </li></ul><p>This will only works if you have already configured your budget directory to use Git. </p><h3>Conclusion</h3><p>I hope you'll found these changes interesting :)</p><p>If you are interested by the tool, you can download it on Github: <a href=https://github.com/wichtounet/budgetwarrior>budgetwarrior</a></p><p>If you have a suggestion or you found a bug, please post an issue on the github project: <a href=https://github.com/wichtounet/budgetwarrior>https://github.com/wichtounet/budgetwarrior</a>.</p><p>If you have any comment, don't hesitate to contact me, either by letting a comment on this post or by email.</p> </div> <a href=posts/2014/05/budgetwarrior-031-git-versioning-easier-creation.html#disqus_thread data-disqus-identifier=cache/posts/2014/05/budgetwarrior-031-git-versioning-and-easier-creation.html>Comments</a> </article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2014/05/changing-root-hard-disk-gentoo-lvm-grub2.html class=u-url>Changing root hard disk on Gentoo with LVM and Grub2</a> <br><small>   Posted: <time class="published dt-published" datetime=2014-05-06T21:39:57+02:00>2014-05-06 21:39</time> </small></h1> <hr> <div class=p-summary> <p>I recently changed my hard disk on one of my servers and I didn't found a simple and up to date tutorial to do that, so I decided to post here how I did it. </p><p>I do not claim that is the best method, or the easiest or the safest method, but that is the one I used and it worked quite well. You could do it online with LVM, but when changing the boot hard disk, I'd rather be safe. Especially because you need to reinstall Grub on the new hard disk and probably alter its configuration. But, doing it online directly with LVM should work. </p><p>My server is using LVM and Grub2. You will need a Gentoo Live CD (or DVD, or USB, or any other Linux live installation with the necessary tools). If you do not use LVM, this guide is not for you. Even if I wrote this guide for Gentoo, this is also gonna work with another system as long as you use LVM and Grub2, just use your distribution live cd. </p><p>Here I will assume /dev/sda is your old disk and /dev/sdb is your new disk. I will also assume that you previous VG was vg0. If it is, you'll have to replace them in the commands. </p><p>1. Obviously, shutdown your computer. </p><p>2. Install the new hard disk in it. </p><p>3. Reboot on the Live CD:</p><ul><li>Activate LVM: vgchange -a y</li><li>Create the LVM partition on the new disk (/dev/sdb) with fdisk. </li><li>Create a new PV: pvcreate /dev/sdb1</li><li>Create a new VG: vgcreate vg1 /dev/sdb1</li><li>Recreate all your LV with lvcreate. In my case, I have /dev/vg0/root and /dev/vg0/data </li></ul><p>Now, you'll need to copy your data. Here is an example with my root: </p><pre class="code literal-block">mkdir old
mkdir new
mount /dev/vg0/root/ old
mount /dev/vg1/root/ new
cp -ax old/* new
umount old
umount new
</pre><p>You have to do that with for LV you have. </p><p>4. Shutdown the computer</p><p>5. Remove the old hard disk and use the connector of the old hard disk to connect the new one. </p><p>6. Reboot on the Live CD: </p><ul><li>Activate LVM: vchange -a y</li><li>Rename the VG: vgrename vg0 </li><li>Chroot in the new hard disk</li><li>Install grub on the hard disk: grub2-install /dev/sda</li><li>Regenerate the Grub config: grub2-mkconfig -o /boot/grub/grub.cfg</li><li>Exit from chroot</li></ul><p>7. Reboot on Gentoo</p><p>8. You now have switched hard disk. </p><p>At any point, if something goes wrong, you still have the previous hard disk completely ready at hand. </p><p>I hope this would useful to some Linux users. </p> </div> <a href=posts/2014/05/changing-root-hard-disk-gentoo-lvm-grub2.html#disqus_thread data-disqus-identifier=cache/posts/2014/05/changing-root-hard-disk-on-gentoo-with-lvm-and-grub2.html>Comments</a> </article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2014/05/ri-vier-rv-2004-rackmount-case-review.html class=u-url>Ri-Vier RV 2004 Rackmount case Review</a> <br><small>   Posted: <time class="published dt-published" datetime=2014-05-04T13:40:31+02:00>2014-05-04 13:40</time> </small></h1> <hr> <div class=p-summary> <p>I ordered a new rackmount case for my third server at home. Previously, I only used Norco cases, but the European distributor of Norco (Ri-vier, Netherlands) decided to switch to using its own cases, the Ri-vier cases. </p><p>Since the shipping fees are very expensive from United States to Switzerland, I decided to stick with Ri-vier for now and try their new cases. </p><p>I ordered and received the RV-2004 case. This is a 2U case with one 5.25" and 4 3.5". It is a very short case. </p><h3>The case</h3><p>Here is a picture of the case: </p><p><img alt="RV-2004 case" src=images/RVS-2004_1_LRG.jpg></p><p>It looks quite good actually and very like the Norco equivalents. </p><p>And here is the front: </p><p><img alt="RV-2004 case front view" src=images/RVS-2004_4_LRG.jpg></p><p>You can put a DVD reader on front. There are also two USB ports and several leds. I really don't like the front panel. There a lot of screws that maintain the front panel. Moreover, the part with the buttons and the LEDs is quite hard to put right and seems of really low facture, I haven't been able to make the LEDs work as of now. The buttons have a kind of plastic cap on them, but it is very hard to make them stay on the buttons when you install the front panel. Finally, there are two fans on the front on their own panel. You can remove the fans, but they are so close together, that most silent fans you will buy won't fit side by side. </p><p>And an inner view: </p><p><img alt="RV-2004 case inner view" src=images/RVS-2004_7_LRG.jpg></p><p>The three hard disk top cases are removable. In my case, I only left one of them for the SSD. The rightmost one is very hard to pull in and out. I don't understand why there are only three removable cases. The fourth disk location cannot be moved. As with all other cases, it it not very practical to install a SSD in it. I ended up screwing the SSD on top of one of the removable bays. </p><p>Without any media drive and only one SSD, there are plenty of space inside the case to put the cables. Even with all the bays used, there would probably be some space left under the drive bays. </p><p>Mouting the motherboard inside the case was really easy, nothing special here. </p><p>This case is only mountable with RVR-20 rails, not with the Norco RL rails. These rails are really worse than the Norco rails. There are extensible, being in three parts, but the extension is not as good as Norco's. If you extend the rails, you have to mount the rails close to the rear of the case. Moreover, the clip on rails to unblock them does not seem to work on my rails. Fortunately, that is not a case I intend to upgrade in the future, so I should not use the rails extensively. </p><h3>Conclusion</h3><h4>Pros</h4><ul><li>Super short</li><li>Cheap</li><li>Enough room on the inside</li><li>Looks quite nice</li></ul><h4>Cons</h4><ul><li>Fans too close to each other</li><li>Front panel very cheaply built</li><li>Front panel hard to put correctly in place</li><li>One of the removable hard drive internal bays is very hard to move</li><li>Very poor rails</li><li>No documentation</li></ul><h4>Conclusion</h4><p>To finish, I would say that I'm kind of disappointed with this case. It really feels worse than the Norco equivalent. I'd rather have Norco cases again. The only advantage it has over the Norco one is being cheaper. I'm probably gonna go for a Norco case again for my next server. </p> </div> <a href=posts/2014/05/ri-vier-rv-2004-rackmount-case-review.html#disqus_thread data-disqus-identifier=cache/posts/2014/05/ri-vier-rv-2004-rackmount-case-review.html>Comments</a> </article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2014/04/install-use-clang-static-analyzer-cmake.html class=u-url>Install and Use CLang Static Analyzer on a CMake project</a> <br><small>   Posted: <time class="published dt-published" datetime=2014-04-09T16:39:11+02:00>2014-04-09 16:39</time> </small></h1> <hr> <div class=p-summary> <p>I recently started a bit of work on my compiler (eddic) again. I started by adapting it to build on CLang with libc++. There was some minor adaptions to make it compile, but nothing really fancy. It now compiles and runs fine on LLVM/Clang 3.4 with the last version of libc++. I'm gonna use some features of C++14 in it and I plan to refactor some parts to make it more <em>STL-correct</em>. I also plan to use only CLang on eddic right now, since C++14 support of GCC is not released right now. </p><p>I decided it was a good time to try again the CLang static analyzer. </p><h3>Installation</h3><p>If, like me, you're using Gentoo, the static analyzer is directly installed with the <em>sys-devel/clang</em> package, unless you disabled the <em>static-analyzer</em> USE flag. </p><p>If your distribution does not ship the static analyzer directly with CLang, you'll have to install it manually. To install it from sources, I advise you to follow the <a href=http://clang-analyzer.llvm.org/installation.html>Official Installations instruction</a>. </p><h3>Usage</h3><p>The usage of CLang static analyzer can be a bit disturbing at first. Most static analysis tools generally takes the sources directly and do their stuff. But that is not how Clang Static Analyzer works. It works as a kind of monitor in top of building the program, using <em>scan-build</em>. When you are analyzing a program, you are also building the program. </p><p>For instance, if you are compiling a source file like that: </p><pre class="code literal-block"><span class=n>clang</span> <span class=p>[</span><span class=n>clang</span><span class=o>-</span><span class=n>options</span><span class=p>]</span> <span class=n>source_file</span><span class=p>.</span><span class=n>cpp</span>
</pre><p>you can perform static analysis like that: </p><pre class="code literal-block"><span class=n>scan</span><span class=o>-</span><span class=n>build</span> <span class=p>[</span><span class=n>scan</span><span class=o>-</span><span class=n>build</span><span class=o>-</span><span class=n>options</span><span class=p>]</span> <span class=n>clang</span> <span class=p>[</span><span class=n>clang</span><span class=o>-</span><span class=n>options</span><span class=p>]</span> <span class=n>source_file</span><span class=p>.</span><span class=n>cpp</span>
</pre><p>scan-build works by replacing calls to the compiler by calls to <em>ccc-analyzer </em>. This works generally well, but there are some cases where that things get a bit more complicated. That is the case of CMake where the paths to the compiler are hardcoded in the generated makefiles. </p><p>For that, you have to run <em>cmake</em> and <em>make</em> with <em>scan-build</em>: </p><pre class="code literal-block"><span class=n>export</span> <span class=n>CCC_CC</span><span class=o>=</span><span class=n>clang</span>
<span class=n>export</span> <span class=n>CCC_CXX</span><span class=o>=</span><span class=n>clang</span><span class=o>++</span>
<span class=n>scan</span><span class=o>-</span><span class=n>build</span> <span class=n>cmake</span> <span class=o>-</span><span class=n>DCMAKE_CXX_COMPILER</span><span class=o>=</span><span class=n>clang</span><span class=o>++</span> <span class=o>-</span><span class=n>DCMAKE_C_COMPILER</span><span class=o>=</span><span class=n>clang</span> <span class=p>.</span>
<span class=n>scan</span><span class=o>-</span><span class=n>build</span> <span class=n>make</span>
</pre><p>This can take a very long time. On eddic, it is about three times slower than a normal compilation. An important point to note about performance, is that you can run compilations in parallel (-j option of make) and that it is supported by scan-build quite well. </p><p>Once analysis is performed, the found bugs are put into an HTML report. By default, the HTML report is created in <em>/tmp/</em>, but you can specificy the folder with -o option of scan-build. </p><p>You can enable or disable checker with the -enable-checker and -disable-checker options of scan-build. </p><h3>Results on eddic</h3><p>Several versions of Clang ago, I tried the static analyzer on eddic, but it failed on several source files without producing any results. Moreover, at this time, I don't think there was any nice HTML report at this time. </p><p>I ran it again on eddic with the last versions. Here is a picture of the generated report: </p><p><img alt="CLang Static Analyzer eddic results" src=images/eddic_results.png></p><p>As you can see, 14 bugs have been found. Unfortunately, none of them is a real bug on my code, but they are not all false positives neither. For instance, here is some unreachable code report: </p><p><img alt="CLang Static Analyzer eddic bug" src=images/eddic_results_bug.png></p><p>It is indeed an unreachable statement, but it is expected, since it is an assert to ensure that the code is unreachable. But that proves that the analysis works ;) </p><p>Even if it didn't found anything, this time it worked much better than the last time I checked and the HTML results are just really good. </p><p>I hope you found this article interesting. If you happen to have interesting results on your codebase with the CLang static analyzer, I'd be glad to hear about them ;)</p> </div> <a href=posts/2014/04/install-use-clang-static-analyzer-cmake.html#disqus_thread data-disqus-identifier=cache/posts/2014/04/testing-clang-static-analyzer.html>Comments</a> </article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2014/04/related-posts-nikola-website.html class=u-url>Related posts on a Nikola website</a> <br><small>   Posted: <time class="published dt-published" datetime=2014-04-05T16:16:45+02:00>2014-04-05 16:16</time> </small></h1> <hr> <div class=p-summary> <p>The one thing I missed in Nikola was the lack of <strong>Related Posts generation</strong>. I solved this during <a href=http://baptiste-wicht.com/posts/2014/03/migrated-from-wordpress-to-nikola.html>the migration from WordPress to Nikola</a>, by using simple algorithms to generate related posts for each blog post and then display them in the form of a simple widget. </p><p>For example, you can see the related posts of this post on the left, just under my Google+ badge. </p><p>Here is the workflow that is used: * A simple C++ tool generate a list of related posts in HTML for each posts * The generated HTML code is included in the MAKO template using Python</p><p>In this article, I'll show how the related posts are generated and how to include them in your template.</p><h2>Related Post Generation</h2><p>It is important to note that it is necessary to cleanup the content of the files before using it: * First, it is necessary to remove all HTML that may be present in the Markdown files. I remove only the HTML tags, not their content. For instance, in <em>&lt;strong&gt;test&lt;/strong&gt;</em>, test would be counted, but not strong. The only exception to that, is that the content of preformatted parts (typically some or console output) is completely removed. * It is also necessary to cleanup Markdown, for instance, parentheses and square brackets are removed, but not their content. Same goes for Markdown syntax for bold, italics, ... * Finally, I also remove punctuation. </p><p>My related posts algorithm is very simple. </p><p>First, I compute the Term Frequency (TF) of each word in each post. The number of times a word is present in a document is represented by <em>tf(w,d)</em>. I decided to give a bigger importance to words in the title and the tags, but that is just a matter of choice. </p><p>After that, I compute the Inverse Document Frequency (IDF) of each word. This measure allows to filter words like: a, the, and, has, is, ... These words are not really representative of the content of a blog post. The formula for idf is very simple: <em>idf(w) = log(N / (1+ n(w)))</em>. <em>n(w)</em> is the number of posts where the word is present. It is a measure of rarity of a word on the complete posts set. </p><p>Once we have the two values, we can easily compute the TF-IDF vectors of each blog post. The TF-IDF for a word is simply: <em>tf_idf(w,d) = tf(w, d) * idf(w)</em>. </p><p>Finally, we can derive the matrix of Cosine similarities between the TF-IDF vectors. The idea of the algorithm is simple: each document is represented by a vector and then the distance between two vectors indicates how related two posts are. The formula for the Cosine similarity is also simple: <em>cs(d1, d2) = dot(d1, d2) / ||d1|| * || d2||</em>. <em>d1</em> and <em>d2</em> are two TF-IDF vectors. Once the cosine similarities between each document is computed, we can just take the N most related documents as the "Related Posts" for each blog post. </p><p>With this list, the C++ program simply generates an HTML file that will be included in each post by Nikola template. This process is <strong>very fast</strong>. I have around 200 posts on this blog and the generation takes about 1 second. </p><h2>Include in template</h2><p>Once the HTML files are generate, they are included into the website by altering the template and adding their content directly into the web page. Here is the code I use in <em>base.tmpl</em>.</p><pre class="code literal-block"><span class=cp>%</span><span class=k>if</span> <span class=n>post</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>post</span><span class=o>.</span><span class=n>source_link</span><span class=p>()</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s>'/stories/'</span><span class=p>):</span><span class=x></span>
<span class=x>    &lt;div class="left-sidebar-widget"&gt;</span>
<span class=x>        &lt;h3&gt;Related posts&lt;/h3&gt;</span>
<span class=x>        &lt;div class="left-sidebar-widget-content"&gt;</span>
<span class=x>            </span><span class=cp>&lt;%</span>
                <span class=kn>import</span> <span class=nn>os</span>
                <span class=n>related_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>()</span>
                <span class=n>related_path</span> <span class=o>=</span> <span class=n>related_dir</span> <span class=o>+</span> <span class=n>post</span><span class=o>.</span><span class=n>source_link</span><span class=p>()</span> <span class=o>+</span> <span class=s>".related.html"</span>

                <span class=k>try</span><span class=p>:</span>
                    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>related_path</span><span class=p>,</span> <span class=s>'r'</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
                        <span class=n>related_text</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
                        <span class=n>f</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
                <span class=k>except</span> <span class=ne>IOError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
                    <span class=n>related_text</span> <span class=o>=</span> <span class=s>"Not generated"</span>
            <span class=cp>%&gt;</span><span class=x></span>
<span class=x>            </span><span class=cp>${</span><span class=n>related_text</span><span class=cp>}</span><span class=x></span>
<span class=x>        &lt;/div&gt;</span>
<span class=x>    &lt;/div&gt;</span>
<span class=cp>%</span><span class=k>endif</span><span class=x></span>
</pre><p>You could also display it in <em>post.tmpl</em> as a simple list. </p><p>There is a limitation with this code: it only works if the source file has the same name than the slug, otherwise the file is not found. If someone has a solution to get the path to the source file and not the slug version, I'd be glad to have it ;)</p><h2>Conclusion</h2><p>The code for the generator is available on the <a href=https://github.com/wichtounet/wichtounet.github.io/tree/master/src/related>Github repository of my website</a>. </p><p>I wrote it in C++ because I don't like Python a lot and because I'm not good at it and it would have taken me a lot more time to include it in Nikola. If I have time and I'm motivated enough, I'll try to integrate that in Nikola. </p><p>I hope that could be useful for some people. </p> </div> <a href=posts/2014/04/related-posts-nikola-website.html#disqus_thread data-disqus-identifier=cache/posts/2014/04/related-posts-nikola-website.html>Comments</a> </article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2014/03/migrated-from-wordpress-to-nikola.html class=u-url>Migrated from Wordpress to Nikola</a> <br><small>   Posted: <time class="published dt-published" datetime=2014-03-23T22:23:21+01:00>2014-03-23 22:23</time> </small></h1> <hr> <div class=p-summary> <p>As you're reading this post, the site has been migrated from WordPress to <a href=http://www.getnikola.com/>Nikola</a> and is now hosted on Github. Nikola is a static site generator. </p><h3>Reasons of the migration</h3><p>I had several reasons to migrate my website from WordPress to a static site generator: </p><ol><li>I was getting tired of WordPress. It not a bad tool, but it is becoming heavier and heavier. I think that one of the biggest problems is that you need tons of plugins to make a fully-functional blog. I had more than 20 plugins. And each time you upgrade WordPress, you run into problems with the addons. In my opinion, while I understand why you need plugins for syntax highlighting for instance, you should not need any plugin for performances or security. Moreover, when you think of it a blog is not dynamic, I write less than a post a week and most bloggers write about once a day, in the computer science's sense, it is not dynamic at all. So why bother with a database ?</li><li>I wanted to use my favourite tools for modifying my blog: the shell and vim. I don't think that wysiwyg editors are really adding any value to editing. I am faster writing posts in vim than I'm in a web editor. </li><li>I wanted to be able to edit my website offline. With a static generator, as long as you have the files on your computer, you can edit your site and even browse it offline. You can then deploy it on the internet later when you are online. </li><li>I wanted to host my blog at Github Pages, for fun! Moreover, I had some uptime issues with my host with quite some downtime in the last months. And it saves me some bucks each year, at least it was not a strong factor. </li></ol><h3>The quest for a good static blog generator</h3><p>It has been several months already since I started thinking about migrating my blog. I had quite a hard time to find a suitable blog generator. </p><p>I needed something: </p><ul><li>Simple</li><li>Completely usable in command line</li><li>With a WordPress import feature</li><li>Fast: I didn't wanted to spend a long time generating the website. </li><li>Actively developed</li></ul><p>The problem is that there are tens of static site generator. I considered several of them. The most well known is Jekyll. It really looks fine, but I have to say that I HATE Ruby. I think it is an horrible language with an even more horrible environment. I cannot even have Ruby installed on my computer. So I didn't spend a long time considering Jekyll. I also considered Hyde, which is the evil brother of Jekyll, but I think that it was missing documentation to be completely usable for me. I also though of Pelican, but I was not convinced with it. </p><p>I don't know how, but at first I didn't found about Nikola. It was only after some time that I came across Nikola by pure luck. Once I came accross Nikola, I directly was convinced by it. Nikola is written in Python and has a large set of features but still keeps the whole think very simple. Generation of the website is pretty fast. Even though I don't like Python very much, I'm able to stand its environment and if necessary I can hack around a bit. I also considered Hyde, which is the evil brother of Jekyll, but I think that it was missing documentation to be completely usable for me. I also though of Pelican, but I was not convinced with it. </p><p>I don't know how, but at first I didn't found about Nikola. It was only after some time that I came across Nikola by pure luck. Once I found about Nikola, I directly was convinced by it. Nikola is written in Python and has a large set of features but still keeps the whole think very simple. Generation of the website is pretty fast. Even though I don't like Python very much, I'm able to stand its environment and if necessary I can hack around a bit. So I decided to try the complete migration. </p><h3>The migration</h3><p>Once I decided to migrate to Nikola, I directly started by importing my WordPress site into a Git repository. This process is quite simple, you just have to export and XML dump from WordPress and then import it into Nikola with the *import_wordpress" command. This already downloads the necessary images and resources and create posts and pages corresponding to your site. It also generates some redirections from the old URL scheme to the new one. </p><p>However, there is still some manual work to be done. Here is what I had to do after I imported my WordPress site into Nikola: </p><ul><li>As syntax highlighting was done by a plugin, I had to convert it to Markdown myself. This was quite easy, just a matter of <em>sed</em>.</li><li>I was not satisfied with the default templates so I enhanced it myself. As I'm a very poor web developer and even poorer web designer, it took me a long time, even if it is a simple one. </li><li>I wanted to add some visibility to the comments, so I used Disqus API to create Most Popular and Recent Comments widgets. </li><li>I had to create some redirections by myself for the tags and categories. This was again just a matter of simple shell commands. I filled a bug about it so it'll probably be fixed in the near future.</li><li>I tried to improve the performances of the generated website, but I'm still gonna work on this later, the calls to Disqus and Google javascripts are the ones that takes the most of the load time. I think that a static site could be even faster. </li><li>Finally, I really missed the options to have related posts generated for each posts, so I hacked a simple way to include them for each posts. The related posts are generated using a very simple algorithm. I'll soon write a post about how I have done this. </li></ul><p>Except from these things, it hasn't been too hard to migrate to Nikola. </p><h3>Conclusion</h3><p>Until now I'm really satisfied with Nikola and I hope this will motivate me to write more blog posts in the coming months. I hope you'll find the website as enjoyable as before (or even more :) ). </p><p>If you are interested, you can read the <a href=posts/2014/03/migrated-from-wordpress-to-nikola.wp>source of this blog post</a>. </p><p>Even though I tried my best to avoid 404 or problems with the new site, I'm pretty sure there will be some issues in the following weeks. If you happen to found a dead link or some part of the website is not working for you, don't hesitate to comment this post and I'll my best to fix it. If you have suggestions on how to improve the site or have a question about the process of migrating a website from Wordpress to Nikola, I'd be glad to answer you. </p> </div> <a href=posts/2014/03/migrated-from-wordpress-to-nikola.html#disqus_thread data-disqus-identifier=cache/posts/2014/03/migrated-from-wordpress-to-nikola.html>Comments</a> </article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2014/02/budgetwarrior-0-3-0-objective-wish-management.html class=u-url>budgetwarrior 0.3.0 - Objective and wish management</a> <br><small>   Posted: <time class="published dt-published" datetime=2014-02-03T09:21:29+01:00>2014-02-03 09:21</time> </small></h1> <hr> <div class=p-summary> <p>I'm pleased to announce the release of another budgetwarrior release, the version 0.3.0.</p><h3>Changes</h3><p>This version contains several important changes.</p><p>The first one is the addition of a new module to manage objectives. You can add objective with <em>budget objective add). </em>For instance, you can add an objective saying you want to save 10000$ a year or 200$ a month. When you set your objectives, budget warrior computes how well you complete them. For instance, here is the status of my objectives:</p><p><a href=wp-content/uploads/2014/02/Screenshot-from-2014-02-02-113057-e1391337197470.png><img alt="Objective Status" src=wp-content/uploads/2014/02/Screenshot-from-2014-02-02-113057-e1391337197470-300x83.png title="Objective Status"></a></p><p>Another module has been added to manage wishes. You can add wishes to budgetwarrior (<em>budget wish add</em>) and then budgetwarrior will tell you if it is a good time to buy them. Here is an example of wish status:</p><p><a href=http://www.baptiste-wicht.com/wp-content/uploads/2014/02/Screenshot-from-2014-02-02-113814.png><img class="size-medium wp-image-2665" alt="Wish Status" src=wp-content/uploads/2014/02/Screenshot-from-2014-02-02-113814-e1391337576857-300x96.png width=300 height=96></a> Wish Status</p><p>The diagnostics tells you where the money will be taken: On savings, on year savings or on month savings (ideal case). It also checks the objectives to see if the payment doesn't break the fulfillment of some of them.</p><p>For complete diagnostics, it is necessary to you register your fortune (<em>budget fortune check</em>), ideally once a month.</p><p>Of course, this is only a tool, you should not only use that to decide when to buy something, but it may have a good point of view ;)</p><p>Moreover, the version also have other smaller changes:</p><ol><li>When you make an error when creating a new item (expense, earning, ...), the tool now lets you retry without losing what you typed before.</li><li>Confirmation messages are now shown after each modification command (delete, add and edit).</li><li>The license has been changed from Boost to MIT. The sense is almost the same, but the MIT is more well known and I thought it would be easier for people to know what this means.</li><li>There have several changes to the code base, but that doesn't impact the usage of the tool.</li></ol><h3>Conclusion</h3><p>I hope you'll found these changes interesting :)</p><p>If you are interested by the tool, you can download it on Github: <a title="budgetwarrior repository" href=https://github.com/wichtounet/budgetwarrior>budgetwarrior</a></p><ul><li>There is now Gentoo and Arch Linux installation packages available for ease of installation</li></ul><p>If you have a suggestion or you found a bug, please post an issue on the github project: <a title=https://github.com/wichtounet/budgetwarrior href=https://github.com/wichtounet/budgetwarrior>https://github.com/wichtounet/budgetwarrior</a>.</p><p>If you have any comment, don't hesitate to contact me, either by letting a comment on this post or by email.</p> </div> <a href=posts/2014/02/budgetwarrior-0-3-0-objective-wish-management.html#disqus_thread data-disqus-identifier=cache/posts/2014/02/budgetwarrior-0-3-0-objective-wish-management.html>Comments</a> </article> <nav class=postindexpager> <ul class=pager> <li class=previous> <a href=index-26.html rel=prev>Newer posts</a> </li> <li class=next> <a href=index-24.html rel=next>Older posts</a> </li> </ul> </nav> <script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script> </div> </div> </div></div><footer> Contents © 2014 <a href=mailto:baptistewicht@gmail.com>Baptiste Wicht</a> - Powered by <a href=http://getnikola.com rel=nofollow>Nikola</a><a rel=license href=http://creativecommons.org/licenses/by/4.0/><img alt="Creative Commons License" style=padding-left:5px;border-width:0 src=assets/img/cc.png></a> <ul class=footer_inline_ul> </ul></footer> <script src=assets/js/all-nocdn.js></script> <script type=text/javascript>
      $(document).ready(function() {
        jQuery.getJSON('/assets/js/tag_cloud_data.json', function(data) {
            var items = [];

            $.each(data, function(key, val) {
                items.push('<li><a href="' + val[1] +'" '+'data-weight="'+val[0]+'"'+'>' + key + '</a></li>');
            });

            $('<div/>', {
                'id': 'tags',
                html: '<ul>' + items.join('') + '</ul>'
            }).appendTo('body');

            if(!$('#tags_canvas').tagcanvas({
                textColour: '#FFFFFF',
                outlineColour: '#ff00ff',
                reverse: true,
                depth: 0.8,
                maxSpeed: 0.05,
                weight: true,
                weightFrom: "data-weight",
                weightSizeMin: 8,
                weightSizeMax: 24
            },'tags')) {
                //something went wrong, hide the canvas container
                $('#tags_container').hide();
            }});
        });
    </script><script type=text/javascript src=https://apis.google.com/js/platform.js></script></body></html>