<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>zapcc C++ compilation speed against gcc 5.4 and clang 3.9 | Blog blog("Baptiste Wicht");</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../rss.xml">
<link rel="canonical" href="https://baptiste-wicht.com/posts/2016/12/zapcc-cpp-compilation-speed-against-gcc-54-and-clang-39.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Baptiste Wicht">
<link rel="prev" href="../11/new-design-faster-and-mobile-compatible.html" title="New design: Faster and mobile compatible" type="text/html">
<link rel="next" href="cpp-compiler-benchmark-on-expression-templates-library-etl.html" title="C++ Compiler benchmark on Expression Templates Library (ETL)" type="text/html">
<meta property="og:site_name" content='Blog blog("Baptiste Wicht");'>
<meta property="og:title" content="zapcc C++ compilation speed against gcc 5.4 and clang 3.9">
<meta property="og:url" content="https://baptiste-wicht.com/posts/2016/12/zapcc-cpp-compilation-speed-against-gcc-54-and-clang-39.html">
<meta property="og:description" content="A week ago, I compared the compilation time performance of zapcc against gcc-4.9.3 and clang-3.7. On debug builds, zapcc was about 2 times faster than gcc and 3 times faster than clang. In this post, ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2016-12-05T18:46:09+01:00">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="clang">
<meta property="article:tag" content="Compilers">
<meta property="article:tag" content="etl">
<meta property="article:tag" content="gcc">
<meta property="article:tag" content="meta">
<meta property="article:tag" content="projects">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://baptiste-wicht.com/">

                <span id="blog-title">Blog blog("Baptiste Wicht");</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../../stories/about.html">About</a>
                </li>
<li>
<a href="../../../stories/publications.html">Publications</a>
                </li>
<li>
<a href="../../../stories/projects.html">Projects</a>
                </li>
<li>
<a href="../../../categories/index.html">Tags</a>
                </li>
<li>
<a href="../../../archive.html">Archives</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="zapcc-cpp-compilation-speed-against-gcc-54-and-clang-39.rst" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">zapcc C++ compilation speed against gcc 5.4 and clang 3.9</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Baptiste Wicht
            </span></p>
            <p class="dateline">
            <a href="#" rel="bookmark">
            <time class="published dt-published" datetime="2016-12-05T18:46:09+01:00" itemprop="datePublished" title="2016-12-05 18:46">2016-12-05 18:46</time></a>
            </p>
                <p class="commentline">
    
    <a href="zapcc-cpp-compilation-speed-against-gcc-54-and-clang-39.html#disqus_thread" data-disqus-identifier="cache/posts/2016/12/zapcc-cpp-compilation-speed-against-gcc-54-and-clang-39.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="zapcc-cpp-compilation-speed-against-gcc-54-and-clang-39.rst" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>A week ago, I compared the <a class="reference external" href="http://baptiste-wicht.com/posts/2016/11/zapcc-a-faster-cpp-compiler.html">compilation time performance of zapcc against gcc-4.9.3 and clang-3.7</a>. On debug builds, zapcc was about 2 times faster than gcc and 3 times faster than clang. In this post, I'm going to try some more recent compilers, namely gcc 5.4 and clang 3.9 on the same project. If you want more information on zapcc, read the previous posts, this post will concentrate on results.</p>
<p>Again, I use my Expression Template Library
(<a class="reference external" href="https://github.com/wichtounet/etl/">ETL</a>). This is a purely header-only
library with lots of templates. I'm going to compile the full test cases.</p>
<p>The results of the two articles are not directly comparable, since they were
obtained on two different computers. The one on which the present results are
done has a less powerful and only 16Go of RAM compared to the 32Go of RAM of my
build machine. Also take into account that that the present results were
obtained on a Desktop machine, there can be some perturbations from background
tasks.</p>
<p>Just like on the previous results, it does not help using more threads than
physical cores, therefore, the results were only computed on up to 4 cores on
this machine.</p>
<p>The link time is not taken into account on the results.</p>
<section id="debug-build"><h2>Debug build</h2>
<p>Let's start with the result of the debug build.</p>
<table>
<thead><tr>
<th class="head"><p>Compiler</p></th>
<th class="head"><p>-j1</p></th>
<th class="head"><p>-j2</p></th>
<th class="head"><p>-j4</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>g++-5.4.0</p></td>
<td><p>469s</p></td>
<td><p>230s</p></td>
<td><p>130s</p></td>
</tr>
<tr>
<td><p>clang++-3.9</p></td>
<td><p>710s</p></td>
<td><p>371s</p></td>
<td><p>218s</p></td>
</tr>
<tr>
<td><p>zapcc++</p></td>
<td><p>214s</p></td>
<td><p>112s</p></td>
<td><p>66s</p></td>
</tr>
<tr>
<td><p>Speedup VS Clang</p></td>
<td><p>3.31</p></td>
<td><p>3.31</p></td>
<td><p>3.3</p></td>
</tr>
<tr>
<td><p>Speedup VS GCC</p></td>
<td><p>2.19</p></td>
<td><p>2.05</p></td>
<td><p>1.96</p></td>
</tr>
</tbody>
</table>
<p>The results are almost the same as the previous test. zapcc is 3.3 times faster
to compile than Clang and around 2 times faster than GCC. It seems that GCC 5.4
is a bit faster than GCC 4.9.3 while clang 3.9 is a bit slower than clang 3.7,
but nothing terribly significant.</p>
<p>Overall, for debug builds, zapcc can bring a very significant improvement to
your compile times.</p>
</section><section id="release-build"><h2>Release build</h2>
<p>Let's see what is the status of Release builds. Since the results are comparable
between the numbers of threads, the results here are just for one thread.</p>
<p>This is more time consuming since a lot of optimizations are enabled and more
features from ETL are enabled as well.</p>
<table>
<thead><tr>
<th class="head"><p>Compiler</p></th>
<th class="head"><p>-j1</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>g++-5.4.0</p></td>
<td><p>782s</p></td>
</tr>
<tr>
<td><p>clang++-3.9</p></td>
<td><p>960s</p></td>
</tr>
<tr>
<td><p>zapcc++</p></td>
<td><p>640s</p></td>
</tr>
<tr>
<td><p>Speedup VS Clang</p></td>
<td><p>1.5</p></td>
</tr>
<tr>
<td><p>Speedup VS GCC</p></td>
<td><p>1.22</p></td>
</tr>
</tbody>
</table>
<p>On a release build, the speedups are much less interesting. Nevertheless, they
are still significant. zapcc is still 1.2 times faster than gcc and 1.5 times
faster than clang. Then speedup against clang 3.9 is significantly higher than
it was on my experiment with clang 3.7, it's possible that clang 3.9 is slower
or simply has new optimization passes.</p>
</section><section id="conclusion"><h2>Conclusion</h2>
<p>The previous conclusion still holds with modern version of compilers: zapcc is
much faster than other compilers on Debug builds of template heavy code. More
than 3 times faster than clang-3.9 and about 2 times faster than gcc-5.4. Since
it's based on clang, there should not be any issue compiling projects that
already compile with a recent clang. Even though the speedups are less
interesting on a release build, it is still significantly, especially compared
against clang.</p>
<p>I'm really interested in finding out what will be the pricing for zapcc once
out of the beta or if they will be able to get even faster!</p>
<p>For the comparison with gcc 4.9.3 and clang 3.7, you can have a look at
<a class="reference external" href="http://baptiste-wicht.com/posts/2016/11/zapcc-a-faster-cpp-compiler.html">this article</a>.</p>
<p>If you want more information about zapcc, you can go to the
<a class="reference external" href="https://www.zapcc.com/">official website of zapcc</a></p>
</section><h3>Related articles</h3>
    

    <li><a href="../11/zapcc-a-faster-cpp-compiler.html">zapcc - a faster C++ compiler</a></li>
<li><a href="../../2017/03/release-zapcc-10-fast-cpp-compiler.html">Release of zapcc 1.0 - Fast C++ compiler</a></li>
<li><a href="../../2017/08/compiler-benchmark-gcc-clang-cpp-library-etl.html">Compiler benchmark GCC and Clang on C++ library (ETL)</a></li>
<li><a href="../../2017/03/partial-type-erasing-deep-learning-library-dll-improve-compilation-time.html">Partial type erasing in Deep Learning Library (DLL) to improve compilation time</a></li>
<li><a href="../../2018/02/decrease-dll-neural-network-compilation-time-with-c++17.html">Decrease DLL neural network compilation time with C++17</a></li>
<li><a href="../../2017/03/disappointing-zapcc-performance-on-deep-learning-library-dll.html">Disappointing zapcc performance on Deep Learning Library (DLL)</a></li>


    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/c%2B%2B.html" rel="tag">C++</a></li>
            <li><a class="tag p-category" href="../../../categories/clang.html" rel="tag">clang</a></li>
            <li><a class="tag p-category" href="../../../categories/compilers.html" rel="tag">Compilers</a></li>
            <li><a class="tag p-category" href="../../../categories/etl.html" rel="tag">etl</a></li>
            <li><a class="tag p-category" href="../../../categories/gcc.html" rel="tag">gcc</a></li>
            <li><a class="tag p-category" href="../../../categories/meta.html" rel="tag">meta</a></li>
            <li><a class="tag p-category" href="../../../categories/projects.html" rel="tag">projects</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../11/new-design-faster-and-mobile-compatible.html" rel="prev" title="New design: Faster and mobile compatible">Previous post</a>
            </li>
            <li class="next">
                <a href="cpp-compiler-benchmark-on-expression-templates-library-etl.html" rel="next" title="C++ Compiler benchmark on Expression Templates Library (ETL)">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
    
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="https://baptiste-wicht.com/posts/2016/12/zapcc-cpp-compilation-speed-against-gcc-54-and-clang-39.html",
        disqus_title="zapcc C++ compilation speed against gcc 5.4 and clang 3.9",
        disqus_identifier="cache/posts/2016/12/zapcc-cpp-compilation-speed-against-gcc-54-and-clang-39.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         <a href="mailto:baptistewicht@gmail.com">Baptiste Wicht</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         - License: 
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="../../../assets/img/cc.png"></a>
            
        </footer>
</div>
</div>


            <script src="../../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
