<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang=en> <head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>A Mutt journey: Search mails with notmuch | @Blog("Baptiste Wicht")</title><link href=../../../assets/css/all-nocdn.css rel=stylesheet type=text/css><link rel=alternate type=application/rss+xml title=RSS href=../../../rss.xml><link rel=canonical href=http://baptiste-wicht.com/posts/2014/08/a-mutt-journey-search-mails-with-notmuch.html><script type=text/javascript>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2175227-7']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script><meta name=author content="Baptiste Wicht"><meta name=og:title content="A Mutt journey: Search mails with notmuch"><meta name=og:url content=http://baptiste-wicht.com/posts/2014/08/a-mutt-journey-search-mails-with-notmuch.html><meta name=og:description content="In the previous installment in the Mutt series, I've talked about my Mutt
configuration.
In this post, I'll talk about notmuch and how to use it to search through mails.
By default, you can search mai"><meta name=og:site_name content=@Blog( baptiste wicht><meta name=og:type content=article><link href=../../../favicon.ico rel=icon type=image/x-icon></head><body><div class=social_container> <div class=social_container_gplus> <a target=_blank title="Share on Google+" href="https://plusone.google.com/_/+1/confirm?hl=en&amp;url=http://baptiste-wicht.com/posts/2014/08/a-mutt-journey-search-mails-with-notmuch.html"><img src=../../../assets/img/google_plus.png></a> </div> <div class=social_container_facebook> <a target=_blank title="Share on Facebook" href="http://www.facebook.com/sharer/sharer.php?u=#url"><img src=../../../assets/img/facebook.png></a> </div> <div class=social_container_twitter> <a target=_blank title="Tweet on Twitter" href="http://twitter.com/home?status=#url"><img src=../../../assets/img/twitter.svg></a> </div></div><nav class="navbar navbar-inverse navbar-fixed-top" role=navigation> <div class=container-fluid> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-ex1-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=http://baptiste-wicht.com/> <span id=blog-title>@Blog("Baptiste Wicht")</span> </a> </div> <div class="collapse navbar-collapse navbar-ex1-collapse"> <ul class="nav navbar-nav"> <li><a href=../../../stories/about.html>About</a> </li><li><a href=../../../stories/publications.html>Publications</a> </li><li><a href=../../../stories/donate.html>Donate</a> </li><li><a href=../../../stories/contact.html>Contact</a> </li><li><a href=../../../stories/faq.html>FAQ</a> </li><li><a href=../../../stories/legal.html>Legal</a> </li><li><a href=../../../categories/index.html>Tags</a> </li><li><a href=../../../archive.html>Archives</a> </li><li><a href=http://feeds.feedburner.com/BaptisteWicht>RSS</a> </li></ul> <span class="navbar-form pull-left"> <form action=../../../stories/search.html> <input type=text name=q id=tipue_search_input> </form> </span> <ul class="nav navbar-nav navbar-right"> <li> <a target=_blank title="Follow @wichtounet on Twitter" href=https://twitter.com/wichtounet> <img src=../../../assets/img/twitter.svg alt="Follow @wichtounet on Twitter"> </a> </li> <li> <a target=_blank title="Follow +BaptisteWicht on Google+" href=https://plus.google.com/+BaptisteWicht> <img src=../../../assets/img/google_plus.svg alt="Follow +BaptisteWicht on Google+"> </a> </li> </ul> </div> </div></nav><div class=body-container> <div class=left-sidebar> <div class=left-sidebar-widget> <div class=left-sidebar-widget-content> <div class=g-person data-width=275 data-href=//plus.google.com/u/0/103113673902796202116 data-theme=dark data-layout=landscape data-rel=author></div> </div> </div> <div class=left-sidebar-widget> <h3>Related posts</h3> <div class=left-sidebar-widget-content> <ol><li><a href=../07/a-mutt-journey-filter-mails-with-imapfilter.html>A Mutt Journey: Filter mails with imapfilter</a></li><li><a href=../07/a-mutt-journey-download-mails-with-offlineimap.html>A Mutt Journey: Download mails with offlineimap</a></li><li><a href=../07/a-mutt-journey-my-mutt-configuration.html>A Mutt journey: Mutt configuration</a></li><li><a href=../../2010/04/drag-and-drop-files-to-gmail.html>Drag and drop files to Gmail</a></li><li><a href=../07/catch-powerful-yet-simple-cpp-test-framework.html>Catch: A powerful yet simple C++ test framework</a></li></ol> </div> </div> <div class=left-sidebar-widget> <h3>Recent comments</h3> <div class=left-sidebar-widget-content> <div id=recentcomments class=dsq-widget> <script type=text/javascript src="http://blogwichtounet.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=28&amp;excerpt_length=50"></script> </div> </div> </div> <div class=left-sidebar-widget> <h3>Blogroll</h3> <div class=left-sidebar-widget-content> <ul> <li><a target=_blank href=http://www.asjava.com/>AsJava.com : Java Tutorial</a></li> <li><a target=_blank href=http://www.mkyong.com/>Mkyong : Java Tutorials</a></li> </ul> </div> </div> </div> <div class=container> <div class=body-content> <div class=row><article class="post-text h-entry hentry postpage" itemscope=itemscope itemtype=http://schema.org/Article> <header> <h1 class="p-name entry-title" itemprop="headline name"><a href=# class=u-url>A Mutt journey: Search mails with notmuch</a></h1> <div class=metadata> <p class="byline author vcard"><span class="byline-name fn">Baptiste Wicht</span></p> <p class=dateline><a href=# rel=bookmark><time class="published dt-published" datetime=2014-08-02T17:24:12+02:00 itemprop=datePublished title="Publication date">2014-08-02 17:24</time></a></p> <p class=commentline> <a href=a-mutt-journey-search-mails-with-notmuch.html#disqus_thread data-disqus-identifier=cache/posts/2014/08/a-mutt-journey-search-mails-with-notmuch.html>Comments</a> </p><p class=sourceline><a href=a-mutt-journey-search-mails-with-notmuch.rst id=sourcelink>Source</a></p> </div> </header> <div class="e-content entry-content" itemprop="articleBody text"> <p>In the previous installment in the Mutt series, <a class="reference external" href=http://baptiste-wicht.com/posts/2014/07/a-mutt-journey-my-mutt-configuration.html>I've talked about my Mutt configuration</a>. In this post, I'll talk about notmuch and how to use it to search through mails.</p><p>By default, you can search mails in Mutt by using the / key. By doing that, you can only search in the current folder. This is very fast, but this is not always what you want. When you don't know in which folder the mail you are looking for is, you don't want to test each folder. By default, there are no feature to achieve global searching in Mutt.</p><p>That is where notmuch comes to the rescue. notmuch is a very simple tool that allows you to search through your mail. As its name indicates, it does not do much. It doesn't download your mails, you have to have them locally, which is perfect <a class="reference external" href=http://baptiste-wicht.com/posts/2014/07/a-mutt-journey-download-mails-with-offlineimap.html>if you use offlineimap</a>. It does not provide a user interface, but you can query it from the command line and it can be used from other tools. It should be available in most of the distributions.</p><div class=section id=configuration><h2>Configuration</h2><p>The configuration of notmuch is fairly simple. You can write your <code>.notmuch-config</code> directly or run <code>notmuch setup</code> that will interactively help you to fill the configuration.</p><p>Here is my configuration:</p><pre class="code literal-block">
[database]
path=/data/oi/Gmail/

[user]
name=Baptiste Wicht
primary_email=baptiste.wicht@gmail.com

[new]
tags=inbox
ignore=

[search]
exclude_tags=deleted;

[maildir]
synchronize_flags=true
</pre><p>It needs of cours the place where your mails are stored. Then, some information about you. The next section is to specify which tags you want to add to new mails. Here, I specified that each new mail must be tagged with <cite>inbox</cite>. You can add several tags to new mails. In the <cite>[search]</cite> section, the excluded tags are specified.</p></div><div class=section id=usage><h2>Usage</h2><p>Once you have configured notmuch, you can run <cite>notmuch new</cite> to process all existing mails. The first run may take some time (in minutes, it is still quite fast), but the subsequent runs will be very fast. You should run notmuch after each offlineimap run. I personally run it in a shell script that is run by cron. You could also use one of the hooks of offlineimap to run notmuch.</p><p>Once indexing has been done, you can start searching your mails. The first option to search mail is simply to use <cite>notmuch search &lt;query&gt;</cite> from the command line. This will directly displays the results. Search is instant on my mails.</p><p>If you use mutt-kz like me, notmuch support is directly integrated. You can type X, and then type your query like <code>notmuch://?query=X</code> and the results will be displayed as a normal Mutt folder. You can open mails directly from here and you can also edit the mails as if you were in their source folders. This is really practical.</p><p>If you use mutt, you can have the same experience, by using the <cite>notmuch-mutt</cite>patch (<cite>here &lt;http://notmuchmail.org/notmuch-mutt/&gt;</cite>). In several distributions, there is an option to build it with this support or another package to add the feature.</p><p>Another feature of notmuch is its ability to tag mails. It automatically tags new mails and deleted mails. But you can also explicitely tag messages by using <code>notmuch tag</code>. For instance, to tag all messages from the notmuch mailing list:</p><pre class="code literal-block">
notmuch tag +notmuch -- tag:new and to:notmuch@notmuchmail.org
</pre><p>I personally don't use this feature since I use imapfilter and IMAP folders to sort my mail, but it can be very useful. You can run these commands in the cronjob and always have you tags up to date. Tags can then be used in notmuch to search or to create virtual folder in Mutt.</p></div><div class=section id=conclusion><h2>Conclusion</h2><p>That is already more or less everything that there is to know about notmuch. It does not do a lot of thing, but it does them really well.</p><p>That concludes the series of posts on Mutt. If you have any question on my Mutt configuration, I'd be glad to extend on the comments.</p></div> </div> <aside class=postpromonav> <nav> <ul itemprop=keywords class=tags> <li><a class="tag p-category" href=../../../categories/gentoo.html rel=tag>Gentoo</a></li> <li><a class="tag p-category" href=../../../categories/gmail.html rel=tag>Gmail</a></li> <li><a class="tag p-category" href=../../../categories/linux.html rel=tag>Linux</a></li> <li><a class="tag p-category" href=../../../categories/mutt.html rel=tag>Mutt</a></li> </ul> <ul class=pager> <li class=previous> <a href=../07/catch-powerful-yet-simple-cpp-test-framework.html rel=prev title="Catch: A powerful yet simple C++ test framework">Previous post</a> </li> <li class=next> <a href=../09/short-introduction-to-deep-learning.html rel=next title="Short introduction to deep learning">Next post</a> </li> </ul> </nav> </aside> <section class=comments> <h2>Comments</h2> <div id=disqus_thread></div> <script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://baptiste-wicht.com/posts/2014/08/a-mutt-journey-search-mails-with-notmuch.html",
        disqus_title="A Mutt journey: Search mails with notmuch",
        disqus_identifier="cache/posts/2014/08/a-mutt-journey-search-mails-with-notmuch.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script> <noscript>Please enable JavaScript to view the <a href=//disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript> <a href=//disqus.com class=dsq-brlink rel=nofollow>Comments powered by <span class=logo-disqus>Disqus</span></a> </section></article> <script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script> </div> </div> </div></div><footer> Contents Â© 2015 <a href=mailto:baptistewicht@gmail.com>Baptiste Wicht</a> - Powered by <a href=http://getnikola.com rel=nofollow>Nikola</a><a rel=license href=http://creativecommons.org/licenses/by/4.0/><img alt="Creative Commons License" style=padding-left:5px;border-width:0 src=../../../assets/img/cc.png></a> <ul class=footer_inline_ul> <li> <a href=a-mutt-journey-search-mails-with-notmuch.rst id=sourcelink>Source</a> </li> </ul></footer> <script src=../../../assets/js/all-nocdn.js></script><script type=text/javascript src=https://apis.google.com/js/platform.js></script></body></html>