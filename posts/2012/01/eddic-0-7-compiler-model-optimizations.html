<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<base href="http://baptiste-wicht.com/posts/2012/01/eddic-0-7-compiler-model-optimizations.html">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>EDDIC 0.7 : New compilation model and optimizations | @Blog("Baptiste Wicht")</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="http://baptiste-wicht.com/posts/2012/01/eddic-0-7-compiler-model-optimizations.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2175227-7']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script><meta name="author" content="Baptiste Wicht">
<link rel="prev" href="install-cinnamon-linux-mint.html" title="Install Cinnamon in Linux Mint - A forked Gnome Shell" type="text/html">
<link rel="next" href="compilers-principles-techniques-tools.html" title="Compilers : Principles, Techniques &amp; Tools - Book Review" type="text/html">
<meta property="og:site_name" content='@Blog("Baptiste Wicht")'>
<meta property="og:title" content="EDDIC 0.7 : New compilation model and optimizations">
<meta property="og:url" content="http://baptiste-wicht.com/posts/2012/01/eddic-0-7-compiler-model-optimizations.html">
<meta property="og:description" content="I'm proud to announce a new release of EDDIC, the version 0.7.
Most of the changes are internal to the compiler. I read a new book : Compilers: Principles, Techniques, and Tools and applied some of th">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2012-01-10T09:28:18+01:00">
<meta property="article:tag" content="Books">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="Compilers">
<meta property="article:tag" content="EDDI">
<meta property="article:tag" content="Optimization">
<link href="../../../favicon.ico" rel="icon" type="image/x-icon">
</head>
<body>

<!-- Menubar -->

<div class="container-fluid">
<!-- This keeps the margins nice -->
    <div class="row">
        <div class="col-sm-3 col-lg-2">
            <nav class="navbar navbar-inverse navbar-fixed-side"><div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="http://baptiste-wicht.com/">
                        <span id="blog-title">@Blog("Baptiste Wicht")</span>
                    </a>
                </div>
<!-- /.navbar-header -->

                <div class="collapse navbar-collapse navbar-ex1-collapse">
                    <ul class="nav navbar-nav">
<li>
                            <div class="g-person" data-width="275" data-href="//plus.google.com/u/0/103113673902796202116" data-theme="dark" data-layout="landscape" data-rel="author"></div>
                        </li>

                        
                <li>
<a href="../../../stories/about.html">About</a>
                </li>
<li>
<a href="../../../stories/publications.html">Publications</a>
                </li>
<li>
<a href="../../../categories/index.html">Tags</a>
                </li>
<li>
<a href="../../../archive.html">Archives</a>
                </li>
<li>
<a href="http://feeds.feedburner.com/BaptisteWicht">RSS</a>



                            </li>
<li class="navbar-content">
                                <h3>Related posts</h3>
                            </li>
                            

                            <li><a href="../02/local-optimization-on-three-address-code.html">Local optimization of Three-Address-Code</a></li>
<li><a href="../06/eddic-1-0-structures-global-optimizations.html">EDDI Compiler 1.0 - Structures and Global Optimizations</a></li>
<li><a href="../02/eddic-0-8-1-do-while-loop-and-better-optimization.html">EDDIC 0.8.1 : do while loop and better optimization </a></li>
<li><a href="../07/eddi-compiler-1-0-3-inlining-register-allocation.html">EDDI Compiler 1.0.3 - Inlining and register allocation</a></li>
<li><a href="../05/compiler-architecture-refinements-eddic.html">Compiler Architecture refinements for eddic</a></li>


                            <li class="navbar-block">

                        <li class="wicht-navbar-right">
                            <a target="_blank" title="Follow @wichtounet on Twitter" href="https://twitter.com/wichtounet">
                                <img src="../../../assets/img/twitter.svg" alt="Follow @wichtounet on Twitter"></a>
                        </li>

                        <li class="wicht-navbar-right">
                            <a target="_blank" title="Follow +BaptisteWicht on Google+" href="https://plus.google.com/+BaptisteWicht">
                                <img src="../../../assets/img/google_plus.svg" alt="Follow +BaptisteWicht on Google+"></a>
                        </li>


                    </ul>
</div>
<!-- /.navbar-collapse -->
            </nav>
</div> <!-- col -->
        <div class="col-sm-9 col-lg-10">
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">EDDIC 0.7 : New compilation model and optimizations</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                    Baptiste Wicht
            </span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2012-01-10T09:28:18+01:00" itemprop="datePublished" title="2012-01-10 09:28">2012-01-10 09:28</time></a></p>
                <p class="commentline">
        
    <a href="eddic-0-7-compiler-model-optimizations.html#disqus_thread" data-disqus-identifier="cache/posts/2012/01/eddic-0-7-compiler-model-optimizations.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="eddic-0-7-compiler-model-optimizations.wp" id="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>I'm proud to announce a new release of EDDIC, the version 0.7.</p>
<p>Most of the changes are internal to the compiler. I read a new book : <em>Compilers: Principles, Techniques, and Tools</em> and applied some of the advices of the author. The biggest change is the use of a new intermediate representation : Three-Address-Code statements. This representation is easy, all the statements are basically of the form a = b + c with + being any operator of the language. The big advantage of this representation is that we can easily run optimization on it. Another advantage is that this representation is complete enough to represent most of the programming languages, so, we can imagine compiling several different source languages into the TAC language and then compiling them the same way.</p>
<p>Once the Three-Address-Code representation is generated and separated into basic blocks, it is compiled into X86 assembly using a code generator. I've made a lot of improvements on the generated assembly. For example, I'm using several new instructions (neg, inc, dec, xor, ...) to generate more efficient code. Moreover, I'm doing a better use of registers with keeping variables into registers as long as possible.</p>
<h4>Better optimization engine</h4>

<p>Here is the list of what the optimizer do at the TAC level:</p>
<ul>
<li>Simplify arithmetic identities : a = b + 0 =&gt; a = b</li>
    <li>Reduce in strength : a = b * 2 =&gt; a = b + b</li>
    <li>Constant folding : a = 2 + 2 =&gt; a = 4</li>
    <li>Constant propagation : when a constant is assigned to a, reuse the constant as long as no other assignment is made to a</li>
    <li>Remove overridden assign</li>
    <li>Remove dead basic blocks : when a condition is known at compile time we can know the path it will take and remove basic blocks that will never be taken</li>
    <li>Remove needless jumps : After the other optimization have been done it is possible that a goto is directly targeting the next basic block so we can remove it</li>
    <li>Merge basic blocks : After some statements have been replaced or removed it is possible that we can merge some basic blocks together</li>
</ul>
<p>The optimizer is running the different optimization technique as long as one of them as an effect on the code. At the present time, the optimization techniques are used locally (within a basic block) so the generated assembly is not perfect, but for what I tested so far, it's a good start.</p>
<h4>Other changes</h4>

<p>Moreover, the language itself also had some improvements:
</p>
<ul>
<li>The minus and plus unary operators have been added to the grammar</li>
    <li>The local and global variables can be const</li>
    <li>A source file can now includes another source or a file from the standard library (very little for now, but a little start)</li>
</ul>
<p>The project itself has also been improved
</p>
<ul>
<li>Most of the classes and files are now documented using Doxygen</li>
    <li>The unit tests are now testing compilation and execution of some samples, that helped me finding some bugs in the code base and in the new changes</li>
</ul>
<h4>Download</h4>

<p>You can find the compiler sources on the Github repository : <a title="EDDI Compiler Repository" href="http://github.com/wichtounet/eddic">https://github.com/wichtounet/eddic</a>.</p>
<p>The exact version I refer to is the v0.7 available in the github tags or directly as the release branch.</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/books.html" rel="tag">Books</a></li>
            <li><a class="tag p-category" href="../../../categories/c%2B%2B.html" rel="tag">C++</a></li>
            <li><a class="tag p-category" href="../../../categories/compilers.html" rel="tag">Compilers</a></li>
            <li><a class="tag p-category" href="../../../categories/eddi.html" rel="tag">EDDI</a></li>
            <li><a class="tag p-category" href="../../../categories/optimization.html" rel="tag">Optimization</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="install-cinnamon-linux-mint.html" rel="prev" title="Install Cinnamon in Linux Mint - A forked Gnome Shell">Previous post</a>
            </li>
            <li class="next">
                <a href="compilers-principles-techniques-tools.html" rel="next" title="Compilers : Principles, Techniques &amp; Tools - Book Review">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://baptiste-wicht.com/posts/2012/01/eddic-0-7-compiler-model-optimizations.html",
        disqus_title="EDDIC 0.7 : New compilation model and optimizations",
        disqus_identifier="cache/posts/2012/01/eddic-0-7-compiler-model-optimizations.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div> <!-- col -->
    </div>
<!-- row  -->
</div>
<!-- container-fluid -->

<!-- End of Menubar -->

<!-- Footer -->

<footer>
    Contents © 2016         <a href="mailto:baptistewicht@gmail.com">Baptiste Wicht</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="../../../assets/img/cc.png"></a>
        <ul class="footer_inline_ul">
<li>
    <a href="eddic-0-7-compiler-model-optimizations.wp" id="sourcelink">Source</a>
    </li>

        </ul></footer><!-- Late loading stuff  --><script src="../../../assets/js/all-nocdn.js"></script><!-- Google platform JS --><script type="text/javascript" src="https://apis.google.com/js/platform.js"></script>
</body>
</html>
