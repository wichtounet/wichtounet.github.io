<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<base href="http://baptiste-wicht.com/posts/2012/07/eddi-compiler-1-1-0-member-functions.html">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>EDDI Compiler 1.1.0 - Member functions | Blog blog("Baptiste Wicht");</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="http://baptiste-wicht.com/posts/2012/07/eddi-compiler-1-1-0-member-functions.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2175227-7']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script><meta name="author" content="Baptiste Wicht">
<link rel="prev" href="manage-command-line-boost-program-options.html" title="Manage command-line options with Boost Program Options" type="text/html">
<link rel="next" href="c11-synchronization-benchmark.html" title="C++11 Synchronization Benchmark" type="text/html">
<meta property="og:site_name" content='Blog blog("Baptiste Wicht");'>
<meta property="og:title" content="EDDI Compiler 1.1.0 - Member functions">
<meta property="og:url" content="http://baptiste-wicht.com/posts/2012/07/eddi-compiler-1-1-0-member-functions.html">
<meta property="og:description" content="The version 1.1.0 of the EDDI Compiler (eddic) is available. It took much less time to implement that version than I thought. 
The main change to the language is the support of member functions. Each ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2012-07-22T06:18:57+02:00">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="Compilers">
<meta property="article:tag" content="EDDI">
<meta property="article:tag" content="Optimization">
<link href="../../../favicon.ico" rel="icon" type="image/x-icon">
<link rel="publisher" href="https://plus.google.com/+BaptisteWicht">
</head>
<body>

<!-- Menubar -->

<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<div class="container-fluid">
<!-- This keeps the margins nice -->
    <div class="row">
        <div class="col-sm-3 col-lg-2">
            <nav class="navbar navbar-inverse navbar-fixed-side"><div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="http://baptiste-wicht.com/">
                        <span id="blog-title">Blog blog("Baptiste Wicht");</span>
                    </a>
                </div>
<!-- /.navbar-header -->

                <div class="collapse navbar-collapse navbar-ex1-collapse">
                    <ul class="nav navbar-nav">
<li>
<a href="../../../stories/about.html">About</a>
                </li>
<li>
<a href="../../../stories/publications.html">Publications</a>
                </li>
<li>
<a href="../../../categories/index.html">Tags</a>
                </li>
<li>
<a href="../../../archive.html">Archives</a>
                </li>
<li>
<a href="http://feeds.feedburner.com/BaptisteWicht">RSS</a>



                            </li>
<li class="navbar-content">
                                <h3>Related posts</h3>
                            </li>
                            

                            <li><a href="eddi-compiler-1-0-3-inlining-register-allocation.html">EDDI Compiler 1.0.3 - Inlining and register allocation</a></li>
<li><a href="../09/eddi-compiler-1-1-3-templates.html">EDDI Compiler 1.1.3 - Templates</a></li>
<li><a href="eddi-compiler-1-0-2-better-pointer-support-new-optimizations.html">EDDI Compiler 1.0.2 – Better pointer support and Dead-Code Elimination</a></li>
<li><a href="../06/eddi-compiler-1-0-1-pointers-better-struct-support.html">EDDI Compiler 1.0.1 - Pointers and better struct support</a></li>
<li><a href="../12/eddic-1-2-0-single-inheritance-copy-constructor.html">eddic 1.2.0 - Single inheritance, copy construction</a></li>


                            <li class="navbar-block">

                        <li class="wicht-navbar-right">
                            <a target="_blank" title="Follow @wichtounet on Twitter" href="https://twitter.com/wichtounet">
                                <img src="../../../assets/img/twitter.png" alt="Follow @wichtounet on Twitter"></a>
                        </li>

                        <li class="wicht-navbar-right">
                            <a target="_blank" title="Follow +BaptisteWicht on Google+" href="https://plus.google.com/+BaptisteWicht">
                                <img src="../../../assets/img/google_plus.png" alt="Follow +BaptisteWicht on Google+"></a>
                        </li>


                    </ul>
</div>
<!-- /.navbar-collapse -->
            </nav>
</div> <!-- col -->
        <div class="col-sm-9 col-lg-10">
            <div id="content"></div>
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">EDDI Compiler 1.1.0 - Member functions</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                    Baptiste Wicht
            </span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2012-07-22T06:18:57+02:00" itemprop="datePublished" title="2012-07-22 06:18">2012-07-22 06:18</time></a></p>
                <p class="commentline">
        
    <a href="eddi-compiler-1-1-0-member-functions.html#disqus_thread" data-disqus-identifier="cache/posts/2012/07/eddi-compiler-1-1-0-member-functions.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="eddi-compiler-1-1-0-member-functions.wp" id="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>The <strong>version 1.1.0</strong> of the <strong>EDDI Compiler</strong> (eddic) is available. It took much less time to implement that version than I thought. </p>
<p>The main change to the language is the <strong>support of member functions</strong>. Each structure can now declare some functions. Functions can be called in each structure object. Here is an example of what can be done with that feature in EDDI:</p>
<pre class="code literal-block"><span class="k">struct</span> <span class="n">Counter</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">value</span><span class="p">;</span>

    <span class="kt">void</span> <span class="nf">increment</span><span class="p">(){</span>
        <span class="k">this</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="n">value</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">add</span><span class="p">(</span><span class="kt">int</span> <span class="n">number</span><span class="p">){</span>
        <span class="k">this</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">number</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">add</span><span class="p">(</span><span class="kt">int</span> <span class="n">n1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n2</span><span class="p">){</span>
        <span class="k">this</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">n1</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">n2</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">main</span><span class="p">(){</span>
    <span class="n">Counter</span> <span class="n">counter</span><span class="p">;</span>
    <span class="n">counter</span><span class="p">.</span><span class="n">increment</span><span class="p">();</span>
    <span class="n">println</span><span class="p">(</span><span class="n">counter</span><span class="p">.</span><span class="n">value</span><span class="p">);</span>

    <span class="n">counter</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="mi">99</span><span class="p">);</span>
    <span class="n">println</span><span class="p">(</span><span class="n">counter</span><span class="p">.</span><span class="n">value</span><span class="p">);</span>

    <span class="n">counter</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">69</span><span class="p">);</span>
    <span class="n">println</span><span class="p">(</span><span class="n">counter</span><span class="p">.</span><span class="n">value</span><span class="p">);</span>
<span class="p">}</span>
</pre>


<p>The <em>this</em> pointer is available in each member function. The pointer is passed on the stack just like any other parameter. </p>
<p>Another improvement is the support of the <strong>ternary operator</strong>:</p>
<pre class="code literal-block"><span class="kt">void</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="mi">2</span> <span class="o">?</span> <span class="mi">44</span> <span class="o">:</span> <span class="mi">66</span><span class="p">;</span>
    <span class="n">println</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="p">}</span>
</pre>


<p>The inliner has been improved to support inlining member functions and functions with pointer parameters. The parameter allocation in register is only done starting at O1. </p>
<p>The peephole optimizer has also been improved. Some stacks operations optimization are performed and some unnecessary copies of parameter register are removed.  </p>
<p>Finally, the assembly generation has been improved to not use stack frames starting at O2. When this optimization is enabled, the local variables are addressed using stack pointers instead of the base pointer that is not used anymore. This optimization reduces the overhead of function calls. </p>
<h4>Future work</h4>

<p>The next version of the EDDI Compiler will be the <strong>version 1.1.1</strong>.</p>
<h4>Download</h4>

<p>You can find the compiler sources on the Github repository: <a title="eddic on GitHub" href="https://github.com/wichtounet/eddic">https://github.com/wichtounet/eddic</a></p>
<p>The exact version I refer to is the v1.1 available in the GitHub tags or directly as the release branch.</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/c%2B%2B.html" rel="tag">C++</a></li>
            <li><a class="tag p-category" href="../../../categories/compilers.html" rel="tag">Compilers</a></li>
            <li><a class="tag p-category" href="../../../categories/eddi.html" rel="tag">EDDI</a></li>
            <li><a class="tag p-category" href="../../../categories/optimization.html" rel="tag">Optimization</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="manage-command-line-boost-program-options.html" rel="prev" title="Manage command-line options with Boost Program Options">Previous post</a>
            </li>
            <li class="next">
                <a href="c11-synchronization-benchmark.html" rel="next" title="C++11 Synchronization Benchmark">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://baptiste-wicht.com/posts/2012/07/eddi-compiler-1-1-0-member-functions.html",
        disqus_title="EDDI Compiler 1.1.0 - Member functions",
        disqus_identifier="cache/posts/2012/07/eddi-compiler-1-1-0-member-functions.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div> <!-- col -->
    </div>
<!-- row  -->
</div>
<!-- container-fluid -->

<!-- End of Menubar -->

<!-- Footer -->

<footer>
    Contents © 2017         <a href="mailto:baptistewicht@gmail.com">Baptiste Wicht</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         - License: 
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="../../../assets/img/cc.png"></a>
        <ul class="footer_inline_ul">
<li>
    <a href="eddi-compiler-1-1-0-member-functions.wp" id="sourcelink">Source</a>
    </li>

        </ul></footer><!-- Late loading stuff  --><script src="../../../assets/js/all-nocdn.js"></script><!-- Google platform JS -->
</body>
</html>
