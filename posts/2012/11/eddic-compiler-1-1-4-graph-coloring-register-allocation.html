<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>EDDI Compiler 1.1.4 – Graph Coloring Register Allocation | Blog blog("Baptiste Wicht");</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../rss.xml">
<link rel="canonical" href="https://baptiste-wicht.com/posts/2012/11/eddic-compiler-1-1-4-graph-coloring-register-allocation.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Baptiste Wicht">
<link rel="prev" href="integer-linear-time-sorting-algorithms.html" title="Integer Linear Time Sorting Algorithms" type="text/html">
<link rel="next" href="gcc-4-7-clang-3-1-eddic.html" title="GCC 4.7 vs CLang 3.1 on eddic" type="text/html">
<meta property="og:site_name" content='Blog blog("Baptiste Wicht");'>
<meta property="og:title" content="EDDI Compiler 1.1.4 – Graph Coloring Register Allocation">
<meta property="og:url" content="https://baptiste-wicht.com/posts/2012/11/eddic-compiler-1-1-4-graph-coloring-register-allocation.html">
<meta property="og:description" content="I'm proud to announce the release of the version 1.1.4 of the EDDI Compiler (eddic).
This version has taken me much more time than I thought but I also added much more features than I thought too. 
Th">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2012-11-08T08:25:15+01:00">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="Compilers">
<meta property="article:tag" content="EDDI">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://baptiste-wicht.com/">

                <span id="blog-title">Blog blog("Baptiste Wicht");</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../../stories/about.html">About</a>
                </li>
<li>
<a href="../../../stories/publications.html">Publications</a>
                </li>
<li>
<a href="../../../stories/projects.html">Projects</a>
                </li>
<li>
<a href="../../../categories/index.html">Tags</a>
                </li>
<li>
<a href="../../../archive.html">Archives</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="eddic-compiler-1-1-4-graph-coloring-register-allocation.wp" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">EDDI Compiler 1.1.4 – Graph Coloring Register Allocation</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Baptiste Wicht
            </span></p>
            <p class="dateline">
            <a href="#" rel="bookmark">
            <time class="published dt-published" datetime="2012-11-08T08:25:15+01:00" itemprop="datePublished" title="2012-11-08 08:25">2012-11-08 08:25</time></a>
            </p>
                <p class="commentline">
    
    <a href="eddic-compiler-1-1-4-graph-coloring-register-allocation.html#disqus_thread" data-disqus-identifier="cache/posts/2012/11/eddic-compiler-1-1-4-graph-coloring-register-allocation.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="eddic-compiler-1-1-4-graph-coloring-register-allocation.wp" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I'm proud to announce the release of the <strong>version 1.1.4 of the EDDI Compiler (eddic)</strong>.</p>
<p>This version has taken me much more time than I thought but I also added much more features than I thought too. </p>
<p>There are few changes of the language itself, the main changes are in the optimization passes or in the compiler. </p>
<p>For the language, it is now possible to use dynamically allocated arrays. The <em>this</em> pointer is now implicit in member functions. </p>
<p>The standard library has been improved by the <strong>addition of a Doubly-Linked List</strong>. This list uses the templates so that it is generic. It is possible to add elements to the front and the back of the list. The list is iterable using iterators (bidirectional). </p>
<p>The template engine has been almost entirely rewritten. The previous version was too limited and there was code to handle the templates almost in the whole front-end. Now, the templates are handled recursively at each point where they can appear. For not the template instantiation depth is not limited, but this will be done in the next version of eddic. </p>
<p>The major change of this version is the use of a <strong>Graph Coloring Register Allocator</strong> ! This allocator is based on a Chaitin-style allocator. This greatly improves the quality of the generated assembly. The LTAC compilation is now made in two phase. In the first one, only pseudo registers are used. This first pass includes a first cleanup pass. Then, the register allocator replaces all the pseudo registers by actual registers. Finally, the LTAC IR is optimized like before. In the future, it will be improved further. The coalescing and renumbering passes are a bit limited for now and Chaitin-Briggs optimistic coloring will be used in the future. </p>
<p>The data-flow framework has been improved to support <strong>data-flow analysis of LTAC program</strong>. For now, the only analysis that does that is Live Registers Analysis. This analysis is used by the Register Allocator by the Dead Code Elimination that is run in LTAC code. </p>
<p>The MTAC optimization engine has been greatly improved by the use of a powerful pass manager that runs the optimization in the correct order and that gives them the necessary information. The Control Flow Graph is now updated by the different passes and never invalidated. The CFG is computed only once before the optimizations. </p>
<p>The MTAC optimization engine has also new optimization passes regarding to loops: <strong>Loop Invariant Code Motion</strong>, <strong>Loop Strength Reduction</strong> and <strong>Complete Loop Peeling</strong>. The loops are discovered by a dominance analysis implemented using the Lengauer-Tarjan's algorithm. </p>
<p>The inliner has also beeen greatly improved. The inlining decision is now taken at the call site level. It means that only some calls to a function can be inlined and not the whole function. The inliner now supports functions with string parameters. Moreover, the inliner heuristic takes the number of constant parameters at the call site into account to take its decision. </p>
<p>On the side of the Compiler, there are several improvements. </p>
<p></p>
<ul>
<li>The whole compilation process has been made thread safe.</li>
    <li><a href="http://www.baptiste-wicht.com/2012/10/run-boost-test-parallel-cmake/" title="Run your Boost Tests in parallel with CMake">The Test Suite can be run in parallel</a></li>
    <li>The Middle-End and Back-Ends have been clearly separated (More information on the <a href="https://github.com/wichtounet/eddic/wiki/Architecture" title="Architecture of the EDDI Compiler">Wiki</a>). </li>
    <li>The LTAC Intermediate Representation now keeps the Basic Blocks of the MTAC representation.</li>
    <li><a href="http://www.baptiste-wicht.com/2012/11/eddic-compiles-with-clang-3-1/" title="eddic compiles with CLang 3.1">eddic can be compiled with CLang</a></li>
</ul>
<h4>Future Work</h4>

<p>The next version of the EDDI compiler (eddic) will be the version 1.2.0. This version will add support for inheritance at least in a basic way. It will also add support for returning a structure by value. The structures can contains arrays of defined size. This version will also focus on removing the limitations that exists on some features (Function Call Left Values for instance). It will also contains several necessary cleanups to the files. </p>
<h4>Download</h4>

<p>You can find the EDDI Compiler sources on the Github repository: <a title="Github repository of eddic" href="https://github.com/wichtounet/eddic">https://github.com/wichtounet/eddic</a></p>
<p>The version is available in the <em>v1.1.4</em> tag available in the GitHub or directly in the <em>master</em> branch.</p>
    <h3>Related articles</h3>
    

    <li><a href="../07/eddi-compiler-1-0-3-inlining-register-allocation.html">EDDI Compiler 1.0.3 - Inlining and register allocation</a></li>
<li><a href="../../2013/01/eddic-1-2-2-performances-optimization-library.html">eddic 1.2.2 - Performances, improved optimizations and additions to standard library</a></li>
<li><a href="../09/eddi-compiler-1-1-3-templates.html">EDDI Compiler 1.1.3 - Templates</a></li>
<li><a href="../07/eddi-compiler-1-0-2-better-pointer-support-new-optimizations.html">EDDI Compiler 1.0.2 – Better pointer support and Dead-Code Elimination</a></li>
<li><a href="../../2013/03/eddic-1-2-3-better-data-flow-analysis.html">eddic 1.2.3 - Better data-flow analysis</a></li>
<li><a href="../06/eddic-1-0-structures-global-optimizations.html">EDDI Compiler 1.0 - Structures and Global Optimizations</a></li>


    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/c%2B%2B.html" rel="tag">C++</a></li>
            <li><a class="tag p-category" href="../../../categories/compilers.html" rel="tag">Compilers</a></li>
            <li><a class="tag p-category" href="../../../categories/eddi.html" rel="tag">EDDI</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="integer-linear-time-sorting-algorithms.html" rel="prev" title="Integer Linear Time Sorting Algorithms">Previous post</a>
            </li>
            <li class="next">
                <a href="gcc-4-7-clang-3-1-eddic.html" rel="next" title="GCC 4.7 vs CLang 3.1 on eddic">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
    
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="https://baptiste-wicht.com/posts/2012/11/eddic-compiler-1-1-4-graph-coloring-register-allocation.html",
        disqus_title="EDDI Compiler 1.1.4 \u2013 Graph Coloring Register Allocation",
        disqus_identifier="cache/posts/2012/11/eddic-compiler-1-1-4-graph-coloring-register-allocation.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2025         <a href="mailto:baptistewicht@gmail.com">Baptiste Wicht</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         - License: 
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="../../../assets/img/cc.png"></a>
            
        </footer>
</div>
</div>


            <script src="../../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
