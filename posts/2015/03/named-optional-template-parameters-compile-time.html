<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Named Optional Template parameters to configure a class at compile-time | Blog blog("Baptiste Wicht");</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../rss.xml">
<link rel="canonical" href="https://baptiste-wicht.com/posts/2015/03/named-optional-template-parameters-compile-time.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Baptiste Wicht">
<link rel="prev" href="../../2014/10/sonarqube-inspections-for-cpp-projects.html" title="SonarQube inspections for C++ projects" type="text/html">
<link rel="next" href="how-to-speed-up-raid-5-6-growing-with-mdadm.html" title="How to speed up RAID (5-6) growing with mdadm ?" type="text/html">
<meta property="og:site_name" content='Blog blog("Baptiste Wicht");'>
<meta property="og:title" content="Named Optional Template parameters to configure a class at compile-tim">
<meta property="og:url" content="https://baptiste-wicht.com/posts/2015/03/named-optional-template-parameters-compile-time.html">
<meta property="og:description" content="In this post, I'll describe a technique that can be used to configure a class at compile-time when there are multiple, optional parameters, with default values to this class. I used this technique in ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-03-01T15:52:41+01:00">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="C++11">
<meta property="article:tag" content="C++14">
<meta property="article:tag" content="templates">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://baptiste-wicht.com/">

                <span id="blog-title">Blog blog("Baptiste Wicht");</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../../stories/about.html">About</a>
                </li>
<li>
<a href="../../../stories/publications.html">Publications</a>
                </li>
<li>
<a href="../../../stories/projects.html">Projects</a>
                </li>
<li>
<a href="../../../categories/index.html">Tags</a>
                </li>
<li>
<a href="../../../archive.html">Archives</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="named-optional-template-parameters-compile-time.rst" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Named Optional Template parameters to configure a class at compile-time</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Baptiste Wicht
            </span></p>
            <p class="dateline">
            <a href="#" rel="bookmark">
            <time class="published dt-published" datetime="2015-03-01T15:52:41+01:00" itemprop="datePublished" title="2015-03-01 15:52">2015-03-01 15:52</time></a>
            </p>
                <p class="commentline">
    
    <a href="named-optional-template-parameters-compile-time.html#disqus_thread" data-disqus-identifier="cache/posts/2015/03/named-optional-template-parameters-to-configure-a-class-at-compile-time.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="named-optional-template-parameters-compile-time.rst" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>In this post, I'll describe a technique that can be used to configure a class at compile-time when there are multiple, optional parameters, with default values to this class. I used this technique in my dll project to configure each instance of Restricted Boltzmann Machine.</p>
<p>The technique presented here will only work with C++11 because of the need for variadic template. This could be emulated without them by fixing a maximum number of parameters, but I won't go into this in this post.</p>
<section id="the-problem"><h2>The problem</h2>
<p>For this post, we'll take the case of a single class, let's call it configurable. This class has several parameters:</p>
<ul class="simple">
<li><p>A of type int</p></li>
<li><p>B of type char</p></li>
<li><p>C of an enum type</p></li>
<li><p>D of type bool</p></li>
<li><p>E is a type</p></li>
<li><p>F is a template type</p></li>
</ul>
<p>This class could simply be written as such:</p>
<div class="code"><pre class="code c++"><a id="rest_code_d287d142db3045e19734c4ebd39584e2-1" name="rest_code_d287d142db3045e19734c4ebd39584e2-1" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-1"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">type</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-2" name="rest_code_d287d142db3045e19734c4ebd39584e2-2" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-2"></a><span class="w">    </span><span class="n">AAA</span><span class="p">,</span>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-3" name="rest_code_d287d142db3045e19734c4ebd39584e2-3" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-3"></a><span class="w">    </span><span class="n">BBB</span><span class="p">,</span>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-4" name="rest_code_d287d142db3045e19734c4ebd39584e2-4" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-4"></a><span class="w">    </span><span class="n">CCC</span>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-5" name="rest_code_d287d142db3045e19734c4ebd39584e2-5" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-5"></a><span class="p">};</span>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-6" name="rest_code_d287d142db3045e19734c4ebd39584e2-6" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-6"></a>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-7" name="rest_code_d287d142db3045e19734c4ebd39584e2-7" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-7"></a><span class="k">template</span><span class="o">&lt;</span><span class="kt">int</span><span class="w"> </span><span class="n">T_A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">T_B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">'b'</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">T_C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">type</span><span class="o">::</span><span class="n">BBB</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">T_D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T_E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">watcher_1</span><span class="p">,</span><span class="w"> </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="o">&gt;</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">T_F</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">trainer_1</span><span class="o">&gt;</span>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-8" name="rest_code_d287d142db3045e19734c4ebd39584e2-8" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-8"></a><span class="k">struct</span><span class="w"> </span><span class="nc">configurable_v1</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-9" name="rest_code_d287d142db3045e19734c4ebd39584e2-9" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-9"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T_A</span><span class="p">;</span>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-10" name="rest_code_d287d142db3045e19734c4ebd39584e2-10" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-10"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T_B</span><span class="p">;</span>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-11" name="rest_code_d287d142db3045e19734c4ebd39584e2-11" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-11"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T_C</span><span class="p">;</span>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-12" name="rest_code_d287d142db3045e19734c4ebd39584e2-12" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-12"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T_D</span><span class="p">;</span>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-13" name="rest_code_d287d142db3045e19734c4ebd39584e2-13" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-13"></a>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-14" name="rest_code_d287d142db3045e19734c4ebd39584e2-14" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-14"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T_E</span><span class="p">;</span>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-15" name="rest_code_d287d142db3045e19734c4ebd39584e2-15" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-15"></a>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-16" name="rest_code_d287d142db3045e19734c4ebd39584e2-16" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-16"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">C</span><span class="o">&gt;</span>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-17" name="rest_code_d287d142db3045e19734c4ebd39584e2-17" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-17"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T_F</span><span class="o">&lt;</span><span class="n">C</span><span class="o">&gt;</span><span class="p">;</span>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-18" name="rest_code_d287d142db3045e19734c4ebd39584e2-18" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-18"></a>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-19" name="rest_code_d287d142db3045e19734c4ebd39584e2-19" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-19"></a><span class="w">    </span><span class="c1">//Something useful</span>
<a id="rest_code_d287d142db3045e19734c4ebd39584e2-20" name="rest_code_d287d142db3045e19734c4ebd39584e2-20" href="named-optional-template-parameters-compile-time.html#rest_code_d287d142db3045e19734c4ebd39584e2-20"></a><span class="p">};</span>
</pre></div>
<p>and used simply as well:</p>
<div class="code"><pre class="code c++"><a id="rest_code_95776e2ca02b4a26b48a34cad878d1a0-1" name="rest_code_95776e2ca02b4a26b48a34cad878d1a0-1" href="named-optional-template-parameters-compile-time.html#rest_code_95776e2ca02b4a26b48a34cad878d1a0-1"></a><span class="k">using</span><span class="w"> </span><span class="n">configurable_v1_t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">configurable_v1</span><span class="o">&lt;</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="sc">'z'</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="o">::</span><span class="n">CCC</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">watcher_2</span><span class="p">,</span><span class="w"> </span><span class="n">trainer_2</span><span class="o">&gt;</span><span class="p">;</span>
</pre></div>
<p>This works well and nothing is wrong with this code. However, if you want all default values but the last one, you have to specify each and every one of the previous template parameters as well. The first disadvantage is that it is verbose and tedious. Secondly, instead of using directly the default values implicitly, you have specified them. This means that if the default values are changed by the library authors or even by you in the configurable_v1 class, either all the usages will be out of sync or you'll have to update them. And again, this is not practical. Moreover, if the author of the configurable_v1 template adds new template parameters before the last, you'll have to update all the instantiation points as well.</p>
<p>Moreover, here we only have 6 parameters, if you have more, the problem becomes even worse.</p>
</section><section id="the-solution"><h2>The solution</h2>
<p>What can we do to improve over these problems ? We are going to use variadic template parameters in the configurable class and use simple classes for each possible parameters. This will be done in the configurable_v2 class. At the end you could use the class as such:</p>
<div class="code"><pre class="code c++"><a id="rest_code_1c2050207a80429cbd11f1a06a89d29d-1" name="rest_code_1c2050207a80429cbd11f1a06a89d29d-1" href="named-optional-template-parameters-compile-time.html#rest_code_1c2050207a80429cbd11f1a06a89d29d-1"></a><span class="k">using</span><span class="w"> </span><span class="n">configurable_v2_t1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">configurable_v2</span><span class="o">&lt;</span><span class="n">a</span><span class="o">&lt;</span><span class="mi">100</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="o">&lt;</span><span class="sc">'z'</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="o">&lt;</span><span class="n">type</span><span class="o">::</span><span class="n">CCC</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="o">&lt;</span><span class="n">watcher_2</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="o">&lt;</span><span class="n">trainer_2</span><span class="o">&gt;&gt;</span><span class="p">;</span>
<a id="rest_code_1c2050207a80429cbd11f1a06a89d29d-2" name="rest_code_1c2050207a80429cbd11f1a06a89d29d-2" href="named-optional-template-parameters-compile-time.html#rest_code_1c2050207a80429cbd11f1a06a89d29d-2"></a><span class="k">using</span><span class="w"> </span><span class="n">configurable_v2_t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">configurable_v2</span><span class="o">&lt;</span><span class="n">f</span><span class="o">&lt;</span><span class="n">trainer_2</span><span class="o">&gt;&gt;</span><span class="p">;</span>
</pre></div>
<p>You can note, that on the second line, we only specified the value for the last parameter without specifiyng any other value :) This is also much more flexible since the order of the parameters has absolutely no impact. Here, for the sake of the example, the parameters are badly named, so it is not very clear what this do, but in practice, you can give better names to the parameters and make the types more clear. Here is an example from my dll library:</p>
<div class="code"><pre class="code c++"><a id="rest_code_827034fbc29d47328e4772c86d514bd8-1" name="rest_code_827034fbc29d47328e4772c86d514bd8-1" href="named-optional-template-parameters-compile-time.html#rest_code_827034fbc29d47328e4772c86d514bd8-1"></a><span class="k">using</span><span class="w"> </span><span class="n">rbm_t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dll</span><span class="o">::</span><span class="n">rbm_desc</span><span class="o">&lt;</span>
<a id="rest_code_827034fbc29d47328e4772c86d514bd8-2" name="rest_code_827034fbc29d47328e4772c86d514bd8-2" href="named-optional-template-parameters-compile-time.html#rest_code_827034fbc29d47328e4772c86d514bd8-2"></a><span class="w">    </span><span class="mi">28</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span>
<a id="rest_code_827034fbc29d47328e4772c86d514bd8-3" name="rest_code_827034fbc29d47328e4772c86d514bd8-3" href="named-optional-template-parameters-compile-time.html#rest_code_827034fbc29d47328e4772c86d514bd8-3"></a><span class="w">   </span><span class="n">dll</span><span class="o">::</span><span class="n">batch_size</span><span class="o">&lt;</span><span class="mi">25</span><span class="o">&gt;</span><span class="p">,</span>
<a id="rest_code_827034fbc29d47328e4772c86d514bd8-4" name="rest_code_827034fbc29d47328e4772c86d514bd8-4" href="named-optional-template-parameters-compile-time.html#rest_code_827034fbc29d47328e4772c86d514bd8-4"></a><span class="w">   </span><span class="n">dll</span><span class="o">::</span><span class="n">momentum</span><span class="p">,</span>
<a id="rest_code_827034fbc29d47328e4772c86d514bd8-5" name="rest_code_827034fbc29d47328e4772c86d514bd8-5" href="named-optional-template-parameters-compile-time.html#rest_code_827034fbc29d47328e4772c86d514bd8-5"></a><span class="w">   </span><span class="n">dll</span><span class="o">::</span><span class="n">weight_decay</span><span class="o">&lt;&gt;</span><span class="p">,</span>
<a id="rest_code_827034fbc29d47328e4772c86d514bd8-6" name="rest_code_827034fbc29d47328e4772c86d514bd8-6" href="named-optional-template-parameters-compile-time.html#rest_code_827034fbc29d47328e4772c86d514bd8-6"></a><span class="w">   </span><span class="n">dll</span><span class="o">::</span><span class="n">visible</span><span class="o">&lt;</span><span class="n">dll</span><span class="o">::</span><span class="n">unit_type</span><span class="o">::</span><span class="n">GAUSSIAN</span><span class="o">&gt;</span><span class="p">,</span>
<a id="rest_code_827034fbc29d47328e4772c86d514bd8-7" name="rest_code_827034fbc29d47328e4772c86d514bd8-7" href="named-optional-template-parameters-compile-time.html#rest_code_827034fbc29d47328e4772c86d514bd8-7"></a><span class="w">   </span><span class="n">dll</span><span class="o">::</span><span class="n">shuffle</span><span class="p">,</span>
<a id="rest_code_827034fbc29d47328e4772c86d514bd8-8" name="rest_code_827034fbc29d47328e4772c86d514bd8-8" href="named-optional-template-parameters-compile-time.html#rest_code_827034fbc29d47328e4772c86d514bd8-8"></a><span class="w">   </span><span class="n">dll</span><span class="o">::</span><span class="n">weight_type</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span>
<a id="rest_code_827034fbc29d47328e4772c86d514bd8-9" name="rest_code_827034fbc29d47328e4772c86d514bd8-9" href="named-optional-template-parameters-compile-time.html#rest_code_827034fbc29d47328e4772c86d514bd8-9"></a><span class="o">&gt;::</span><span class="n">rbm_t</span><span class="p">;</span>
</pre></div>
<p>rbm_desc is class that is configurable with this technique, expect that the first two parameters are mandatory and not named. I personally thinks that this is quite clear, but of course I may be biased ;)</p>
<p>So let's code!</p>
<p>The class declaration is quite simple:</p>
<div class="code"><pre class="code c++"><a id="rest_code_b51de27baff04672b4432d97f4f12b5b-1" name="rest_code_b51de27baff04672b4432d97f4f12b5b-1" href="named-optional-template-parameters-compile-time.html#rest_code_b51de27baff04672b4432d97f4f12b5b-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_b51de27baff04672b4432d97f4f12b5b-2" name="rest_code_b51de27baff04672b4432d97f4f12b5b-2" href="named-optional-template-parameters-compile-time.html#rest_code_b51de27baff04672b4432d97f4f12b5b-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">configurable_v2</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_b51de27baff04672b4432d97f4f12b5b-3" name="rest_code_b51de27baff04672b4432d97f4f12b5b-3" href="named-optional-template-parameters-compile-time.html#rest_code_b51de27baff04672b4432d97f4f12b5b-3"></a><span class="w">    </span><span class="c1">//Coming</span>
<a id="rest_code_b51de27baff04672b4432d97f4f12b5b-4" name="rest_code_b51de27baff04672b4432d97f4f12b5b-4" href="named-optional-template-parameters-compile-time.html#rest_code_b51de27baff04672b4432d97f4f12b5b-4"></a><span class="p">}</span>
</pre></div>
<p>We will now have to exact values and types from Args in order to get the 4 values, the type and the template type out of Args.</p>
</section><section id="extracting-integral-values"><h2>Extracting integral values</h2>
<p>We will start with the parameter <em>a</em> that holds a value of type int with a default value of 1. Here is one way of writing it:</p>
<div class="code"><pre class="code c++"><a id="rest_code_e8ef0c2cf956407eb57a3ead7d36884d-1" name="rest_code_e8ef0c2cf956407eb57a3ead7d36884d-1" href="named-optional-template-parameters-compile-time.html#rest_code_e8ef0c2cf956407eb57a3ead7d36884d-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">a_id</span><span class="p">;</span>
<a id="rest_code_e8ef0c2cf956407eb57a3ead7d36884d-2" name="rest_code_e8ef0c2cf956407eb57a3ead7d36884d-2" href="named-optional-template-parameters-compile-time.html#rest_code_e8ef0c2cf956407eb57a3ead7d36884d-2"></a>
<a id="rest_code_e8ef0c2cf956407eb57a3ead7d36884d-3" name="rest_code_e8ef0c2cf956407eb57a3ead7d36884d-3" href="named-optional-template-parameters-compile-time.html#rest_code_e8ef0c2cf956407eb57a3ead7d36884d-3"></a><span class="k">template</span><span class="o">&lt;</span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="o">&gt;</span>
<a id="rest_code_e8ef0c2cf956407eb57a3ead7d36884d-4" name="rest_code_e8ef0c2cf956407eb57a3ead7d36884d-4" href="named-optional-template-parameters-compile-time.html#rest_code_e8ef0c2cf956407eb57a3ead7d36884d-4"></a><span class="k">struct</span><span class="w"> </span><span class="nc">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">integral_constant</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_e8ef0c2cf956407eb57a3ead7d36884d-5" name="rest_code_e8ef0c2cf956407eb57a3ead7d36884d-5" href="named-optional-template-parameters-compile-time.html#rest_code_e8ef0c2cf956407eb57a3ead7d36884d-5"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">type_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a_id</span><span class="p">;</span>
<a id="rest_code_e8ef0c2cf956407eb57a3ead7d36884d-6" name="rest_code_e8ef0c2cf956407eb57a3ead7d36884d-6" href="named-optional-template-parameters-compile-time.html#rest_code_e8ef0c2cf956407eb57a3ead7d36884d-6"></a><span class="p">};</span>
</pre></div>
<p>So, <em>a</em> is simply an integral constant with another typedef <em>type_id</em>. Why do we need this id ? Because a is a type template, we cannot use std::is_same to compare it with other types, since its value is part of the type. If we had only int values, we could easily write a traits that indicates if the type is a specialization of a, but since will have several types, this would be a real pain to do and we would need such a traits for each possible type. Here the simple way to go is to add inner identifiers to each types.</p>
<p>We can now write a struct to extract the int value for a from <em>Args</em>. <em>Args</em> is a list of types in the form parameter_name&lt;parameter_value&gt;... . We have to find a specialization of a inside this list. If such a specialization is present, we'll take its integral constant value as the value for a, otherwise, we'll take the default values. Here is what we want to do:</p>
<div class="code"><pre class="code c++"><a id="rest_code_d40cc7987aad4c9f842d56d8adeff3e5-1" name="rest_code_d40cc7987aad4c9f842d56d8adeff3e5-1" href="named-optional-template-parameters-compile-time.html#rest_code_d40cc7987aad4c9f842d56d8adeff3e5-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_d40cc7987aad4c9f842d56d8adeff3e5-2" name="rest_code_d40cc7987aad4c9f842d56d8adeff3e5-2" href="named-optional-template-parameters-compile-time.html#rest_code_d40cc7987aad4c9f842d56d8adeff3e5-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">configurable_v2</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_d40cc7987aad4c9f842d56d8adeff3e5-3" name="rest_code_d40cc7987aad4c9f842d56d8adeff3e5-3" href="named-optional-template-parameters-compile-time.html#rest_code_d40cc7987aad4c9f842d56d8adeff3e5-3"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_value_int</span><span class="o">&lt;</span><span class="n">a</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_d40cc7987aad4c9f842d56d8adeff3e5-4" name="rest_code_d40cc7987aad4c9f842d56d8adeff3e5-4" href="named-optional-template-parameters-compile-time.html#rest_code_d40cc7987aad4c9f842d56d8adeff3e5-4"></a>
<a id="rest_code_d40cc7987aad4c9f842d56d8adeff3e5-5" name="rest_code_d40cc7987aad4c9f842d56d8adeff3e5-5" href="named-optional-template-parameters-compile-time.html#rest_code_d40cc7987aad4c9f842d56d8adeff3e5-5"></a><span class="w">    </span><span class="c1">//Coming</span>
<a id="rest_code_d40cc7987aad4c9f842d56d8adeff3e5-6" name="rest_code_d40cc7987aad4c9f842d56d8adeff3e5-6" href="named-optional-template-parameters-compile-time.html#rest_code_d40cc7987aad4c9f842d56d8adeff3e5-6"></a><span class="p">}</span>
</pre></div>
<p>We specify directly into the class the default values (1) for a and we use the class <em>get_value_int</em> to get its value from the variadic type list. Here is the implementation:</p>
<div class="code"><pre class="code c++"><a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-1" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-1" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-2" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-2" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">get_value_int</span><span class="p">;</span>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-3" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-3" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-3"></a>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-4" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-4" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-4"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D</span><span class="o">&gt;</span>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-5" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-5" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-5"></a><span class="k">struct</span><span class="w"> </span><span class="nc">get_value_int</span><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">integral_constant</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">D</span><span class="o">::</span><span class="n">value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{};</span>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-6" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-6" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-6"></a>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-7" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-7" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-7"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T2</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-8" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-8" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-8"></a><span class="k">struct</span><span class="w"> </span><span class="nc">get_value_int</span><span class="o">&lt;</span><span class="n">D</span><span class="p">,</span><span class="w"> </span><span class="n">T2</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-9" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-9" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-9"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D2</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T22</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">void</span><span class="o">&gt;</span>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-10" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-10" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-10"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">impl</span>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-11" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-11" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-11"></a><span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">integral_constant</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">get_value_int</span><span class="o">&lt;</span><span class="n">D</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{};</span>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-12" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-12" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-12"></a>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-13" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-13" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-13"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D2</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T22</span><span class="o">&gt;</span>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-14" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-14" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-14"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">impl</span><span class="w"> </span><span class="o">&lt;</span><span class="n">D2</span><span class="p">,</span><span class="w"> </span><span class="n">T22</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">enable_if_t</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">is_same</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D2</span><span class="o">::</span><span class="n">type_id</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T22</span><span class="o">::</span><span class="n">type_id</span><span class="o">&gt;::</span><span class="n">value</span><span class="o">&gt;&gt;</span>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-15" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-15" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-15"></a><span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">integral_constant</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">T22</span><span class="o">::</span><span class="n">value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{};</span>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-16" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-16" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-16"></a>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-17" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-17" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-17"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">impl</span><span class="o">&lt;</span><span class="n">D</span><span class="p">,</span><span class="w"> </span><span class="n">T2</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-18" name="rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-18" href="named-optional-template-parameters-compile-time.html#rest_code_7ae7b0f3a15747558b8d32ec6313f1e8-18"></a><span class="p">};</span>
</pre></div>
<p>If you are not really familiar with Template Metaprogramming (TMP), this may seems very unfamiliar or even barbaric, but I'll try to explain into details what is going on here :)</p>
<p><em>get_value_int</em> is a template that takes a type D, representing the parameter we want to extract and its default, and the list of args. It has a first partial specialization for the case when Args is empty. In which case, its value is simply the value inside D (the default value). The second partial specialization handles the case when there are at least one type (T2) inside the list of args. This separation in two partial specialization is the standard way to works with variadic template parameters. This specialization is more complicated than the first one since it uses an inner class to get the value out of the list. The inner class (impl) takes the parameter type (D2), the type that is present in the list (T22) and a special parameter (Enable) that is used for SFINAE. If you're not familiar with SFINAE (you're probably not reading this article...), it is, put simply, a mean to activate or deactivate a template class or function based on its template parameters. Here, the partial specialization of <em>impl</em> is enabled if <em>T22</em> and <em>D2</em> have the same <em>type_id</em>, in which case, the value of <em>T22</em> is taken as the return of <em>impl</em>. In the basic case, template recursion is used to continue iterating over the list of types. The fact that this has to be done into two template classes is because we cannot add a new template parameter to a partial template specialization even without a name. We cannot either add a simple <em>Enable</em> parameter to get_value_int, we cannot put before Args since then it would be necessary to give it a value in the code that uses it which is not practical neither a good practice.</p>
<p>We can now do the same for b that is of type char. Here is the parameter definition for b:</p>
<div class="code"><pre class="code c++"><a id="rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-1" name="rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-1" href="named-optional-template-parameters-compile-time.html#rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">a_id</span><span class="p">;</span>
<a id="rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-2" name="rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-2" href="named-optional-template-parameters-compile-time.html#rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-2"></a>
<a id="rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-3" name="rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-3" href="named-optional-template-parameters-compile-time.html#rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-3"></a><span class="k">template</span><span class="o">&lt;</span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="o">&gt;</span>
<a id="rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-4" name="rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-4" href="named-optional-template-parameters-compile-time.html#rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-4"></a><span class="k">struct</span><span class="w"> </span><span class="nc">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">integral_constant</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-5" name="rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-5" href="named-optional-template-parameters-compile-time.html#rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-5"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">type_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a_id</span><span class="p">;</span>
<a id="rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-6" name="rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-6" href="named-optional-template-parameters-compile-time.html#rest_code_d861b08f0e274a2db7b5a4c6c0e4ad23-6"></a><span class="p">};</span>
</pre></div>
<p>This code is highly similar to the code for a, so we can generalize a bit this with a base class:</p>
<div class="code"><pre class="code c++"><a id="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-1" name="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-1" href="named-optional-template-parameters-compile-time.html#rest_code_5ca0f18c2f0247788dd1b524d3502e5d-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">a_id</span><span class="p">;</span>
<a id="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-2" name="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-2" href="named-optional-template-parameters-compile-time.html#rest_code_5ca0f18c2f0247788dd1b524d3502e5d-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">b_id</span><span class="p">;</span>
<a id="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-3" name="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-3" href="named-optional-template-parameters-compile-time.html#rest_code_5ca0f18c2f0247788dd1b524d3502e5d-3"></a>
<a id="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-4" name="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-4" href="named-optional-template-parameters-compile-time.html#rest_code_5ca0f18c2f0247788dd1b524d3502e5d-4"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">ID</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">value</span><span class="o">&gt;</span>
<a id="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-5" name="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-5" href="named-optional-template-parameters-compile-time.html#rest_code_5ca0f18c2f0247788dd1b524d3502e5d-5"></a><span class="k">struct</span><span class="w"> </span><span class="nc">value_conf_t</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">integral_constant</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-6" name="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-6" href="named-optional-template-parameters-compile-time.html#rest_code_5ca0f18c2f0247788dd1b524d3502e5d-6"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">type_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ID</span><span class="p">;</span>
<a id="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-7" name="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-7" href="named-optional-template-parameters-compile-time.html#rest_code_5ca0f18c2f0247788dd1b524d3502e5d-7"></a><span class="p">};</span>
<a id="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-8" name="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-8" href="named-optional-template-parameters-compile-time.html#rest_code_5ca0f18c2f0247788dd1b524d3502e5d-8"></a>
<a id="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-9" name="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-9" href="named-optional-template-parameters-compile-time.html#rest_code_5ca0f18c2f0247788dd1b524d3502e5d-9"></a><span class="k">template</span><span class="o">&lt;</span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="o">&gt;</span>
<a id="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-10" name="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-10" href="named-optional-template-parameters-compile-time.html#rest_code_5ca0f18c2f0247788dd1b524d3502e5d-10"></a><span class="k">struct</span><span class="w"> </span><span class="nc">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">value_conf_t</span><span class="o">&lt;</span><span class="n">a_id</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{};</span>
<a id="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-11" name="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-11" href="named-optional-template-parameters-compile-time.html#rest_code_5ca0f18c2f0247788dd1b524d3502e5d-11"></a>
<a id="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-12" name="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-12" href="named-optional-template-parameters-compile-time.html#rest_code_5ca0f18c2f0247788dd1b524d3502e5d-12"></a><span class="k">template</span><span class="o">&lt;</span><span class="kt">char</span><span class="w"> </span><span class="n">value</span><span class="o">&gt;</span>
<a id="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-13" name="rest_code_5ca0f18c2f0247788dd1b524d3502e5d-13" href="named-optional-template-parameters-compile-time.html#rest_code_5ca0f18c2f0247788dd1b524d3502e5d-13"></a><span class="k">struct</span><span class="w"> </span><span class="nc">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">value_conf_t</span><span class="o">&lt;</span><span class="n">b_id</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{};</span>
</pre></div>
<p>This make the next  parameters easier to describe and avoids small mistakes.</p>
<p>Making <em>get_value_char</em> could be achieved by replacing each <em>int</em> by <em>char</em> but this would create a lot of duplicated code. So instead of writing <em>get_value_char</em>, we will replace <em>get_value_int</em> with a generic <em>get_value</em> that is able to extract any integral value type:</p>
<div class="code"><pre class="code c++"><a id="rest_code_20669a7ca19b4c0f86bed576b544e375-1" name="rest_code_20669a7ca19b4c0f86bed576b544e375-1" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-2" name="rest_code_20669a7ca19b4c0f86bed576b544e375-2" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">get_value</span><span class="p">;</span>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-3" name="rest_code_20669a7ca19b4c0f86bed576b544e375-3" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-3"></a>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-4" name="rest_code_20669a7ca19b4c0f86bed576b544e375-4" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-4"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T2</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-5" name="rest_code_20669a7ca19b4c0f86bed576b544e375-5" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-5"></a><span class="k">struct</span><span class="w"> </span><span class="nc">get_value</span><span class="o">&lt;</span><span class="n">D</span><span class="p">,</span><span class="w"> </span><span class="n">T2</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-6" name="rest_code_20669a7ca19b4c0f86bed576b544e375-6" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-6"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D2</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T22</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">void</span><span class="o">&gt;</span>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-7" name="rest_code_20669a7ca19b4c0f86bed576b544e375-7" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-7"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">impl</span>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-8" name="rest_code_20669a7ca19b4c0f86bed576b544e375-8" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-8"></a><span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">integral_constant</span><span class="o">&lt;</span><span class="k">decltype</span><span class="p">(</span><span class="n">D</span><span class="o">::</span><span class="n">value</span><span class="p">),</span><span class="w"> </span><span class="n">get_value</span><span class="o">&lt;</span><span class="n">D</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{};</span>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-9" name="rest_code_20669a7ca19b4c0f86bed576b544e375-9" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-9"></a>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-10" name="rest_code_20669a7ca19b4c0f86bed576b544e375-10" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-10"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D2</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T22</span><span class="o">&gt;</span>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-11" name="rest_code_20669a7ca19b4c0f86bed576b544e375-11" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-11"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">impl</span><span class="w"> </span><span class="o">&lt;</span><span class="n">D2</span><span class="p">,</span><span class="w"> </span><span class="n">T22</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">enable_if_t</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">is_same</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D2</span><span class="o">::</span><span class="n">type_id</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T22</span><span class="o">::</span><span class="n">type_id</span><span class="o">&gt;::</span><span class="n">value</span><span class="o">&gt;&gt;</span>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-12" name="rest_code_20669a7ca19b4c0f86bed576b544e375-12" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-12"></a><span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">integral_constant</span><span class="o">&lt;</span><span class="k">decltype</span><span class="p">(</span><span class="n">D</span><span class="o">::</span><span class="n">value</span><span class="p">),</span><span class="w"> </span><span class="n">T22</span><span class="o">::</span><span class="n">value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{};</span>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-13" name="rest_code_20669a7ca19b4c0f86bed576b544e375-13" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-13"></a>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-14" name="rest_code_20669a7ca19b4c0f86bed576b544e375-14" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-14"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">impl</span><span class="o">&lt;</span><span class="n">D</span><span class="p">,</span><span class="w"> </span><span class="n">T2</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-15" name="rest_code_20669a7ca19b4c0f86bed576b544e375-15" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-15"></a><span class="p">};</span>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-16" name="rest_code_20669a7ca19b4c0f86bed576b544e375-16" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-16"></a>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-17" name="rest_code_20669a7ca19b4c0f86bed576b544e375-17" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-17"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D</span><span class="o">&gt;</span>
<a id="rest_code_20669a7ca19b4c0f86bed576b544e375-18" name="rest_code_20669a7ca19b4c0f86bed576b544e375-18" href="named-optional-template-parameters-compile-time.html#rest_code_20669a7ca19b4c0f86bed576b544e375-18"></a><span class="k">struct</span><span class="w"> </span><span class="nc">get_value</span><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">integral_constant</span><span class="o">&lt;</span><span class="k">decltype</span><span class="p">(</span><span class="n">D</span><span class="o">::</span><span class="n">value</span><span class="p">),</span><span class="w"> </span><span class="n">D</span><span class="o">::</span><span class="n">value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{};</span>
</pre></div>
<p>This code is almost the same as get_value_int except that the return type is deduced from the value of the parameters. I used <em>decltype</em> and <em>auto</em> to automatically gets the correct types for the values. This is the only thing that changed.</p>
<p>With that we are ready the parameter c as well:</p>
<div class="code"><pre class="code c++"><a id="rest_code_71bb6d4b5de3453aa8cf7a77e842b415-1" name="rest_code_71bb6d4b5de3453aa8cf7a77e842b415-1" href="named-optional-template-parameters-compile-time.html#rest_code_71bb6d4b5de3453aa8cf7a77e842b415-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_71bb6d4b5de3453aa8cf7a77e842b415-2" name="rest_code_71bb6d4b5de3453aa8cf7a77e842b415-2" href="named-optional-template-parameters-compile-time.html#rest_code_71bb6d4b5de3453aa8cf7a77e842b415-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">configurable_v2</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_71bb6d4b5de3453aa8cf7a77e842b415-3" name="rest_code_71bb6d4b5de3453aa8cf7a77e842b415-3" href="named-optional-template-parameters-compile-time.html#rest_code_71bb6d4b5de3453aa8cf7a77e842b415-3"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_value</span><span class="o">&lt;</span><span class="n">a</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_71bb6d4b5de3453aa8cf7a77e842b415-4" name="rest_code_71bb6d4b5de3453aa8cf7a77e842b415-4" href="named-optional-template-parameters-compile-time.html#rest_code_71bb6d4b5de3453aa8cf7a77e842b415-4"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_value</span><span class="o">&lt;</span><span class="n">b</span><span class="o">&lt;</span><span class="sc">'b'</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_71bb6d4b5de3453aa8cf7a77e842b415-5" name="rest_code_71bb6d4b5de3453aa8cf7a77e842b415-5" href="named-optional-template-parameters-compile-time.html#rest_code_71bb6d4b5de3453aa8cf7a77e842b415-5"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_value</span><span class="o">&lt;</span><span class="n">c</span><span class="o">&lt;</span><span class="n">type</span><span class="o">::</span><span class="n">BBB</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_71bb6d4b5de3453aa8cf7a77e842b415-6" name="rest_code_71bb6d4b5de3453aa8cf7a77e842b415-6" href="named-optional-template-parameters-compile-time.html#rest_code_71bb6d4b5de3453aa8cf7a77e842b415-6"></a>
<a id="rest_code_71bb6d4b5de3453aa8cf7a77e842b415-7" name="rest_code_71bb6d4b5de3453aa8cf7a77e842b415-7" href="named-optional-template-parameters-compile-time.html#rest_code_71bb6d4b5de3453aa8cf7a77e842b415-7"></a><span class="w">    </span><span class="c1">//Coming</span>
<a id="rest_code_71bb6d4b5de3453aa8cf7a77e842b415-8" name="rest_code_71bb6d4b5de3453aa8cf7a77e842b415-8" href="named-optional-template-parameters-compile-time.html#rest_code_71bb6d4b5de3453aa8cf7a77e842b415-8"></a><span class="p">};</span>
</pre></div>
</section><section id="extracting-boolean-flags"><h2>Extracting boolean flags</h2>
<p>The parameter d is a bit different since it is a boolean flag that puts directly the value to true. We could simply make a integral boolean value (and this would work), but here I needed a boolean flag for activating a feature deactivated by default.</p>
<p>Defining the parameter is easy:</p>
<div class="code"><pre class="code c++"><a id="rest_code_34a78ee5bd094010847503b94843e246-1" name="rest_code_34a78ee5bd094010847503b94843e246-1" href="named-optional-template-parameters-compile-time.html#rest_code_34a78ee5bd094010847503b94843e246-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">ID</span><span class="o">&gt;</span>
<a id="rest_code_34a78ee5bd094010847503b94843e246-2" name="rest_code_34a78ee5bd094010847503b94843e246-2" href="named-optional-template-parameters-compile-time.html#rest_code_34a78ee5bd094010847503b94843e246-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">basic_conf_t</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_34a78ee5bd094010847503b94843e246-3" name="rest_code_34a78ee5bd094010847503b94843e246-3" href="named-optional-template-parameters-compile-time.html#rest_code_34a78ee5bd094010847503b94843e246-3"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">type_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ID</span><span class="p">;</span>
<a id="rest_code_34a78ee5bd094010847503b94843e246-4" name="rest_code_34a78ee5bd094010847503b94843e246-4" href="named-optional-template-parameters-compile-time.html#rest_code_34a78ee5bd094010847503b94843e246-4"></a><span class="p">};</span>
<a id="rest_code_34a78ee5bd094010847503b94843e246-5" name="rest_code_34a78ee5bd094010847503b94843e246-5" href="named-optional-template-parameters-compile-time.html#rest_code_34a78ee5bd094010847503b94843e246-5"></a>
<a id="rest_code_34a78ee5bd094010847503b94843e246-6" name="rest_code_34a78ee5bd094010847503b94843e246-6" href="named-optional-template-parameters-compile-time.html#rest_code_34a78ee5bd094010847503b94843e246-6"></a><span class="k">struct</span><span class="w"> </span><span class="nc">d_id</span><span class="p">;</span>
<a id="rest_code_34a78ee5bd094010847503b94843e246-7" name="rest_code_34a78ee5bd094010847503b94843e246-7" href="named-optional-template-parameters-compile-time.html#rest_code_34a78ee5bd094010847503b94843e246-7"></a><span class="k">struct</span><span class="w"> </span><span class="nc">d</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">basic_conf_t</span><span class="o">&lt;</span><span class="n">d_id</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{};</span>
</pre></div>
<p>It is similar to the other parameters, except that it has no value. You'll see later in this article why type_id is necessary here.</p>
<p>To check if the flag is present, we'll write the is_present template:</p>
<div class="code"><pre class="code c++"><a id="rest_code_10b9702b4fb64144bf2b2f74535eb4ec-1" name="rest_code_10b9702b4fb64144bf2b2f74535eb4ec-1" href="named-optional-template-parameters-compile-time.html#rest_code_10b9702b4fb64144bf2b2f74535eb4ec-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T1</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_10b9702b4fb64144bf2b2f74535eb4ec-2" name="rest_code_10b9702b4fb64144bf2b2f74535eb4ec-2" href="named-optional-template-parameters-compile-time.html#rest_code_10b9702b4fb64144bf2b2f74535eb4ec-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">is_present</span><span class="p">;</span>
<a id="rest_code_10b9702b4fb64144bf2b2f74535eb4ec-3" name="rest_code_10b9702b4fb64144bf2b2f74535eb4ec-3" href="named-optional-template-parameters-compile-time.html#rest_code_10b9702b4fb64144bf2b2f74535eb4ec-3"></a>
<a id="rest_code_10b9702b4fb64144bf2b2f74535eb4ec-4" name="rest_code_10b9702b4fb64144bf2b2f74535eb4ec-4" href="named-optional-template-parameters-compile-time.html#rest_code_10b9702b4fb64144bf2b2f74535eb4ec-4"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T1</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T2</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_10b9702b4fb64144bf2b2f74535eb4ec-5" name="rest_code_10b9702b4fb64144bf2b2f74535eb4ec-5" href="named-optional-template-parameters-compile-time.html#rest_code_10b9702b4fb64144bf2b2f74535eb4ec-5"></a><span class="k">struct</span><span class="w"> </span><span class="nc">is_present</span><span class="o">&lt;</span><span class="n">T1</span><span class="p">,</span><span class="w"> </span><span class="n">T2</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">integral_constant</span><span class="o">&lt;</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">is_same</span><span class="o">&lt;</span><span class="n">T1</span><span class="p">,</span><span class="w"> </span><span class="n">T2</span><span class="o">&gt;::</span><span class="n">value</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">is_present</span><span class="o">&lt;</span><span class="n">T1</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{};</span>
<a id="rest_code_10b9702b4fb64144bf2b2f74535eb4ec-6" name="rest_code_10b9702b4fb64144bf2b2f74535eb4ec-6" href="named-optional-template-parameters-compile-time.html#rest_code_10b9702b4fb64144bf2b2f74535eb4ec-6"></a>
<a id="rest_code_10b9702b4fb64144bf2b2f74535eb4ec-7" name="rest_code_10b9702b4fb64144bf2b2f74535eb4ec-7" href="named-optional-template-parameters-compile-time.html#rest_code_10b9702b4fb64144bf2b2f74535eb4ec-7"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T1</span><span class="o">&gt;</span>
<a id="rest_code_10b9702b4fb64144bf2b2f74535eb4ec-8" name="rest_code_10b9702b4fb64144bf2b2f74535eb4ec-8" href="named-optional-template-parameters-compile-time.html#rest_code_10b9702b4fb64144bf2b2f74535eb4ec-8"></a><span class="k">struct</span><span class="w"> </span><span class="nc">is_present</span><span class="o">&lt;</span><span class="n">T1</span><span class="o">&gt;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">false_type</span><span class="w"> </span><span class="p">{};</span>
</pre></div>
<p>This time, the template is much easier. We simply need to iterate through all the types from the variadic template parameter and test if the type is present somewhere. Again, you can see that we used two partial template specialization to handle the different cases.</p>
<p>With this we can now get the value for D:</p>
<div class="code"><pre class="code c++"><a id="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-1" name="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-1" href="named-optional-template-parameters-compile-time.html#rest_code_f2cf171225174f6a9c42d2c5c4fc1233-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-2" name="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-2" href="named-optional-template-parameters-compile-time.html#rest_code_f2cf171225174f6a9c42d2c5c4fc1233-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">configurable_v2</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-3" name="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-3" href="named-optional-template-parameters-compile-time.html#rest_code_f2cf171225174f6a9c42d2c5c4fc1233-3"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_value</span><span class="o">&lt;</span><span class="n">a</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-4" name="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-4" href="named-optional-template-parameters-compile-time.html#rest_code_f2cf171225174f6a9c42d2c5c4fc1233-4"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_value</span><span class="o">&lt;</span><span class="n">b</span><span class="o">&lt;</span><span class="sc">'b'</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-5" name="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-5" href="named-optional-template-parameters-compile-time.html#rest_code_f2cf171225174f6a9c42d2c5c4fc1233-5"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_value</span><span class="o">&lt;</span><span class="n">c</span><span class="o">&lt;</span><span class="n">type</span><span class="o">::</span><span class="n">BBB</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-6" name="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-6" href="named-optional-template-parameters-compile-time.html#rest_code_f2cf171225174f6a9c42d2c5c4fc1233-6"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">is_present</span><span class="o">&lt;</span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-7" name="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-7" href="named-optional-template-parameters-compile-time.html#rest_code_f2cf171225174f6a9c42d2c5c4fc1233-7"></a>
<a id="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-8" name="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-8" href="named-optional-template-parameters-compile-time.html#rest_code_f2cf171225174f6a9c42d2c5c4fc1233-8"></a><span class="w">    </span><span class="c1">//Coming</span>
<a id="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-9" name="rest_code_f2cf171225174f6a9c42d2c5c4fc1233-9" href="named-optional-template-parameters-compile-time.html#rest_code_f2cf171225174f6a9c42d2c5c4fc1233-9"></a><span class="p">};</span>
</pre></div>
</section><section id="extracting-types"><h2>Extracting types</h2>
<p>The next parameter does not hold a value, but a type. It won't be an integral constant, but it will define a typedef value with the configured type:</p>
<div class="code"><pre class="code c++"><a id="rest_code_fbe8501563164d0f9950659e3d7cf9c2-1" name="rest_code_fbe8501563164d0f9950659e3d7cf9c2-1" href="named-optional-template-parameters-compile-time.html#rest_code_fbe8501563164d0f9950659e3d7cf9c2-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">ID</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="rest_code_fbe8501563164d0f9950659e3d7cf9c2-2" name="rest_code_fbe8501563164d0f9950659e3d7cf9c2-2" href="named-optional-template-parameters-compile-time.html#rest_code_fbe8501563164d0f9950659e3d7cf9c2-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">type_conf_t</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_fbe8501563164d0f9950659e3d7cf9c2-3" name="rest_code_fbe8501563164d0f9950659e3d7cf9c2-3" href="named-optional-template-parameters-compile-time.html#rest_code_fbe8501563164d0f9950659e3d7cf9c2-3"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">type_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ID</span><span class="p">;</span>
<a id="rest_code_fbe8501563164d0f9950659e3d7cf9c2-4" name="rest_code_fbe8501563164d0f9950659e3d7cf9c2-4" href="named-optional-template-parameters-compile-time.html#rest_code_fbe8501563164d0f9950659e3d7cf9c2-4"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="p">;</span>
<a id="rest_code_fbe8501563164d0f9950659e3d7cf9c2-5" name="rest_code_fbe8501563164d0f9950659e3d7cf9c2-5" href="named-optional-template-parameters-compile-time.html#rest_code_fbe8501563164d0f9950659e3d7cf9c2-5"></a><span class="p">};</span>
<a id="rest_code_fbe8501563164d0f9950659e3d7cf9c2-6" name="rest_code_fbe8501563164d0f9950659e3d7cf9c2-6" href="named-optional-template-parameters-compile-time.html#rest_code_fbe8501563164d0f9950659e3d7cf9c2-6"></a>
<a id="rest_code_fbe8501563164d0f9950659e3d7cf9c2-7" name="rest_code_fbe8501563164d0f9950659e3d7cf9c2-7" href="named-optional-template-parameters-compile-time.html#rest_code_fbe8501563164d0f9950659e3d7cf9c2-7"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="rest_code_fbe8501563164d0f9950659e3d7cf9c2-8" name="rest_code_fbe8501563164d0f9950659e3d7cf9c2-8" href="named-optional-template-parameters-compile-time.html#rest_code_fbe8501563164d0f9950659e3d7cf9c2-8"></a><span class="k">struct</span><span class="w"> </span><span class="nc">e</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">type_conf_t</span><span class="o">&lt;</span><span class="n">e_id</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{};</span>
</pre></div>
<p>You may think that the extracting will be very different, but in fact it very similar. And here it is:</p>
<div class="code"><pre class="code c++"><a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-1" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-1" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-2" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-2" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">get_type</span><span class="p">;</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-3" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-3" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-3"></a>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-4" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-4" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-4"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T2</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-5" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-5" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-5"></a><span class="k">struct</span><span class="w"> </span><span class="nc">get_type</span><span class="o">&lt;</span><span class="n">D</span><span class="p">,</span><span class="w"> </span><span class="n">T2</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-6" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-6" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-6"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D2</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T22</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">void</span><span class="o">&gt;</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-7" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-7" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-7"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">impl</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-8" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-8" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-8"></a><span class="w">        </span><span class="k">using</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">get_type</span><span class="o">&lt;</span><span class="n">D</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-9" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-9" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-9"></a><span class="w">    </span><span class="p">};</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-10" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-10" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-10"></a>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-11" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-11" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-11"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D2</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T22</span><span class="o">&gt;</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-12" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-12" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-12"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">impl</span><span class="w"> </span><span class="o">&lt;</span><span class="n">D2</span><span class="p">,</span><span class="w"> </span><span class="n">T22</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">enable_if_t</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">is_same</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D2</span><span class="o">::</span><span class="n">type_id</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T22</span><span class="o">::</span><span class="n">type_id</span><span class="o">&gt;::</span><span class="n">value</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-13" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-13" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-13"></a><span class="w">        </span><span class="k">using</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T22</span><span class="o">::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-14" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-14" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-14"></a><span class="w">    </span><span class="p">};</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-15" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-15" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-15"></a>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-16" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-16" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-16"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">impl</span><span class="o">&lt;</span><span class="n">D</span><span class="p">,</span><span class="w"> </span><span class="n">T2</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-17" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-17" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-17"></a><span class="p">};</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-18" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-18" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-18"></a>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-19" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-19" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-19"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D</span><span class="o">&gt;</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-20" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-20" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-20"></a><span class="k">struct</span><span class="w"> </span><span class="nc">get_type</span><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-21" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-21" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-21"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">D</span><span class="o">::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-22" name="rest_code_f22da8f50f7745a68c4ebbd15f222fc9-22" href="named-optional-template-parameters-compile-time.html#rest_code_f22da8f50f7745a68c4ebbd15f222fc9-22"></a><span class="p">};</span>
</pre></div>
<p>Every integral constant has been replaced with alias declaration (with <em>using</em>) and we need to use the <em>typename</em> disambiguator in from of X::value, but that's it :) We could probably have created an integral_type struct to simplify it a bit further, but I don't think that would change a lot. The code of the class follows the same changes:</p>
<div class="code"><pre class="code c++"><a id="rest_code_db2a660c0242448c9e16711a12c8a701-1" name="rest_code_db2a660c0242448c9e16711a12c8a701-1" href="named-optional-template-parameters-compile-time.html#rest_code_db2a660c0242448c9e16711a12c8a701-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_db2a660c0242448c9e16711a12c8a701-2" name="rest_code_db2a660c0242448c9e16711a12c8a701-2" href="named-optional-template-parameters-compile-time.html#rest_code_db2a660c0242448c9e16711a12c8a701-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">configurable_v2</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_db2a660c0242448c9e16711a12c8a701-3" name="rest_code_db2a660c0242448c9e16711a12c8a701-3" href="named-optional-template-parameters-compile-time.html#rest_code_db2a660c0242448c9e16711a12c8a701-3"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_value</span><span class="o">&lt;</span><span class="n">a</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_db2a660c0242448c9e16711a12c8a701-4" name="rest_code_db2a660c0242448c9e16711a12c8a701-4" href="named-optional-template-parameters-compile-time.html#rest_code_db2a660c0242448c9e16711a12c8a701-4"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_value</span><span class="o">&lt;</span><span class="n">b</span><span class="o">&lt;</span><span class="sc">'b'</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_db2a660c0242448c9e16711a12c8a701-5" name="rest_code_db2a660c0242448c9e16711a12c8a701-5" href="named-optional-template-parameters-compile-time.html#rest_code_db2a660c0242448c9e16711a12c8a701-5"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_value</span><span class="o">&lt;</span><span class="n">c</span><span class="o">&lt;</span><span class="n">type</span><span class="o">::</span><span class="n">BBB</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_db2a660c0242448c9e16711a12c8a701-6" name="rest_code_db2a660c0242448c9e16711a12c8a701-6" href="named-optional-template-parameters-compile-time.html#rest_code_db2a660c0242448c9e16711a12c8a701-6"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">is_present</span><span class="o">&lt;</span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_db2a660c0242448c9e16711a12c8a701-7" name="rest_code_db2a660c0242448c9e16711a12c8a701-7" href="named-optional-template-parameters-compile-time.html#rest_code_db2a660c0242448c9e16711a12c8a701-7"></a>
<a id="rest_code_db2a660c0242448c9e16711a12c8a701-8" name="rest_code_db2a660c0242448c9e16711a12c8a701-8" href="named-optional-template-parameters-compile-time.html#rest_code_db2a660c0242448c9e16711a12c8a701-8"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">get_type</span><span class="o">&lt;</span><span class="n">e</span><span class="o">&lt;</span><span class="n">watcher_1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_db2a660c0242448c9e16711a12c8a701-9" name="rest_code_db2a660c0242448c9e16711a12c8a701-9" href="named-optional-template-parameters-compile-time.html#rest_code_db2a660c0242448c9e16711a12c8a701-9"></a>
<a id="rest_code_db2a660c0242448c9e16711a12c8a701-10" name="rest_code_db2a660c0242448c9e16711a12c8a701-10" href="named-optional-template-parameters-compile-time.html#rest_code_db2a660c0242448c9e16711a12c8a701-10"></a><span class="w">    </span><span class="c1">//Coming</span>
<a id="rest_code_db2a660c0242448c9e16711a12c8a701-11" name="rest_code_db2a660c0242448c9e16711a12c8a701-11" href="named-optional-template-parameters-compile-time.html#rest_code_db2a660c0242448c9e16711a12c8a701-11"></a><span class="p">};</span>
</pre></div>
</section><section id="extracting-template-types"><h2>Extracting template types</h2>
<p>The last parameter is not a type but a template, so there are some slight changes necessary to extract them. First, let's take a look at the parameter definition:</p>
<div class="code"><pre class="code c++"><a id="rest_code_7666280159724fe89d65952e3b569a60-1" name="rest_code_7666280159724fe89d65952e3b569a60-1" href="named-optional-template-parameters-compile-time.html#rest_code_7666280159724fe89d65952e3b569a60-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">ID</span><span class="p">,</span><span class="w"> </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="o">&gt;</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="rest_code_7666280159724fe89d65952e3b569a60-2" name="rest_code_7666280159724fe89d65952e3b569a60-2" href="named-optional-template-parameters-compile-time.html#rest_code_7666280159724fe89d65952e3b569a60-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">template_type_conf_t</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_7666280159724fe89d65952e3b569a60-3" name="rest_code_7666280159724fe89d65952e3b569a60-3" href="named-optional-template-parameters-compile-time.html#rest_code_7666280159724fe89d65952e3b569a60-3"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">type_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ID</span><span class="p">;</span>
<a id="rest_code_7666280159724fe89d65952e3b569a60-4" name="rest_code_7666280159724fe89d65952e3b569a60-4" href="named-optional-template-parameters-compile-time.html#rest_code_7666280159724fe89d65952e3b569a60-4"></a>
<a id="rest_code_7666280159724fe89d65952e3b569a60-5" name="rest_code_7666280159724fe89d65952e3b569a60-5" href="named-optional-template-parameters-compile-time.html#rest_code_7666280159724fe89d65952e3b569a60-5"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">C</span><span class="o">&gt;</span>
<a id="rest_code_7666280159724fe89d65952e3b569a60-6" name="rest_code_7666280159724fe89d65952e3b569a60-6" href="named-optional-template-parameters-compile-time.html#rest_code_7666280159724fe89d65952e3b569a60-6"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="o">&lt;</span><span class="n">C</span><span class="o">&gt;</span><span class="p">;</span>
<a id="rest_code_7666280159724fe89d65952e3b569a60-7" name="rest_code_7666280159724fe89d65952e3b569a60-7" href="named-optional-template-parameters-compile-time.html#rest_code_7666280159724fe89d65952e3b569a60-7"></a><span class="p">};</span>
<a id="rest_code_7666280159724fe89d65952e3b569a60-8" name="rest_code_7666280159724fe89d65952e3b569a60-8" href="named-optional-template-parameters-compile-time.html#rest_code_7666280159724fe89d65952e3b569a60-8"></a>
<a id="rest_code_7666280159724fe89d65952e3b569a60-9" name="rest_code_7666280159724fe89d65952e3b569a60-9" href="named-optional-template-parameters-compile-time.html#rest_code_7666280159724fe89d65952e3b569a60-9"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="o">&gt;</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="rest_code_7666280159724fe89d65952e3b569a60-10" name="rest_code_7666280159724fe89d65952e3b569a60-10" href="named-optional-template-parameters-compile-time.html#rest_code_7666280159724fe89d65952e3b569a60-10"></a><span class="k">struct</span><span class="w"> </span><span class="nc">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">template_type_conf_t</span><span class="o">&lt;</span><span class="n">f_id</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{};</span>
</pre></div>
<p>Here instead of taking a simple type, we take a type template with one template parameter. This design has a great limitations. It won't be possible to use it for template that takes more than one template parameter. You have to create an extract template for each possible combination that you want to handle. In my case, I only had the case of a template with one template parameter, but if you have several combination, you'll have to write more code. It is quite simple code, since the adaptations are minor, but it is still tedious. Here is the <em>get_template_type</em> template:</p>
<div class="code"><pre class="code c++"><a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-1" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-1" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-2" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-2" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">get_template_type</span><span class="p">;</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-3" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-3" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-3"></a>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-4" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-4" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-4"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T2</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-5" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-5" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-5"></a><span class="k">struct</span><span class="w"> </span><span class="nc">get_template_type</span><span class="o">&lt;</span><span class="n">D</span><span class="p">,</span><span class="w"> </span><span class="n">T2</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-6" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-6" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-6"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D2</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T22</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">void</span><span class="o">&gt;</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-7" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-7" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-7"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">impl</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-8" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-8" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-8"></a><span class="w">        </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">C</span><span class="o">&gt;</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-9" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-9" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-9"></a><span class="w">        </span><span class="k">using</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">get_template_type</span><span class="o">&lt;</span><span class="n">D</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="k">template</span><span class="w"> </span><span class="n">value</span><span class="o">&lt;</span><span class="n">C</span><span class="o">&gt;</span><span class="p">;</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-10" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-10" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-10"></a><span class="w">    </span><span class="p">};</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-11" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-11" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-11"></a>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-12" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-12" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-12"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D2</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T22</span><span class="o">&gt;</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-13" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-13" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-13"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">impl</span><span class="w"> </span><span class="o">&lt;</span><span class="n">D2</span><span class="p">,</span><span class="w"> </span><span class="n">T22</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">enable_if_t</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">is_same</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D2</span><span class="o">::</span><span class="n">type_id</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T22</span><span class="o">::</span><span class="n">type_id</span><span class="o">&gt;::</span><span class="n">value</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-14" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-14" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-14"></a><span class="w">        </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">C</span><span class="o">&gt;</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-15" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-15" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-15"></a><span class="w">        </span><span class="k">using</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T22</span><span class="o">::</span><span class="k">template</span><span class="w"> </span><span class="n">value</span><span class="o">&lt;</span><span class="n">C</span><span class="o">&gt;</span><span class="p">;</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-16" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-16" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-16"></a><span class="w">    </span><span class="p">};</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-17" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-17" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-17"></a>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-18" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-18" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-18"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">C</span><span class="o">&gt;</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-19" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-19" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-19"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">impl</span><span class="o">&lt;</span><span class="n">D</span><span class="p">,</span><span class="w"> </span><span class="n">T2</span><span class="o">&gt;::</span><span class="k">template</span><span class="w"> </span><span class="n">value</span><span class="o">&lt;</span><span class="n">C</span><span class="o">&gt;</span><span class="p">;</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-20" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-20" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-20"></a><span class="p">};</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-21" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-21" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-21"></a>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-22" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-22" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-22"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">D</span><span class="o">&gt;</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-23" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-23" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-23"></a><span class="k">struct</span><span class="w"> </span><span class="nc">get_template_type</span><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-24" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-24" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-24"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">C</span><span class="o">&gt;</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-25" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-25" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-25"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">D</span><span class="o">::</span><span class="k">template</span><span class="w"> </span><span class="n">value</span><span class="o">&lt;</span><span class="n">C</span><span class="o">&gt;</span><span class="p">;</span>
<a id="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-26" name="rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-26" href="named-optional-template-parameters-compile-time.html#rest_code_4f0b640fa00d4dd9a88ca0f84e6b6344-26"></a><span class="p">};</span>
</pre></div>
<p>Again, there are only few changes. Every previous alias declaration is now a template alias declaration and we have to use <em>template</em> disambiguator in front of value. We now have the final piece to write the configurable_v2 class:</p>
<div class="code"><pre class="code c++"><a id="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-1" name="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-1" href="named-optional-template-parameters-compile-time.html#rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-2" name="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-2" href="named-optional-template-parameters-compile-time.html#rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">configurable_v2</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-3" name="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-3" href="named-optional-template-parameters-compile-time.html#rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-3"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_value</span><span class="o">&lt;</span><span class="n">a</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-4" name="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-4" href="named-optional-template-parameters-compile-time.html#rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-4"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_value</span><span class="o">&lt;</span><span class="n">b</span><span class="o">&lt;</span><span class="sc">'b'</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-5" name="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-5" href="named-optional-template-parameters-compile-time.html#rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-5"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_value</span><span class="o">&lt;</span><span class="n">c</span><span class="o">&lt;</span><span class="n">type</span><span class="o">::</span><span class="n">BBB</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-6" name="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-6" href="named-optional-template-parameters-compile-time.html#rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-6"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">is_present</span><span class="o">&lt;</span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-7" name="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-7" href="named-optional-template-parameters-compile-time.html#rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-7"></a>
<a id="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-8" name="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-8" href="named-optional-template-parameters-compile-time.html#rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-8"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">get_type</span><span class="o">&lt;</span><span class="n">e</span><span class="o">&lt;</span><span class="n">watcher_1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-9" name="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-9" href="named-optional-template-parameters-compile-time.html#rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-9"></a>
<a id="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-10" name="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-10" href="named-optional-template-parameters-compile-time.html#rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-10"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">C</span><span class="o">&gt;</span>
<a id="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-11" name="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-11" href="named-optional-template-parameters-compile-time.html#rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-11"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">get_template_type</span><span class="o">&lt;</span><span class="n">f</span><span class="o">&lt;</span><span class="n">trainer_1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="k">template</span><span class="w"> </span><span class="n">value</span><span class="o">&lt;</span><span class="n">C</span><span class="o">&gt;</span><span class="p">;</span>
<a id="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-12" name="rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-12" href="named-optional-template-parameters-compile-time.html#rest_code_c0a03193b25f4ff5a2b8fbdff6c49e01-12"></a><span class="p">};</span>
</pre></div>
</section><section id="validating-parameter-rules"><h2>Validating parameter rules</h2>
<p>If you have more parameters and several classes that are configured in this manner, the user may use a wrong parameter in the list. In that case, nothing will happen, the parameter will simply be ignored. Sometimes, this behavior is acceptable, but sometimes it is better to make the code invalid. That's what we are going to do here by specifying a list of valid parameters and using static_assert to ensure this condition.</p>
<p>Here is the assertion:</p>
<div class="code"><pre class="code c++"><a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-1" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-1" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-2" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-2" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">configurable_v2</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-3" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-3" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-3"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_value</span><span class="o">&lt;</span><span class="n">a</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-4" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-4" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-4"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_value</span><span class="o">&lt;</span><span class="n">b</span><span class="o">&lt;</span><span class="sc">'b'</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-5" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-5" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-5"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_value</span><span class="o">&lt;</span><span class="n">c</span><span class="o">&lt;</span><span class="n">type</span><span class="o">::</span><span class="n">BBB</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-6" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-6" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-6"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">is_present</span><span class="o">&lt;</span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-7" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-7" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-7"></a>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-8" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-8" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-8"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">get_type</span><span class="o">&lt;</span><span class="n">e</span><span class="o">&lt;</span><span class="n">watcher_1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-9" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-9" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-9"></a>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-10" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-10" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-10"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">C</span><span class="o">&gt;</span>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-11" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-11" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-11"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">get_template_type</span><span class="o">&lt;</span><span class="n">f</span><span class="o">&lt;</span><span class="n">trainer_1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="k">template</span><span class="w"> </span><span class="n">value</span><span class="o">&lt;</span><span class="n">C</span><span class="o">&gt;</span><span class="p">;</span>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-12" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-12" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-12"></a>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-13" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-13" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-13"></a><span class="w">    </span><span class="k">static_assert</span><span class="p">(</span>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-14" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-14" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-14"></a><span class="w">        </span><span class="n">is_valid</span><span class="o">&lt;</span><span class="n">tmp_list</span><span class="o">&lt;</span><span class="n">a_id</span><span class="p">,</span><span class="w"> </span><span class="n">b_id</span><span class="p">,</span><span class="w"> </span><span class="n">c_id</span><span class="p">,</span><span class="w"> </span><span class="n">d_id</span><span class="p">,</span><span class="w"> </span><span class="n">e_id</span><span class="p">,</span><span class="w"> </span><span class="n">f_id</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">,</span>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-15" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-15" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-15"></a><span class="w">        </span><span class="s">"Invalid parameters type"</span><span class="p">);</span>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-16" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-16" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-16"></a>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-17" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-17" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-17"></a><span class="w">    </span><span class="c1">//Something useful</span>
<a id="rest_code_fde73817980b4bacb90e6d90f760b4fc-18" name="rest_code_fde73817980b4bacb90e6d90f760b4fc-18" href="named-optional-template-parameters-compile-time.html#rest_code_fde73817980b4bacb90e6d90f760b4fc-18"></a><span class="p">};</span>
</pre></div>
<p>Since the is_valid traits needs two variadic list of parameters, we have to encapsulate list of valid types in another structure (<em>tmp_list</em>) to separate the two sets. Here is the implementation of the validation:</p>
<div class="code"><pre class="code c++"><a id="rest_code_b303c618f111449f9d404a70b3560fa6-1" name="rest_code_b303c618f111449f9d404a70b3560fa6-1" href="named-optional-template-parameters-compile-time.html#rest_code_b303c618f111449f9d404a70b3560fa6-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Valid</span><span class="o">&gt;</span>
<a id="rest_code_b303c618f111449f9d404a70b3560fa6-2" name="rest_code_b303c618f111449f9d404a70b3560fa6-2" href="named-optional-template-parameters-compile-time.html#rest_code_b303c618f111449f9d404a70b3560fa6-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">tmp_list</span><span class="w"> </span><span class="p">{</span>
<a id="rest_code_b303c618f111449f9d404a70b3560fa6-3" name="rest_code_b303c618f111449f9d404a70b3560fa6-3" href="named-optional-template-parameters-compile-time.html#rest_code_b303c618f111449f9d404a70b3560fa6-3"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="rest_code_b303c618f111449f9d404a70b3560fa6-4" name="rest_code_b303c618f111449f9d404a70b3560fa6-4" href="named-optional-template-parameters-compile-time.html#rest_code_b303c618f111449f9d404a70b3560fa6-4"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">contains</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">integral_constant</span><span class="o">&lt;</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="n">is_present</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">::</span><span class="n">type_id</span><span class="p">,</span><span class="w"> </span><span class="n">Valid</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{};</span>
<a id="rest_code_b303c618f111449f9d404a70b3560fa6-5" name="rest_code_b303c618f111449f9d404a70b3560fa6-5" href="named-optional-template-parameters-compile-time.html#rest_code_b303c618f111449f9d404a70b3560fa6-5"></a><span class="p">};</span>
<a id="rest_code_b303c618f111449f9d404a70b3560fa6-6" name="rest_code_b303c618f111449f9d404a70b3560fa6-6" href="named-optional-template-parameters-compile-time.html#rest_code_b303c618f111449f9d404a70b3560fa6-6"></a>
<a id="rest_code_b303c618f111449f9d404a70b3560fa6-7" name="rest_code_b303c618f111449f9d404a70b3560fa6-7" href="named-optional-template-parameters-compile-time.html#rest_code_b303c618f111449f9d404a70b3560fa6-7"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">L</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_b303c618f111449f9d404a70b3560fa6-8" name="rest_code_b303c618f111449f9d404a70b3560fa6-8" href="named-optional-template-parameters-compile-time.html#rest_code_b303c618f111449f9d404a70b3560fa6-8"></a><span class="k">struct</span><span class="w"> </span><span class="nc">is_valid</span><span class="p">;</span>
<a id="rest_code_b303c618f111449f9d404a70b3560fa6-9" name="rest_code_b303c618f111449f9d404a70b3560fa6-9" href="named-optional-template-parameters-compile-time.html#rest_code_b303c618f111449f9d404a70b3560fa6-9"></a>
<a id="rest_code_b303c618f111449f9d404a70b3560fa6-10" name="rest_code_b303c618f111449f9d404a70b3560fa6-10" href="named-optional-template-parameters-compile-time.html#rest_code_b303c618f111449f9d404a70b3560fa6-10"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">L</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T1</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="rest_code_b303c618f111449f9d404a70b3560fa6-11" name="rest_code_b303c618f111449f9d404a70b3560fa6-11" href="named-optional-template-parameters-compile-time.html#rest_code_b303c618f111449f9d404a70b3560fa6-11"></a><span class="k">struct</span><span class="w"> </span><span class="nc">is_valid</span><span class="w"> </span><span class="o">&lt;</span><span class="n">L</span><span class="p">,</span><span class="w"> </span><span class="n">T1</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">integral_constant</span><span class="o">&lt;</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="n">L</span><span class="o">::</span><span class="k">template</span><span class="w"> </span><span class="n">contains</span><span class="o">&lt;</span><span class="n">T1</span><span class="o">&gt;::</span><span class="n">value</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">is_valid</span><span class="o">&lt;</span><span class="n">L</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="o">&gt;::</span><span class="n">value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{};</span>
<a id="rest_code_b303c618f111449f9d404a70b3560fa6-12" name="rest_code_b303c618f111449f9d404a70b3560fa6-12" href="named-optional-template-parameters-compile-time.html#rest_code_b303c618f111449f9d404a70b3560fa6-12"></a>
<a id="rest_code_b303c618f111449f9d404a70b3560fa6-13" name="rest_code_b303c618f111449f9d404a70b3560fa6-13" href="named-optional-template-parameters-compile-time.html#rest_code_b303c618f111449f9d404a70b3560fa6-13"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">L</span><span class="o">&gt;</span>
<a id="rest_code_b303c618f111449f9d404a70b3560fa6-14" name="rest_code_b303c618f111449f9d404a70b3560fa6-14" href="named-optional-template-parameters-compile-time.html#rest_code_b303c618f111449f9d404a70b3560fa6-14"></a><span class="k">struct</span><span class="w"> </span><span class="nc">is_valid</span><span class="w"> </span><span class="o">&lt;</span><span class="n">L</span><span class="o">&gt;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">true_type</span><span class="w"> </span><span class="p">{};</span>
</pre></div>
<p>The struct tmp_list has a single inner class (<em>contains</em>) that test if a given type is present in the list. For this, we reuse the is_present template that we created when extracting boolean flag. The <em>is_valid</em> template simply test that each parameter is present in the <em>tmp_list</em>.</p>
<p>Validation could also be made so that no parameters could be present twice, but I will put that aside for now.</p>
</section><section id="conclusion"><h2>Conclusion</h2>
<p>Here it is :)</p>
<p>We now have a set of template that allow us to configure a class at compile-time with named, optional, template parameters, with default and in any order. I personally thinks that this is a great way to configure a class at compile-time and it is also another proof of the power of C++. If you think that the code is complicated, don't forget that this is only the library code, the client code on contrary is at least as clear as the original version and even has several advantages.</p>
<p>I hope that this article interested you and that you learned something.</p>
<p>The code of this article is available on Github: <a class="reference external" href="https://github.com/wichtounet/articles/blob/master/src/named_template_par/configurable.cpp">https://github.com/wichtounet/articles/blob/master/src/named_template_par/configurable.cpp</a>
It has been tested on Clang 3.5 and GCC 4.9.1.</p>
</section><h3>Related articles</h3>
    

    <li><a href="../07/simulate-static_if-with-c11c14.html">Simulate static_if with C++11/C++14</a></li>
<li><a href="../../2017/08/simplify-your-type-traits-with-c++14-variable-templates.html">Simplify your type traits with C++14 variable templates</a></li>
<li><a href="../../2014/07/compile-integer-square-roots-at-compile-time-in-cpp.html">Compile integer Square Roots at compile-time in C++</a></li>
<li><a href="../../2016/02/use-templight-and-templar-to-debug-cpp-templates.html">Use templight and Templar to debug C++ templates</a></li>
<li><a href="../../2018/02/c++17-migration-of-expression-templates-library-etl.html">C++17 Migration of Expression Templates Library (ETL)</a></li>
<li><a href="../05/cpp17-fold-expressions.html">C++17 Fold Expressions</a></li>


    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/c%2B%2B.html" rel="tag">C++</a></li>
            <li><a class="tag p-category" href="../../../categories/c%2B%2B11.html" rel="tag">C++11</a></li>
            <li><a class="tag p-category" href="../../../categories/c%2B%2B14.html" rel="tag">C++14</a></li>
            <li><a class="tag p-category" href="../../../categories/templates.html" rel="tag">templates</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../../2014/10/sonarqube-inspections-for-cpp-projects.html" rel="prev" title="SonarQube inspections for C++ projects">Previous post</a>
            </li>
            <li class="next">
                <a href="how-to-speed-up-raid-5-6-growing-with-mdadm.html" rel="next" title="How to speed up RAID (5-6) growing with mdadm ?">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
    
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="https://baptiste-wicht.com/posts/2015/03/named-optional-template-parameters-compile-time.html",
        disqus_title="Named Optional Template parameters to configure a class at compile-time",
        disqus_identifier="cache/posts/2015/03/named-optional-template-parameters-to-configure-a-class-at-compile-time.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents  2023         <a href="mailto:baptistewicht@gmail.com">Baptiste Wicht</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         - License: 
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="../../../assets/img/cc.png"></a>
            
        </footer>
</div>
</div>


            <script src="../../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
