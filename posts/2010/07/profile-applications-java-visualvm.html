<!DOCTYPE html>
<html lang=en><head><link href=favicon.ico rel=icon type=image/x-icon><meta name=viewport content="width=device-width, initial-scale=1.0"><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=author content="Baptiste Wicht"><title>Profile your applications with Java VisualVM | @Blog("Baptiste Wicht")</title><link href=../../../assets/css/all-nocdn.css rel=stylesheet type=text/css><link rel=canonical href=http://wichtounet.github.io/posts/2010/07/profile-applications-java-visualvm.html><link rel=alternate type=application/rss+xml title=RSS href=../../../rss.xml></head><body><div class=social_container> <div class=social_container_gplus> <a target=_blank title="Share on Google+" href="https://plusone.google.com/_/+1/confirm?hl=en&amp;url=http://wichtounet.github.io/posts/2010/07/profile-applications-java-visualvm.html"><img src=../../../assets/img/google_plus.png></a> </div> <div class=social_container_facebook> <a target=_blank title="Share on Facebook" href="http://www.facebook.com/sharer/sharer.php?u=#url"><img src=../../../assets/img/facebook.png></a> </div> <div class=social_container_twitter> <a target=_blank title="Tweet on Twitter" href="http://twitter.com/home?status=#url"><img src=../../../assets/img/twitter.svg></a> </div></div><nav class="navbar navbar-inverse navbar-fixed-top" role=navigation> <div class=container-fluid> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-ex1-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=http://wichtounet.github.io/>@Blog("Baptiste Wicht")</a> </div> <div class="collapse navbar-collapse navbar-ex1-collapse"> <ul class="nav navbar-nav"> <li><a href=../../../stories/about.html>About</a> </li><li><a href=../../../stories/publications.html>Publications</a> </li><li><a href=../../../stories/donate.html>Donate</a> </li><li><a href=../../../stories/contact.html>Contact</a> </li><li><a href=../../../stories/faq.html>FAQ</a> </li><li><a href=../../../stories/legal.html>Legal</a> </li><li><a href=../../../archive.html>Archives</a> </li><li><a href=../../../categories/index.html>Tags</a> </li><li><a href=../../../rss.xml>RSS</a> </li></ul> <span class="navbar-form pull-left"> <form action=../../../stories/search.html> <input type=text name=q id=tipue_search_input> </form> </span> <ul class="nav navbar-nav navbar-right"> <li> <a target=_blank title="Follow @wichtounet on Twitter" href=https://twitter.com/wichtounewichtounet> <img src=../../../assets/img/twitter.svg alt="Follow @wichtounet on Twitter"> </a> </li> <li> <a target=_blank title="Follow +BaptisteWicht on Google+" href=https://plus.google.com/+BaptisteWicht> <img src=../../../assets/img/google_plus.svg alt="Follow +BaptisteWicht on Google+"> </a> </li> </ul> </div> </div></nav><div class=body-container> <div class=left-sidebar> <div class=left-sidebar-widget> <div class=left-sidebar-widget-content> <div class=g-person data-width=275 data-href=//plus.google.com/u/0/103113673902796202116 data-theme=dark data-layout=landscape data-rel=author></div> </div> </div> <div class=left-sidebar-widget> <h3>Related posts</h3> <div class=left-sidebar-widget-content> <ol><li><a href=../../2009/12/swing-user-interface-jtable.html>Creation of Swing User Interface : Tables (JTable)</a></li><li><a href=../02/modular-application-jtheque-core-2-0-3.html>Develop a modular application with JTheque Core 2.0.3</a></li><li><a href=../01/jr-introduction.html>Introduction to JR programming language</a></li><li><a href=discover-java-visualvm-1-3.html>Discover Java VisualVM 1.3</a></li><li><a href=../../2013/06/improving-eddic-boost-spirit-parser-performances.html>Improving eddic Boost Spirit parser performances</a></li></ol> </div> </div> <div class=left-sidebar-widget> <h3>Recent comments</h3> <div class=left-sidebar-widget-content> <div id=recentcomments class=dsq-widget> <script type=text/javascript src="http://blogwichtounet.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=28&amp;excerpt_length=50"></script> </div> </div> </div> <div class=left-sidebar-widget> <h3>Popular posts</h3> <div class=left-sidebar-widget-content> <div id=popularthreads class=dsq-widget> <script type=text/javascript src="http://blogwichtounet.disqus.com/popular_threads_widget.js?num_items=5&amp;days_back=90"></script> </div> </div> </div> <div class=left-sidebar-widget> <h3>Blogroll</h3> <div class=left-sidebar-widget-content> <ul> <li><a target=_blank href=http://www.asjava.com/>AsJava.com : Java Tutorial</a></li> <li><a target=_blank href=http://www.mkyong.com/>Mkyong : Java Tutorials</a></li> </ul> </div> </div> </div> <div class=container> <div class=body-content style="margin-top: -75px;"> <div class=row> <article class="postbox post-text"> <div class=h-entry itemscope=itemscope itemtype=http://schema.org/Article> <h1 class=p-name itemprop="headline name">Profile your applications with Java VisualVM</h1> <hr> <small> Posted: <time class="published dt-published" datetime=2010-07-13T01:08:22+02:00 itemprop=datePublished>2010-07-13 01:08</time>   |   More posts about <span itemprop=keywords> <a class="tag p-category" href=../../../categories/java.html><span class="badge badge-info">Java</span></a> <a class="tag p-category" href=../../../categories/performances.html><span class="badge badge-info">Performances</span></a> <a class="tag p-category" href=../../../categories/tools.html><span class="badge badge-info">Tools</span></a> </span> </small> <hr> <div class=e-content itemprop="articleBody text"> <div><p>When you need to discover what part of an application consume the more CPU or Memory, you must use a profiler to do that.</p><p>One profiler, packed by default with the Sun JDK is Java VisualVM. This profiler is really simple to use and really powerful.</p><p><a href=../../../wp-content/uploads/2010/07/VisualVM-Startup.png><img class="size-medium wp-image-718 " title="VisualVM start logo" src=../../../wp-content/uploads/2010/07/VisualVM-Startup-300x175.png alt="VisualVM start logo" width=300 height=175></a></p><p>In this post, we'll see how to install it and use it to profile an application.</p><p>Normally, to install it, you have nothing to do, because, it's installed with the JDK. But in several Unix system, like Ubuntu, this is not the case. If you want to install it, just use apt-get (or aptitude) :</p><p></p><pre>sudo apt-get install visualvm</pre><p>To launch it just launch jvisualvm (jvisualvm.exe in the bin directory of the jdk for Windows).</p><p>That will open the following window :</p><p><a href=../../../wp-content/uploads/2010/07/VisualVM-Start.png><img class="size-medium wp-image-719" title="VisualVM Main Frame" src=../../../wp-content/uploads/2010/07/VisualVM-Start-300x272.png alt="VisualVM Main Frame" width=300 height=272></a></p><p>There is not a lot of interesting things to see here. To profile a application, you just have to launch it and VisualVM will detect it as launched :</p><p><a href=../../../wp-content/uploads/2010/07/VisualVM-Application.png><img class="size-medium wp-image-720" title="VisualVm The application" src=../../../wp-content/uploads/2010/07/VisualVM-Application-300x213.png alt="VisualVm The application" width=300 height=213></a></p><p>After that, you just have to double click to view information about your running application. You've four tabs available for your applications (Overview, Monitor, Threads, Profiler). We'll see all that 4 tabs. First of all, the default tab, the overview :</p><p><a href=../../../wp-content/uploads/2010/07/VisualVM-Overview.png><img class="size-medium wp-image-721" title="VisualVM Overview tab" src=../../../wp-content/uploads/2010/07/VisualVM-Overview-300x223.png alt="VisualVM Overview tab" width=300 height=223></a></p><p>This tab contains the main informations about the launched application. You can see the main class, the arguments of the command line, the JVM arguments. You can also see what kind of JVM is running your program and where the JVM is located.  And you can see all the properties set in the program.</p><p>A more interesting tab is the "Monitor" tab :</p><p><a href=../../../wp-content/uploads/2010/07/VisualVM-Monitor.png><img class="size-medium wp-image-727 " title="VisualVM Monitor tab" src=../../../wp-content/uploads/2010/07/VisualVM-Monitor-300x294.png alt="VisualVM Monitor tab" width=300 height=294></a></p><p>This tab follow the CPU and Memory usages of your applications. You have 4 graphs in this view. The first one, from left to right, up to down, display the CPU usage and the Garbage Collector CPU usage. The second graph display the usage of the heap space and the PermGen space. The next graph display the total number of classes loaded in the application and the last one displays the number of threads currently running. With these graphs, you can see if your application take too CPU or if there is too memory used by the application.</p><p>The third tab provide some details about Threads :</p><p><a href=../../../wp-content/uploads/2010/07/VisualVM-Threads.png><img class="size-medium wp-image-728" title="VisualVM Threads tab" src=../../../wp-content/uploads/2010/07/VisualVM-Threads-300x294.png alt="VisualVM Threads tab" width=300 height=294></a></p><p>In this view, you can see how the different threads of the application are changing state and how they evolve. You can also see the time each time pass in each state and you can have details about the threads you want.</p><p>And now, I think the most interesting tab, is the Profiler one :</p><p><a href=../../../wp-content/uploads/2010/07/VisualVM-Profiler.png><img class="size-medium wp-image-729" title="VisualVM Profiler tab " src=../../../wp-content/uploads/2010/07/VisualVM-Profiler-300x292.png alt="VisualVM Profiler tab " width=300 height=292></a></p><p>When you open this tab first, it contains no information at all. You must start one kind of profiling before seeing informations. We'll start with CPU profiling. Just click on the CPU button the instrumentation will start. During the instrumentation, the application will be blocked. After the instrumentation, you can access the application again and you will see the results of the profiling be displayed in the table. Of course the profiling has an overhead on your application. Normally it's not visible, but for certain applications, you can loose a lot of fluidity. Here are the results I have obtained with my simple application :</p><p><a href=../../../wp-content/uploads/2010/07/VisualVM-Profiler-CPU.png><img class="size-medium wp-image-730" title="VisualVM CPU profiling" src=../../../wp-content/uploads/2010/07/VisualVM-Profiler-CPU-300x294.png alt="VisualVM CPU profiling" width=300 height=294></a></p><p>In my example, we can see that the waitForTimeout method takes 81.6% of the CPU time. We can also see that the notifyDecision and getSensor methods are the two next most CPU consuming methods, perhaps, it will be interesting to optimize them.  You can also look at the number of invocations of each, perhaps, you'll find a method that is invoked too much time.</p><p>The next profiling we can do is the Memory profiling. Here again, you have to start the profiling and the instrumentation will start and during this, the application will be frozen. Here are the results for my application :</p><p><a href=../../../wp-content/uploads/2010/07/VisualVM-Memory.png><img class="size-medium wp-image-731" title="VisualVM Memory profiling" src=../../../wp-content/uploads/2010/07/VisualVM-Memory-300x199.png alt="VisualVM Memory profiling" width=300 height=199></a></p><p>Here we can see that this application store some big double[] and float[] arrays and that EllipseIterator and BasicStroke classes take also a lot of memory spaces.</p><p>In both the memory and CPU profiling, you can save the results to a file to see it later. By example, you can let an application working the all night, save the results the morning and examine them or make three profiling and compare the three.</p><p>To conclude, I have to say that this profiler is really simple but also really powerful to use. We've the main features we want for a profiler and the results are really good. That kind of tools can really help you to improve an application to use less CPU and memory. Of course that kind of tool doesn't do everything, it just help showing what part of the application must be improved, the improvement part is the task of the developer and it's not the easiest one. But having that kind of tool is a good start.</p></div> </div> </div> <ul class=pager> <li class=previous> <a href=version-control-with-git-book-review.html rel=prev>← Previous post</a> </li> <li class=next> <a href=state-of-the-lambda.html rel=next>Next post →</a> </li> </ul> <div id=disqus_thread></div> <script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://wichtounet.github.io/posts/2010/07/profile-applications-java-visualvm.html",
        disqus_title="Profile your applications with Java VisualVM",
        disqus_identifier="cache/posts/2010/07/profile-applications-java-visualvm.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script> <noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript> <a href=http://disqus.com class=dsq-brlink rel=nofollow>Comments powered by <span class=logo-disqus>Disqus</span></a> </article> </div> </div> </div></div><footer> Contents © 2014 <a href=mailto:baptistewicht@gmail.com>Baptiste Wicht</a> - Powered by <a href=http://getnikola.com rel=nofollow>Nikola</a><a rel=license href=http://creativecommons.org/licenses/by/4.0/><img alt="Creative Commons License" style=border-width:0 src=http://i.creativecommons.org/l/by/4.0/88x31.png></a> <ul class=footer_inline_ul> <li> <a href=profile-applications-java-visualvm.wp id=sourcelink>Source</a> </li> </ul></footer> <script src=../../../assets/js/all-nocdn.js type=text/javascript></script><script type=text/javascript src=https://apis.google.com/js/platform.js></script><script type=text/javascript>
    $(document).ready(function() {
        $('#tipue_search_input').tipuesearch({
        'mode': 'json',
        'contentLocation': '/assets/js/tipuesearch_content.json',
        'showUrl': false
        });
        });
</script></body></html>