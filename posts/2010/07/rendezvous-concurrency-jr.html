<!DOCTYPE html>
<html lang=en><head><link href=favicon.ico rel=icon type=image/x-icon><meta name=viewport content="width=device-width, initial-scale=1.0"><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=author content="Baptiste Wicht"><title>Rendezvous, concurrency method, in JR | @Blog("Baptiste Wicht")</title><link href=../../../assets/css/all-nocdn.css rel=stylesheet type=text/css><link rel=canonical href=http://baptiste-wicht.com/posts/2010/07/rendezvous-concurrency-jr.html><link rel=alternate type=application/rss+xml title=RSS href=../../../rss.xml><script type=text/javascript>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2175227-7']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script></head><body><div class=social_container> <div class=social_container_gplus> <a target=_blank title="Share on Google+" href="https://plusone.google.com/_/+1/confirm?hl=en&amp;url=http://baptiste-wicht.com/posts/2010/07/rendezvous-concurrency-jr.html"><img src=../../../assets/img/google_plus.png></a> </div> <div class=social_container_facebook> <a target=_blank title="Share on Facebook" href="http://www.facebook.com/sharer/sharer.php?u=#url"><img src=../../../assets/img/facebook.png></a> </div> <div class=social_container_twitter> <a target=_blank title="Tweet on Twitter" href="http://twitter.com/home?status=#url"><img src=../../../assets/img/twitter.svg></a> </div></div><nav class="navbar navbar-inverse navbar-fixed-top" role=navigation> <div class=container-fluid> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-ex1-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=http://baptiste-wicht.com/>@Blog("Baptiste Wicht")</a> </div> <div class="collapse navbar-collapse navbar-ex1-collapse"> <ul class="nav navbar-nav"> <li><a href=../../../stories/about.html>About</a> </li><li><a href=../../../stories/publications.html>Publications</a> </li><li><a href=../../../stories/donate.html>Donate</a> </li><li><a href=../../../stories/contact.html>Contact</a> </li><li><a href=../../../stories/faq.html>FAQ</a> </li><li><a href=../../../stories/legal.html>Legal</a> </li><li><a href=../../../categories/index.html>Tags</a> </li><li><a href=../../../archive.html>Archives</a> </li><li><a href=http://feeds.feedburner.com/BaptisteWicht>RSS</a> </li></ul> <span class="navbar-form pull-left"> <form action=../../../stories/search.html> <input type=text name=q id=tipue_search_input> </form> </span> <ul class="nav navbar-nav navbar-right"> <li> <a target=_blank title="Follow @wichtounet on Twitter" href=https://twitter.com/wichtounet> <img src=../../../assets/img/twitter.svg alt="Follow @wichtounet on Twitter"> </a> </li> <li> <a target=_blank title="Follow +BaptisteWicht on Google+" href=https://plus.google.com/+BaptisteWicht> <img src=../../../assets/img/google_plus.svg alt="Follow +BaptisteWicht on Google+"> </a> </li> </ul> </div> </div></nav><div class=body-container> <div class=left-sidebar> <div class=left-sidebar-widget> <div class=left-sidebar-widget-content> <div class=g-person data-width=275 data-href=//plus.google.com/u/0/103113673902796202116 data-theme=dark data-layout=landscape data-rel=author></div> </div> </div> <div class=left-sidebar-widget> <h3>Related posts</h3> <div class=left-sidebar-widget-content> <ol><li><a href=asynchronous-message-passing-jr.html>Asynchronous Message Passing in JR</a></li><li><a href=../06/jr-operations-and-capabilities.html>JR Operations and Capabilities</a></li><li><a href=../01/jr-introduction.html>Introduction to JR programming language</a></li><li><a href=../08/java-7-try-with-resources-statement.html>Java 7 : The new try-with-resources statement</a></li><li><a href=../01/install-jr-windows.html>Install the JR environment on Windows</a></li></ol> </div> </div> <div class=left-sidebar-widget> <h3>Recent comments</h3> <div class=left-sidebar-widget-content> <div id=recentcomments class=dsq-widget> <script type=text/javascript src="http://blogwichtounet.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=28&amp;excerpt_length=50"></script> </div> </div> </div> <div class=left-sidebar-widget> <h3>Blogroll</h3> <div class=left-sidebar-widget-content> <ul> <li><a target=_blank href=http://www.asjava.com/>AsJava.com : Java Tutorial</a></li> <li><a target=_blank href=http://www.mkyong.com/>Mkyong : Java Tutorials</a></li> </ul> </div> </div> </div> <div class=container> <div class=body-content> <div class=row> <article class="postbox post-text"> <div class=h-entry itemscope=itemscope itemtype=http://schema.org/Article> <h1 class=p-name itemprop="headline name">Rendezvous, concurrency method, in JR</h1> <hr> <small> Posted: <time class="published dt-published" datetime=2010-07-07T07:05:20+02:00 itemprop=datePublished>2010-07-07 07:05</time> | More posts about <span itemprop=keywords> <a class="tag p-category" href=../../../categories/concurrency.html><span class="badge badge-info">Concurrency</span></a> <a class="tag p-category" href=../../../categories/java.html><span class="badge badge-info">Java</span></a> <a class="tag p-category" href=../../../categories/jr.html><span class="badge badge-info">JR</span></a> </span> </small> <hr> <div class=e-content itemprop="articleBody text"> <div><p>In this post, we'll see a new feature of JR : the rendezvous.</p><p>Like asynchronous message passing, this synchronization method involves two processes : a caller and a receiver. But this time, the invocation is synchronous, the caller delays until the operation completes. The rendezvous does not create a new thread to the receiver. The receiver must invoke an input statement (the implementation of rendezvous) and wait for the message. Like asynchronous message passing, this is achieved using operations as message queue.</p><p>The rendezvous can simplify this kind of operations :</p><div class=code><pre><span class=kt>int</span> <span class=n>x</span><span class=o>;</span>
<span class=kt>int</span> <span class=n>y</span><span class=o>;</span>
<span class=n>send</span> <span class=nf>op_command</span><span class=o>(</span><span class=mi>2</span><span class=o>,</span> <span class=mi>3</span><span class=o>);</span>
<span class=n>receive</span><span class=o>(</span><span class=n>x</span><span class=o>,</span> <span class=n>y</span><span class=o>);</span>
</pre></div><p>To make a rendezvous, we'use the input statement. I think it's the harder (but also most complete) statement of the JR programming language. Here is the general form :</p><div class=code><pre><span class=n>inni</span> <span class=n>op_command</span> <span class=o>{</span>
<span class=c1>//Code block</span>
<span class=o>}</span>
<span class=o>[]</span> <span class=n>op_command</span> <span class=o>{</span>
<span class=c1>//Code block</span>
<span class=o>}..</span>
</pre></div><p>An op_command specifiy an operation to wait for. An op_command is of this form :</p><div class=code><pre><span class=n>return_type</span> <span class=nf>op_exp</span><span class=o>(</span><span class=n>args</span><span class=o>)</span> <span class=n>st</span> <span class=n>synch</span> <span class=n>by</span> <span class=n>sched</span>
</pre></div><p>Explanations :</p><ul> <li>return_type : Indicate the return type of the operation we are waiting for</li> <li>op_exp : The name of the operation or the capability</li> <li>args : The arguments of the operation</li> <li>st synch : Add a condition to the operations. This condition indicates which messages are acceptable</li> <li>by sched : Dictate the order of servicing the messages. Must be numerical. The message with the lowest value of scheduling expression will be serviced in first.</li></ul><p>If there is no synchronization expression and no scheduling expression, the first serviced invocation is the oldest. If there is a synchronization expression, the first serviced invocation is the oldest selectable expression and if there is a scheduling expression, the first serviced is the first selectable invocation that minimizes the scheduling expression. If there is no selectable message, the input statement delays until there is one.</p><p>You can also add an else statement to the input statement :</p><div class=code><pre><span class=n>inni</span> <span class=n>op_command</span> <span class=o>{</span>
<span class=c1>//Code block</span>
<span class=o>}</span> <span class=o>...</span>
<span class=o>[]</span> <span class=k>else</span> <span class=o>{</span>
<span class=c1>//Code block</span>
<span class=o>}</span>
</pre></div><p>The else block will be executed if there is no selectable message. So an input statement with an else statement will never delays.</p><p>Lets imagine a simple example. The server return the sum of 2 numbers after receiving a message. If we write this simple program using asynchronous message, it'll give us something like that :</p><div class=code><pre><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Calculator</span> <span class=o>{</span>
    <span class=kd>private</span> <span class=kd>static</span> <span class=n>op</span> <span class=kt>void</span> <span class=nf>request</span><span class=o>(</span><span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>);</span>
    <span class=kd>private</span> <span class=kd>static</span> <span class=n>op</span> <span class=kt>void</span> <span class=nf>response</span><span class=o>(</span><span class=kt>int</span> <span class=n>sum</span><span class=o>,</span> <span class=kt>int</span> <span class=n>sub</span><span class=o>);</span>

    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>...</span> <span class=n>args</span><span class=o>){}</span>

    <span class=kd>private</span> <span class=kd>static</span> <span class=n>process</span> <span class=n>Client</span> <span class=o>{</span>
        <span class=n>send</span> <span class=nf>request</span><span class=o>(</span><span class=mi>33</span><span class=o>,</span> <span class=mi>22</span><span class=o>);</span>

        <span class=kt>int</span> <span class=n>sum</span><span class=o>;</span>
        <span class=kt>int</span> <span class=n>sub</span><span class=o>;</span>
        <span class=n>receive</span> <span class=nf>response</span><span class=o>(</span><span class=n>sum</span><span class=o>,</span> <span class=n>sub</span><span class=o>);</span>

        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>printf</span><span class=o>(</span><span class=s>"Sum %d Sub %d"</span><span class=o>,</span> <span class=n>sum</span><span class=o>,</span> <span class=n>sub</span><span class=o>);</span>
    <span class=o>}</span>

    <span class=kd>private</span> <span class=kd>static</span> <span class=n>process</span> <span class=n>Server</span> <span class=o>{</span>
        <span class=kt>int</span> <span class=n>x</span><span class=o>;</span>
        <span class=kt>int</span> <span class=n>y</span><span class=o>;</span>
        <span class=n>receive</span> <span class=nf>request</span><span class=o>(</span><span class=n>x</span><span class=o>,</span> <span class=n>y</span><span class=o>);</span>
        <span class=n>send</span> <span class=nf>response</span><span class=o>(</span><span class=n>x</span> <span class=o>+</span> <span class=n>y</span><span class=o>,</span> <span class=n>x</span> <span class=o>-</span> <span class=n>y</span><span class=o>);</span>
    <span class=o>}</span>
<span class=o>}</span>
</pre></div><p>It little bit complicated for a thing as simple, isn't it ? Let's rewrite it with input statement :</p><div class=code><pre><span class=kd>public</span> <span class=kd>class</span> <span class=nc>CalculatorInni</span> <span class=o>{</span>
    <span class=kd>private</span> <span class=kd>static</span> <span class=n>op</span> <span class=kt>int</span> <span class=nf>compute</span><span class=o>(</span><span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>);</span>

    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>...</span> <span class=n>args</span><span class=o>){}</span>

    <span class=kd>private</span> <span class=kd>static</span> <span class=n>process</span> <span class=n>Client</span> <span class=o>{</span>
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>printf</span><span class=o>(</span><span class=s>"Sum %d"</span><span class=o>,</span> <span class=n>compute</span><span class=o>(</span><span class=mi>33</span><span class=o>,</span> <span class=mi>22</span><span class=o>));</span>
    <span class=o>}</span>

    <span class=kd>private</span> <span class=kd>static</span> <span class=n>process</span> <span class=n>Server</span> <span class=o>{</span>
        <span class=n>inni</span> <span class=kt>int</span> <span class=nf>compute</span><span class=o>(</span><span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>){</span>
            <span class=k>return</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span><span class=o>;</span>
        <span class=o>}</span>
    <span class=o>}</span>
<span class=o>}</span>
</pre></div><p>Easier, shorter and clearer, isn't it ?</p><p>The Client invoke the compute operation and get the return value directly because it's synchronous. If you have an operation with a return value, you doesn't have to use the call statement, it's implicit. If you have a void operation, you can use the call statement (but if you don't, it's the same by default) before the operation :</p><div class=code><pre><span class=n>call</span> <span class=nf>op_command</span><span class=o>(</span><span class=n>args</span><span class=o>);</span>
</pre></div><p>And the Server has only to use the input statement to return the sum of the numbers.</p><p>As you've perhaps seen, the receive is only an abbreviation to the simplest form of input statement. So if you write :</p><div class=code><pre><span class=kt>int</span> <span class=n>x</span><span class=o>;</span>
<span class=kt>int</span> <span class=n>y</span><span class=o>;</span>
<span class=n>receive</span> <span class=nf>op_command</span><span class=o>(</span><span class=n>x</span>
</pre></div><p>It's the same as if you write :</p><div class=code><pre><span class=n>inni</span> <span class=kt>void</span> <span class=nf>op_command</span><span class=o>(</span><span class=kt>int</span> <span class=n>a</span><span class=o>,</span> <span class=kt>int</span> <span class=n>b</span><span class=o>){</span>
      <span class=n>x</span> <span class=o>=</span> <span class=n>a</span><span class=o>;</span>
      <span class=n>y</span> <span class=o>=</span> <span class=n>b</span><span class=o>;</span>
<span class=o>}</span>
</pre></div><p>But in this case, it's easier to use the receive statement.</p><p>The input statement can also be used to service a group of operations in an array :</p><div class=code><pre><span class=n>cap</span> <span class=nf>void</span> <span class=o>(</span><span class=kt>int</span><span class=o>)</span> <span class=n>operations</span> <span class=o>=</span> <span class=k>new</span> <span class=n>cap</span> <span class=kt>void</span> <span class=o>(</span><span class=kt>int</span><span class=o>)[</span><span class=mi>12</span><span class=o>];</span>

<span class=c1>//Fill the array</span>
<span class=n>inni</span> <span class=o>((</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&amp;</span><span class=n>amp</span><span class=o>;</span><span class=n>lt</span><span class=o>;</span> <span class=mi>12</span><span class=o>;</span> <span class=n>i</span><span class=o>++))</span> <span class=n>operations</span><span class=o>[</span><span class=n>i</span><span class=o>](</span><span class=kt>int</span> <span class=n>x</span><span class=o>)</span> <span class=o>{</span>
   <span class=c1>//Code b</span>
<span class=o>}</span>
</pre></div><p>More than return, we could also use two new statements in an input statement :</p><ul> <li>reply : return a value to the caller but doesn't break the input statement, so you can still make operations in the input statement but you cannot return a value anymore.</li> <li>forward : delegate the answer to an other operation. So this is the other operation who will answer to the caller, the input statement continues its execution but cannot return a value anymore.</li></ul><p>Now that we know how to use input statement, we can simplify the ResourceAllocator of the next post. We can do a lot more easier, with two operations and input statements :</p><div class=code><pre><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>ResourceAllocator</span> <span class=o>{</span>
    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>N</span> <span class=o>=</span> <span class=mi>25</span><span class=o>;</span> <span class=c1>//Number of clients</span>
    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>I</span> <span class=o>=</span> <span class=mi>25</span><span class=o>;</span> <span class=c1>//Number of iterations</span>

    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>...</span> <span class=n>args</span><span class=o>){}</span>

    <span class=kd>private</span> <span class=kd>static</span> <span class=n>op</span> <span class=n>Resource</span> <span class=nf>request</span><span class=o>();</span>
    <span class=kd>private</span> <span class=kd>static</span> <span class=n>op</span> <span class=kt>void</span> <span class=nf>release</span><span class=o>(</span><span class=n>Resource</span><span class=o>);</span>

    <span class=kd>private</span> <span class=kd>static</span> <span class=n>process</span> <span class=nf>Client</span><span class=o>((</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&amp;</span><span class=n>amp</span><span class=o>;</span><span class=n>lt</span><span class=o>;</span> <span class=n>N</span><span class=o>;</span> <span class=n>i</span><span class=o>++)){</span>
        <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>a</span> <span class=o>&amp;</span><span class=n>amp</span><span class=o>;</span><span class=n>lt</span><span class=o>;</span> <span class=n>I</span><span class=o>;</span> <span class=n>a</span><span class=o>++){</span>
            <span class=n>Resource</span> <span class=n>resource</span> <span class=o>=</span> <span class=n>request</span><span class=o>();</span>

            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>printf</span><span class=o>(</span><span class=s>"Client %d use resource %d \n"</span><span class=o>,</span> <span class=n>i</span><span class=o>,</span> <span class=n>resource</span><span class=o>.</span><span class=na>getId</span><span class=o>());</span>

            <span class=n>call</span> <span class=nf>release</span><span class=o>(</span><span class=n>resource</span><span class=o>);</span>
        <span class=o>}</span>
    <span class=o>}</span>

    <span class=kd>private</span> <span class=kd>static</span> <span class=n>process</span> <span class=n>Server</span><span class=o>{</span>
        <span class=n>Queue</span> <span class=n>resources</span> <span class=o>=</span> <span class=k>new</span> <span class=n>LinkedList</span><span class=o>();</span>

        <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=o>;</span> <span class=n>i</span> <span class=o>&amp;</span><span class=n>amp</span><span class=o>;</span><span class=n>lt</span><span class=o>;=</span> <span class=mi>5</span><span class=o>;</span> <span class=n>i</span><span class=o>++){</span>
            <span class=n>resources</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Resource</span><span class=o>(</span><span class=n>i</span><span class=o>));</span>
        <span class=o>}</span>

        <span class=k>while</span><span class=o>(</span><span class=kc>true</span><span class=o>){</span>
            <span class=n>inni</span> <span class=n>Resource</span> <span class=nf>request</span><span class=o>()</span> <span class=n>st</span> <span class=o>!</span><span class=n>resources</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>()</span> <span class=o>{</span>
                <span class=k>return</span> <span class=n>resources</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
            <span class=o>}</span>
            <span class=o>[]</span> <span class=kt>void</span> <span class=n>release</span><span class=o>(</span><span class=n>Resource</span> <span class=n>resource</span><span class=o>){</span>
                <span class=n>resources</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>resource</span><span class=o>);</span>
            <span class=o>}</span>
        <span class=o>}</span>
    <span class=o>}</span>

    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kd>class</span> <span class=nc>Resource</span> <span class=o>{</span>
        <span class=kd>private</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>id</span><span class=o>;</span>

        <span class=kd>private</span> <span class=nf>Resource</span><span class=o>(</span><span class=kt>int</span> <span class=n>id</span><span class=o>){</span>
            <span class=kd>super</span><span class=o>();</span>

            <span class=k>this</span><span class=o>.</span><span class=na>id</span> <span class=o>=</span> <span class=n>id</span><span class=o>;</span>
        <span class=o>}</span>

        <span class=kd>private</span> <span class=kt>int</span> <span class=nf>getId</span><span class=o>(){</span>
            <span class=k>return</span> <span class=n>id</span><span class=o>;</span>
        <span class=o>}</span>
    <span class=o>}</span>
<span class=o>}</span>
</pre></div><p>Clearer, not ?</p><p>The last improvement we can do is to use a send instead of a call in the Client. We doesn't need to wait for release in client and the input statement can service send invocations as well as call but the send invocations cannot return something.</p><p>So we've now covered the rendezvous synchronization system in the JR system. In the next, and last, post about JR programming language, we'll see how to distribute our processes on several virtual machines.</p></div> </div> </div> <ul class=pager> <li class=previous> <a href=integrate-play-framework-intellij-idea.html rel=prev>← Previous post</a> </li> <li class=next> <a href=modular-java-book-review.html rel=next>Next post →</a> </li> </ul> <div id=disqus_thread></div> <script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://baptiste-wicht.com/posts/2010/07/rendezvous-concurrency-jr.html",
        disqus_title="Rendezvous, concurrency method, in JR",
        disqus_identifier="cache/posts/2010/07/rendezvous-concurrency-jr.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script> <noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript> <a href=http://disqus.com class=dsq-brlink rel=nofollow>Comments powered by <span class=logo-disqus>Disqus</span></a> </article> </div> </div> </div></div><footer> Contents © 2014 <a href=mailto:baptistewicht@gmail.com>Baptiste Wicht</a> - Powered by <a href=http://getnikola.com rel=nofollow>Nikola</a><a rel=license href=http://creativecommons.org/licenses/by/4.0/><img alt="Creative Commons License" style=padding-left:5px;border-width:0 src=../../../assets/img/cc.png></a> <ul class=footer_inline_ul> <li> <a href=rendezvous-concurrency-jr.wp id=sourcelink>Source</a> </li> </ul></footer> <script src=../../../assets/js/all-nocdn.js type=text/javascript></script><script type=text/javascript src=https://apis.google.com/js/platform.js></script></body></html>