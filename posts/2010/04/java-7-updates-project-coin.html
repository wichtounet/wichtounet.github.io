<!DOCTYPE html><html lang="en">
<head>
    <link href="favicon.ico" rel="icon" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Baptiste Wicht">
    <title>Java 7 : Languages updates from Project Coin | @Blog("Baptiste Wicht")</title>
    
            <link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
      <link rel="canonical" href="http://wichtounet.github.io/posts/2010/04/java-7-updates-project-coin.html">
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
            <link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">

    





    <link rel="stylesheet" type="text/css" href="../../../assets/css/tipuesearch.css">
    
</head>
<body>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid"><!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://wichtounet.github.io/">@Blog("Baptiste Wicht")</a>
        </div><!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                
                <li><a href="../../../stories/about.html">About</a>
                </li><li><a href="../../../stories/publications.html">Publications</a>
                </li><li><a href="../../../stories/donate.html">Donate</a>
                </li><li><a href="../../../stories/contact.html">Contact</a>
                </li><li><a href="../../../stories/faq.html">FAQ</a>
                </li><li><a href="../../../stories/legal.html">Legal</a>
                </li><li><a href="../../../archive.html">Archives</a>
                </li><li><a href="../../../categories/index.html">Tags</a>
                </li><li><a href="../../../rss.xml">RSS</a>

            </li></ul>

            <span class="navbar-form pull-left">
                <form action="../../../stories/search.html">
                    <div style="float: left;"><input type="text" name="q" id="tipue_search_input"></div>
                    <div style="float: left; margin-left: 13px;"><input type="button" id="tipue_search_button" onclick="this.form.submit();"></div>
                    <div style="clear: left;"></div>
                </form>
            </span>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

<!-- End of Menubar -->

<div class="body-container">

    <!-- Sidebar -->

    <div class="left-sidebar">
            <div class="left-sidebar-widget">
                <div class="left-sidebar-widget-content">
                    <div class="g-person" data-width="275" data-href="//plus.google.com/u/0/103113673902796202116" data-theme="dark" data-layout="landscape" data-rel="author"></div>
                </div>
            </div>
        
        <div class="left-sidebar-widget">
            <h3>Recent comments</h3>
            <div class="left-sidebar-widget-content">
                <div id="recentcomments" class="dsq-widget">
                    <script type="text/javascript" src="http://blogwichtounet.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=28&amp;excerpt_length=150"></script>
                </div>
            </div>
        </div>
        
        <div class="left-sidebar-widget">
            <h3>Blogroll</h3>
            <div class="left-sidebar-widget-content">
                <ul>
                    <li><a target="_blank" href="http://www.asjava.com/">AsJava.com : Java Tutorial</a></li>
                    <li><a target="_blank" href="http://www.mkyong.com/">Mkyong : Java Tutorials</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Content -->

    <div class="container">
            <div class="body-content" style="margin-top: -75px;">

            <!-- <div id="tipue_search_content" style="margin-left: auto; margin-right: auto; padding: 20px;"></div> -->

            <div class="row">
                
    <article class="postbox post-text">
    <div class="h-entry" itemscope="itemscope" itemtype="http://schema.org/Article">
    
    <h1 class="p-name" itemprop="headline name">Java 7 : Languages updates from Project Coin</h1>

    <hr>
    <small>
        Posted: <time class="published dt-published" datetime="2010-04-19T06:30:24+00:00" itemprop="datePublished">2010-04-19 06:30</time>
        

        
          |  
        More posts about 
    <span itemprop="keywords">
        <a class="tag p-category" href="../../../categories/java.html"><span class="badge badge-info">Java</span></a>
        <a class="tag p-category" href="../../../categories/java-7.html"><span class="badge badge-info">Java 7</span></a>
    </span>


    </small>
    <hr>
    <div class="e-content" itemprop="articleBody text">
    <div><p>I continue my posts on the new features of Java 7. In this post, I'll detail the news coming from the Project Coin. This project has computed more than 70 new features proposal from the Java community for integration in Java 7.</p>
<p>In this post, I'll detail the Final Five (or So) features chosen from this project to be included in Java 7.</p>
<h4>Diamond Syntax</h4>

<p>This feature is a really simple syntax improvement for generics. With that feature, you can avoid to write twice the generics type in a generics declaration. A little  example :</p>
<p>Instead of writing this :</p>
<div class="code"><pre><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedHashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;&gt;();</span>
</pre></div>


<p>You can now write that :</p>
<div class="code"><pre><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedHashMap</span><span class="o">&lt;&gt;();</span>
</pre></div>


<p>That's really practical, but not essential.</p>
<h4>Simplified Varargs Method Invocation</h4>

<p>This improvement is not a new functionality, but only a move of a warning. Like you must know, we cannot create arrray of generics type because the type verification is not made at the same time. But with the Ellipse of Java 5, you can made that type of array implicitely and the compiler generate warning at each invocation of that kind of method, so the warning has moved to the method declaration to have less warnings.</p>
<h4>Integers declaration</h4>

<p>You'll can declare integers using binary values :</p>
<div class="code"><pre><span class="kt">int</span> <span class="n">binary</span> <span class="o">=</span> <span class="mi">0</span><span class="n">b11001001001</span><span class="o">;</span>
</pre></div>


<p>and you can use _ (underscores) in the declaration :</p>
<div class="code"><pre><span class="kt">double</span> <span class="n">amount</span> <span class="o">=</span> <span class="mi">1</span><span class="n">_999_888_777</span><span class="o">.</span><span class="mi">25</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">color</span> <span class="o">=</span> <span class="mh">0xdd</span><span class="n">_dd_dd</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">binary</span> <span class="o">=</span> <span class="mi">0</span><span class="n">b110_0100_1001</span><span class="o">;</span>
</pre></div>


<p>That's allow to make more verbose code, but it's only sugar.</p>
<h4>Collections manipulations and declaration</h4>

<p>Another improvements to code verbosity, is the support of collections in the language. You'll have code facility to access and edit indexed collections like list and maps and to declare easily collections.</p>
<p>First, you can access to an element using the same syntax as the array :</p>
<div class="code"><pre><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="o">...;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="o">...;</span>
<span class="n">String</span> <span class="n">firstValue</span> <span class="o">=</span> <span class="n">list</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
<span class="n">map</span><span class="o">[</span><span class="s">"Test"</span><span class="o">]</span> <span class="o">=</span> <span class="n">firstValue</span><span class="o">;</span>
<span class="n">String</span> <span class="n">valueFromMap</span> <span class="o">=</span> <span class="n">map</span><span class="o">[</span><span class="s">"Test"</span><span class="o">];</span>
</pre></div>


<p>For the maps, that works with any type of key. So if you have one of your class for key, you can directly pass it in the code like the Strings in my example.</p>
<p>And, you can also quickly declare collections like array :</p>
<p>Lists with [] :</p>
<div class="code"><pre><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="o">[</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">16</span><span class="o">,</span> <span class="mi">32</span><span class="o">,</span> <span class="mi">64</span><span class="o">,</span> <span class="mi">128</span> <span class="o">];</span>
</pre></div>


<p>Sets with {}</p>
<div class="code"><pre><span class="n">Set</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="o">{</span> <span class="mi">256</span><span class="o">,</span> <span class="mi">512</span><span class="o">,</span> <span class="mi">1024</span><span class="o">,</span> <span class="mi">2048</span><span class="o">,</span> <span class="mi">4096</span> <span class="o">};</span>
</pre></div>


<p>And Maps with {} and : to split value and key :</p>
<div class="code"><pre><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">translations</span> <span class="o">=</span> <span class="o">{</span>
  <span class="s">"Hi"</span> <span class="o">:</span> <span class="s">"Bonjour"</span><span class="o">,</span>
  <span class="s">"Goodbye"</span> <span class="o">:</span> <span class="s">"Au revoir"</span><span class="o">,</span>
  <span class="s">"Thanks"</span> <span class="o">:</span> <span class="s">"Merci"</span>
<span class="o">}</span> 
</pre></div>


<p>All that created collections are immutables.</p>
<h4>Strings switch</h4>

<p>A really good feature : Switch with Strings values. You can now do that kind of switch : ¨</p>
<div class="code"><pre><span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>

<span class="k">switch</span> <span class="o">(</span><span class="n">language</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">case</span> <span class="s">"fr"</span><span class="o">:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="s">"Bonjour"</span><span class="o">;</span>
    <span class="k">break</span><span class="o">;</span>
  <span class="k">case</span> <span class="s">"en"</span><span class="o">:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="s">"Hi"</span><span class="o">;</span>
    <span class="k">break</span><span class="o">;</span>
  <span class="k">case</span> <span class="s">"de"</span><span class="o">:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="s">"Guten tag"</span><span class="o">;</span>
    <span class="k">break</span><span class="o">;</span>
  <span class="k">default</span><span class="o">:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="s">"Hello"</span><span class="o">;</span>
    <span class="k">break</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>


<p>I thinks, it's really great. With that, we can delete a lot of ugly list of if/else if code.</p>
<h4>Automatic Resource Management (ARM)</h4>

<p>Another great feature, you can automatically close the resources using a new try clause :</p>
<div class="code"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="n">URL</span> <span class="n">url</span><span class="o">,</span> <span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
  <span class="k">try</span> <span class="o">(</span> <span class="n">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span> <span class="n">InputStream</span> <span class="n">is</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="na">openStream</span><span class="o">()</span> <span class="o">)</span> <span class="o">{</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">2048</span><span class="o">];</span>
    <span class="kt">int</span> <span class="n">len</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">((</span><span class="n">len</span> <span class="o">=</span> <span class="n">is</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buf</span><span class="o">))</span> <span class="o">&amp;</span><span class="n">amp</span><span class="o">;</span><span class="n">gt</span><span class="o">;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">fos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buf</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">len</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>In that code, the FileOutputStream and the InputStream will automatically be closed after the try, making a cleared code and you cannot forgot a resource with that.</p>
<p>And last, the modifications to support the JSR 292 directly in the language. I've already described that features in other post : <a title="Java 7 : More dynamics" href="http://www.baptiste-wicht.com/2010/04/java-7-more-dynamics/" target="_self">Java 7 : More Dynamics</a></p>
<p>That's all for these new language enhancements from the Project Coin.</p>
<p>For me, i like the new ARM and the Strings Switch, but i think this is simple enhancements, they were others proposals in the Project Coin i found better, like the "Improved Exception Handling for Java", "Improved Wildcard Syntax for Java" or "Elvis and Other Null-Safe Operators", but this a good start.</p></div>
    </div>
    </div>
    
        <ul class="pager">
            <li class="previous">
                <a href="jtheque-problems-migrating-osgi.html" rel="prev">← Previous post</a>
            </li>
            <li class="next">
                <a href="using-substance-look-and-feel-in-osgi.html" rel="next">Next post →</a>
            </li>
        </ul>

        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://wichtounet.github.io/posts/2010/04/java-7-updates-project-coin.html",
        disqus_title="Java 7 : Languages updates from Project Coin",
        disqus_identifier="cache/posts/2010/04/java-7-updates-project-coin.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


    

    </article>

            </div>
        </div>
    </div>
</div>

<!-- Footer -->

<footer>
    Contents © 2014         <a href="mailto:baptistewicht@gmail.com">Baptiste Wicht</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/4.0/88x31.png"></a>
        <ul class="footer_inline_ul">
            
    <li>
    <a href="java-7-updates-project-coin.wp" id="sourcelink">Source</a>
    </li>

        </ul>
</footer>


            <script src="../../../assets/js/all-nocdn.js" type="text/javascript"></script>


    
<script type="text/javascript" src="https://apis.google.com/js/platform.js"></script>


    
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5327566b264df4ee"></script>
<script type="text/javascript">
  addthis.layers({
    'theme' : 'dark',
    'share' : {
      'position' : 'right',
      //'services' : 'google_plusone,facebook_like,tweet',
      'services' : 'google_plusone_share,facebook,twitter'
    }, 
    'follow' : {
      'services' : [
        {'service': 'twitter', 'id': 'wichtounet'},
        {'service': 'google_follow', 'id': '+BaptisteWicht'}
      ]
    }   
  });
</script>



<!-- Search -->

    <script type="text/javascript" src="../../../assets/js/tipuesearch_set.js"></script>
    <script type="text/javascript" src="../../../assets/js/tipuesearch.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#tipue_search_input').tipuesearch({
            'mode': 'json',
            'contentLocation': '/assets/js/tipuesearch_content.json',
            'showUrl': false
            });
            });
    </script>

<script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script>






</body>
</html>