<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<base href="http://baptiste-wicht.com/posts/2010/08/presentation-usage-h2-database-engine.html">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Presentation and use of H2 Database Engine | @Blog("Baptiste Wicht")</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="http://baptiste-wicht.com/posts/2010/08/presentation-usage-h2-database-engine.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2175227-7']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script><meta name="author" content="Baptiste Wicht">
<link rel="prev" href="java-file-copy-benchmarks-update.html" title="Java File Copy Benchmarks Update" type="text/html">
<link rel="next" href="tip-launch-java-applications-from-java-applications-with-ant.html" title="Quick Tip : Launch Java Applications From Java applications with Ant" type="text/html">
<meta property="og:site_name" content='@Blog("Baptiste Wicht")'>
<meta property="og:title" content="Presentation and use of H2 Database Engine">
<meta property="og:url" content="http://baptiste-wicht.com/posts/2010/08/presentation-usage-h2-database-engine.html">
<meta property="og:description" content="It makes a long time now that I started to use the H2 Database Engine as embedded database in JTheque and other projects. This post is a presentation of this database engine and some informations abou">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2010-08-06T07:04:09+02:00">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Performances">
<link href="../../../favicon.ico" rel="icon" type="image/x-icon">
<link rel="”publisher”" href="%E2%80%9Dhttps://plus.google.com/+BaptisteWicht%E2%80%9D">
</head>
<body>

<!-- Menubar -->

<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<div class="container-fluid">
<!-- This keeps the margins nice -->
    <div class="row">
        <div class="col-sm-3 col-lg-2">
            <nav class="navbar navbar-inverse navbar-fixed-side"><div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="http://baptiste-wicht.com/">
                        <span id="blog-title">@Blog("Baptiste Wicht")</span>
                    </a>
                </div>
<!-- /.navbar-header -->

                <div class="collapse navbar-collapse navbar-ex1-collapse">
                    <ul class="nav navbar-nav">
<li>
<a href="../../../stories/about.html">About</a>
                </li>
<li>
<a href="../../../stories/publications.html">Publications</a>
                </li>
<li>
<a href="../../../categories/index.html">Tags</a>
                </li>
<li>
<a href="../../../archive.html">Archives</a>
                </li>
<li>
<a href="http://feeds.feedburner.com/BaptisteWicht">RSS</a>



                            </li>
<li class="navbar-content">
                                <h3>Related posts</h3>
                            </li>
                            

                            <li><a href="../../2013/12/thor-os-boot-process.html">Thor OS: Boot Process</a></li>
<li><a href="../05/improve-performances-wordpress-w3-total-cache.html">Improve performances of WordPress with W3 Total Cache</a></li>
<li><a href="../05/sonar-2-1-has-been-released.html">Sonar 2.1 has been released</a></li>
<li><a href="../../2013/07/home-server-adventure-step-1.html">Home Server Adventure - Step 1</a></li>
<li><a href="../../2009/12/swing-user-interface-jtable.html">Creation of Swing User Interface : Tables (JTable)</a></li>


                            <li class="navbar-block">

                        <li class="wicht-navbar-right">
                            <a target="_blank" title="Follow @wichtounet on Twitter" href="https://twitter.com/wichtounet">
                                <img src="../../../assets/img/twitter.png" alt="Follow @wichtounet on Twitter"></a>
                        </li>

                        <li class="wicht-navbar-right">
                            <a target="_blank" title="Follow +BaptisteWicht on Google+" href="https://plus.google.com/+BaptisteWicht">
                                <img src="../../../assets/img/google_plus.png" alt="Follow +BaptisteWicht on Google+"></a>
                        </li>


                    </ul>
</div>
<!-- /.navbar-collapse -->
            </nav>
</div> <!-- col -->
        <div class="col-sm-9 col-lg-10">
            <div id="content"></div>
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Presentation and use of H2 Database Engine</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                    Baptiste Wicht
            </span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2010-08-06T07:04:09+02:00" itemprop="datePublished" title="2010-08-06 07:04">2010-08-06 07:04</time></a></p>
                <p class="commentline">
        
    <a href="presentation-usage-h2-database-engine.html#disqus_thread" data-disqus-identifier="cache/posts/2010/08/presentation-usage-h2-database-engine.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="presentation-usage-h2-database-engine.wp" id="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>It makes a long time now that I started to use the <strong>H2 Database Engine</strong> as embedded database in JTheque and other projects. This post is a presentation of this database engine and some informations about its utilization.</p>
<p>H2 is a <strong>pure Java database</strong>. It can work as <strong>embedded database</strong> or in <strong>server mode</strong>. The developers of the database have made all to have a very small footprint for this database, it takes around 1MB jar file size.</p>
<!-- TEASER_END -->

<h4>Performances</h4>

<p>Another feature the developers find important in this database is the performance. Here are two comparison graphs for H2, Derby and HSQLDB, generated directly from the benchmark data from the official H2 site.</p>
<p><a href="../../../wp-content/uploads/2010/08/Perfs-Embedded.png"><img class="size-full wp-image-894" title="Performances of H2 in Embedded Mode" src="../../../wp-content/uploads/2010/08/Perfs-Embedded.png" alt="Performances of H2 in Embedded Mode" width="317" height="272"></a></p>
<p><a href="../../../wp-content/uploads/2010/08/Perfs-Server.png"><img class="size-full wp-image-893" title="Performances of H2 in Server Mode" src="../../../wp-content/uploads/2010/08/Perfs-Server.png" alt="Performances of H2 in Server Mode" width="301" height="278"></a></p>
<p>As you can see, the performances of H2 are very good. It's the main reason I've used H2 instead of HSQLDB.</p>
<h4>Modes</h4>

<p>H2 can work in three modes. Embedded, Server or Mixed modes. In each mode, you can use memory or persistent tables.</p>
<p><a href="../../../wp-content/uploads/2010/08/connection-mode-embedded.png"><img class="aligncenter size-full wp-image-897" title="H2 Embedded Mode" src="../../../wp-content/uploads/2010/08/connection-mode-embedded.png" alt="H2 Embedded Mode"></a></p>
<p>In this mode, the database is only accessible from the current virtual machine. It's the fastest connection mode.</p>
<p><a href="../../../wp-content/uploads/2010/08/connection-mode-remote.png"><img class="aligncenter size-full wp-image-896" title="H2 Server Mode" src="../../../wp-content/uploads/2010/08/connection-mode-remote.png" alt="H2 Server Mode"></a></p>
<p>In this mode, the database runs in a server, so several applications can access the database engines. Of course, this mode is slower than in embedded mode, because all datas are transfered using TCP/IP.</p>
<p><a href="../../../wp-content/uploads/2010/08/connection-mode-mixed.png"><img class="size-full wp-image-895" title="H2 Mixed Mode" src="../../../wp-content/uploads/2010/08/connection-mode-mixed.png" alt="H2 Mixed Mode" width="403" height="240"></a></p>
<p>In this mode, the first application create the application in embedded mode but also start a server to provide access to the database.</p>
<h4>Use</h4>

<p>The use of this database is as simple as the use of any other database. You just have to create to the database using the JDBC Driver and the database will be automatically created if needed or the server launched if needed.</p>
<p>By example, here it's an example to create an database in embedded mode, you just have to do that :</p>
<pre class="code literal-block"><span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"org.hsqldb.jdbcDriver"</span><span class="o">).</span><span class="na">newInstance</span><span class="o">();</span>

<span class="n">Connection</span> <span class="n">connexion</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:h2:test"</span><span class="o">,</span> <span class="s">"sa"</span><span class="o">,</span>  <span class="s">""</span><span class="o">);</span>
</pre>


<p>test is the name of the database. If the database already exists, the data will be loaded.</p>
<p>You can also create a database in memory. There is no persisting data. When you close the database, there is no data persisted. It's useful for benchmarking by example.  It's also the mode with the best performances. Here is an example to create a memory database (named test) :</p>
<pre class="code literal-block"><span class="n">Connection</span> <span class="n">connexion</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:h2:mem:test"</span><span class="o">,</span> <span class="s">"sa"</span><span class="o">,</span>  <span class="s">""</span><span class="o">);</span>
</pre>


<p>To start the server, you have two choice. You can launch it from the command line :</p>
<pre class="code literal-block"><span class="n">java</span> <span class="o">-</span><span class="n">cp</span> <span class="n">h2</span><span class="o">*.</span><span class="na">jar</span> <span class="n">org</span><span class="o">.</span><span class="na">h2</span><span class="o">.</span><span class="na">tools</span><span class="o">.</span><span class="na">Server</span>
</pre>


<p>Or programmatically :</p>
<pre class="code literal-block"><span class="n">Server</span> <span class="n">server</span> <span class="o">=</span> <span class="n">Server</span><span class="o">.</span><span class="na">createTcpServer</span><span class="o">(</span><span class="n">args</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

<span class="o">...</span>

<span class="n">server</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
</pre>


<p>And to connect to a remove server, just change the JDBC URL :</p>
<pre class="code literal-block"><span class="n">Connection</span> <span class="n">connexion</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:h2:tcp://localhost/~/test"</span><span class="o">,</span> <span class="s">"sa"</span><span class="o">,</span>  <span class="s">""</span><span class="o">);</span>
</pre>


<p>The database is closed when the last connection to the database is closed.</p>
<p>The SQL used is strandard SQL with some adds to support the features of H2. The syntax is described on the oficial site : <a href="http://www.h2database.com/html/grammar.html" target="_blank">SQL Grammar</a>. By example, here are the SQL requests for creating the different types of database of H2 :</p>
<pre class="code literal-block"><span class="k">CREATE</span> <span class="n">CACHED</span> <span class="k">TABLE</span> <span class="n">cachedTable</span> <span class="p">...</span>
<span class="k">CREATE</span> <span class="n">MEMORY</span> <span class="k">TABLE</span> <span class="n">memTable</span> <span class="p">...</span>
<span class="k">CREATE</span> <span class="n">MEMORY</span> <span class="k">TEMPORARY</span> <span class="k">TABLE</span> <span class="n">memTempTable</span> <span class="p">...</span>
<span class="k">CREATE</span> <span class="n">CACHED</span> <span class="k">TEMPORARY</span> <span class="k">TABLE</span> <span class="n">memTempTable</span> <span class="p">...</span>
</pre>


<ul>
<li>A cached table is the default type of table. The data are persistent and not limited by the memory.</li>
    <li>A memory table is also persistent but the index of data is kept in the memory, so memory table cannot be too large.</li>
    <li>A temporary table is deleted when closing the database.</li>
</ul>
<p>So, I think we covered here the main things we must know to start using H2 Database Engine.</p>
<p>For more informations, consult <a href="http://www.h2database.com/" target="_blank">the official site</a>.</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/java.html" rel="tag">Java</a></li>
            <li><a class="tag p-category" href="../../../categories/performances.html" rel="tag">Performances</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="java-file-copy-benchmarks-update.html" rel="prev" title="Java File Copy Benchmarks Update">Previous post</a>
            </li>
            <li class="next">
                <a href="tip-launch-java-applications-from-java-applications-with-ant.html" rel="next" title="Quick Tip : Launch Java Applications From Java applications with Ant">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://baptiste-wicht.com/posts/2010/08/presentation-usage-h2-database-engine.html",
        disqus_title="Presentation and use of H2 Database Engine",
        disqus_identifier="cache/posts/2010/08/presentation-usage-h2-database-engine.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div> <!-- col -->
    </div>
<!-- row  -->
</div>
<!-- container-fluid -->

<!-- End of Menubar -->

<!-- Footer -->

<footer>
    Contents © 2016         <a href="mailto:baptistewicht@gmail.com">Baptiste Wicht</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="../../../assets/img/cc.png"></a>
        <ul class="footer_inline_ul">
<li>
    <a href="presentation-usage-h2-database-engine.wp" id="sourcelink">Source</a>
    </li>

        </ul></footer><!-- Late loading stuff  --><script src="../../../assets/js/all-nocdn.js"></script>
</body>
</html>
