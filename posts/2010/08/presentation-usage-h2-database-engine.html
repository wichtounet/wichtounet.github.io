<!DOCTYPE html><html lang="en">
<head>
    <link href="favicon.ico" rel="icon" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Baptiste Wicht">
    <title>Presentation and use of H2 Database Engine | @Blog("Baptiste Wicht")</title>
    
            <link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
      <link rel="canonical" href="http://wichtounet.github.io/posts/2010/08/presentation-usage-h2-database-engine.html">
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
            <link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">

    





    <link rel="stylesheet" type="text/css" href="../../../assets/css/tipuesearch.css">
    
</head>
<body>

<div class="social_container">
    <div class="social_container_gplus">
        <a target="_blank" title="Share on Google+" href="https://plusone.google.com/_/+1/confirm?hl=en&amp;url=http://wichtounet.github.io/posts/2010/08/presentation-usage-h2-database-engine.html"><img src="../../../assets/img/google_plus.png"></a>
    </div>
    <div class="social_container_facebook">
        <a target="_blank" title="Share on Facebook" href="http://www.facebook.com/sharer/sharer.php?u=#url"><img src="../../../assets/img/facebook.png"></a>
    </div>
    <div class="social_container_twitter">
        <a target="_blank" title="Tweet on Twitter" href="http://twitter.com/home?status=#url"><img src="../../../assets/img/twitter.svg"></a>
    </div>
</div>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid"><!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://wichtounet.github.io/">@Blog("Baptiste Wicht")</a>
        </div><!-- /.navbar-header -->
        
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                
                <li><a href="../../../stories/about.html">About</a>
                </li><li><a href="../../../stories/publications.html">Publications</a>
                </li><li><a href="../../../stories/donate.html">Donate</a>
                </li><li><a href="../../../stories/contact.html">Contact</a>
                </li><li><a href="../../../stories/faq.html">FAQ</a>
                </li><li><a href="../../../stories/legal.html">Legal</a>
                </li><li><a href="../../../archive.html">Archives</a>
                </li><li><a href="../../../categories/index.html">Tags</a>
                </li><li><a href="../../../rss.xml">RSS</a>

            </li></ul>

            <span class="navbar-form pull-left">
                <form action="../../../stories/search.html">
                    <input type="text" name="q" id="tipue_search_input">
                </form>
            </span>
            
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a target="_blank" title="Follow @wichtounet on Twitter" href="https://twitter.com/wichtounewichtounet">
                        <img src="../../../assets/img/twitter.svg" alt="Follow @wichtounet on Twitter">
                    </a>
                </li>
                <li>
                    <a target="_blank" title="Follow +BaptisteWicht on Google+" href="https://plus.google.com/+BaptisteWicht">
                        <img src="../../../assets/img/google_plus.svg" alt="Follow +BaptisteWicht on Google+">
                    </a>
                </li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

<!-- End of Menubar -->

<div class="body-container">

    <!-- Sidebar -->

    <div class="left-sidebar">
            <div class="left-sidebar-widget">
                <div class="left-sidebar-widget-content">
                    <div class="g-person" data-width="275" data-href="//plus.google.com/u/0/103113673902796202116" data-theme="dark" data-layout="landscape" data-rel="author"></div>
                </div>
            </div>

            <div class="left-sidebar-widget">
                <h3>Related posts</h3>
                <div class="left-sidebar-widget-content">
                    
                    <ol>
<li><a href="../../2009/12/swing-user-interface-jtable.html">Creation of Swing User Interface : Tables (JTable)</a></li>
<li><a href="../07/profile-applications-java-visualvm.html">Profile your applications with Java VisualVM</a></li>
<li><a href="../01/jr-introduction.html">Introduction to JR programming language</a></li>
<li><a href="../../2012/07/eddi-compiler-1-1-1-dynamic-memory-allocation-constructors-destructors.html">EDDI Compiler 1.1.1 – Dynamic Memory Allocation and Constructors/Destructors</a></li>
<li><a href="../../2013/06/improving-eddic-boost-spirit-parser-performances.html">Improving eddic Boost Spirit parser performances</a></li>
</ol>


                </div>
            </div>
        
        <div class="left-sidebar-widget">
            <h3>Recent comments</h3>
            <div class="left-sidebar-widget-content">
                <div id="recentcomments" class="dsq-widget">
                    <script type="text/javascript" src="http://blogwichtounet.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=28&amp;excerpt_length=50"></script> 
                </div>
            </div>
        </div>

        <div class="left-sidebar-widget">
            <h3>Popular posts</h3>
            <div class="left-sidebar-widget-content">
                <div id="popularthreads" class="dsq-widget">
                    <script type="text/javascript" src="http://blogwichtounet.disqus.com/popular_threads_widget.js?num_items=5&amp;days_back=90"></script>
                </div>
            </div>
        </div>
        
        <div class="left-sidebar-widget">
            <h3>Blogroll</h3>
            <div class="left-sidebar-widget-content">
                <ul>
                    <li><a target="_blank" href="http://www.asjava.com/">AsJava.com : Java Tutorial</a></li>
                    <li><a target="_blank" href="http://www.mkyong.com/">Mkyong : Java Tutorials</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Content -->

    <div class="container">
            <div class="body-content" style="margin-top: -75px;">

            <div class="row">
                
    <article class="postbox post-text">
    <div class="h-entry" itemscope="itemscope" itemtype="http://schema.org/Article">
    
    <h1 class="p-name" itemprop="headline name">Presentation and use of H2 Database Engine</h1>

    <hr>
    <small>
        Posted: <time class="published dt-published" datetime="2010-08-06T07:04:09+02:00" itemprop="datePublished">2010-08-06 07:04</time>
        

        
          |  
        More posts about 
    <span itemprop="keywords">
        <a class="tag p-category" href="../../../categories/java.html"><span class="badge badge-info">Java</span></a>
        <a class="tag p-category" href="../../../categories/performances.html"><span class="badge badge-info">Performances</span></a>
    </span>


    </small>
    <hr>
    <div class="e-content" itemprop="articleBody text">
    <div><p>It makes a long time now that I started to use the <strong>H2 Database Engine</strong> as embedded database in JTheque and other projects. This post is a presentation of this database engine and some informations about its utilization.</p>
<p>H2 is a <strong>pure Java database</strong>. It can work as <strong>embedded database</strong> or in <strong>server mode</strong>. The developers of the database have made all to have a very small footprint for this database, it takes around 1MB jar file size.</p>
<!--more-->

<h4>Performances</h4>

<p>Another feature the developers find important in this database is the performance. Here are two comparison graphs for H2, Derby and HSQLDB, generated directly from the benchmark data from the official H2 site.</p>
<p><a href="../../../wp-content/uploads/2010/08/Perfs-Embedded.png"><img class="size-full wp-image-894" title="Performances of H2 in Embedded Mode" src="../../../wp-content/uploads/2010/08/Perfs-Embedded.png" alt="Performances of H2 in Embedded Mode" width="317" height="272"></a></p>
<p><a href="../../../wp-content/uploads/2010/08/Perfs-Server.png"><img class="size-full wp-image-893" title="Performances of H2 in Server Mode" src="../../../wp-content/uploads/2010/08/Perfs-Server.png" alt="Performances of H2 in Server Mode" width="301" height="278"></a></p>
<p>As you can see, the performances of H2 are very good. It's the main reason I've used H2 instead of HSQLDB.</p>
<h4>Modes</h4>

<p>H2 can work in three modes. Embedded, Server or Mixed modes. In each mode, you can use memory or persistent tables.</p>
<p><a href="../../../wp-content/uploads/2010/08/connection-mode-embedded.png"><img class="aligncenter size-full wp-image-897" title="H2 Embedded Mode" src="../../../wp-content/uploads/2010/08/connection-mode-embedded.png" alt="H2 Embedded Mode"></a></p>
<p>In this mode, the database is only accessible from the current virtual machine. It's the fastest connection mode.</p>
<p><a href="../../../wp-content/uploads/2010/08/connection-mode-remote.png"><img class="aligncenter size-full wp-image-896" title="H2 Server Mode" src="../../../wp-content/uploads/2010/08/connection-mode-remote.png" alt="H2 Server Mode"></a></p>
<p>In this mode, the database runs in a server, so several applications can access the database engines. Of course, this mode is slower than in embedded mode, because all datas are transfered using TCP/IP.</p>
<p><a href="../../../wp-content/uploads/2010/08/connection-mode-mixed.png"><img class="size-full wp-image-895" title="H2 Mixed Mode" src="../../../wp-content/uploads/2010/08/connection-mode-mixed.png" alt="H2 Mixed Mode" width="403" height="240"></a></p>
<p>In this mode, the first application create the application in embedded mode but also start a server to provide access to the database.</p>
<h4>Use</h4>

<p>The use of this database is as simple as the use of any other database. You just have to create to the database using the JDBC Driver and the database will be automatically created if needed or the server launched if needed.</p>
<p>By example, here it's an example to create an database in embedded mode, you just have to do that :</p>
<div class="code"><pre><span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"org.hsqldb.jdbcDriver"</span><span class="o">).</span><span class="na">newInstance</span><span class="o">();</span>

<span class="n">Connection</span> <span class="n">connexion</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:h2:test"</span><span class="o">,</span> <span class="s">"sa"</span><span class="o">,</span>  <span class="s">""</span><span class="o">);</span>
</pre></div>


<p>test is the name of the database. If the database already exists, the data will be loaded.</p>
<p>You can also create a database in memory. There is no persisting data. When you close the database, there is no data persisted. It's useful for benchmarking by example.  It's also the mode with the best performances. Here is an example to create a memory database (named test) :</p>
<div class="code"><pre><span class="n">Connection</span> <span class="n">connexion</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:h2:mem:test"</span><span class="o">,</span> <span class="s">"sa"</span><span class="o">,</span>  <span class="s">""</span><span class="o">);</span>
</pre></div>


<p>To start the server, you have two choice. You can launch it from the command line :</p>
<div class="code"><pre><span class="n">java</span> <span class="o">-</span><span class="n">cp</span> <span class="n">h2</span><span class="o">*.</span><span class="na">jar</span> <span class="n">org</span><span class="o">.</span><span class="na">h2</span><span class="o">.</span><span class="na">tools</span><span class="o">.</span><span class="na">Server</span>
</pre></div>


<p>Or programmatically :</p>
<div class="code"><pre><span class="n">Server</span> <span class="n">server</span> <span class="o">=</span> <span class="n">Server</span><span class="o">.</span><span class="na">createTcpServer</span><span class="o">(</span><span class="n">args</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

<span class="o">...</span>

<span class="n">server</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
</pre></div>


<p>And to connect to a remove server, just change the JDBC URL :</p>
<div class="code"><pre><span class="n">Connection</span> <span class="n">connexion</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:h2:tcp://localhost/~/test"</span><span class="o">,</span> <span class="s">"sa"</span><span class="o">,</span>  <span class="s">""</span><span class="o">);</span>
</pre></div>


<p>The database is closed when the last connection to the database is closed.</p>
<p>The SQL used is strandard SQL with some adds to support the features of H2. The syntax is described on the oficial site : <a href="http://www.h2database.com/html/grammar.html" target="_blank">SQL Grammar</a>. By example, here are the SQL requests for creating the different types of database of H2 :</p>
<div class="code"><pre><span class="k">CREATE</span> <span class="n">CACHED</span> <span class="k">TABLE</span> <span class="n">cachedTable</span> <span class="p">...</span>
<span class="k">CREATE</span> <span class="n">MEMORY</span> <span class="k">TABLE</span> <span class="n">memTable</span> <span class="p">...</span>
<span class="k">CREATE</span> <span class="n">MEMORY</span> <span class="k">TEMPORARY</span> <span class="k">TABLE</span> <span class="n">memTempTable</span> <span class="p">...</span>
<span class="k">CREATE</span> <span class="n">CACHED</span> <span class="k">TEMPORARY</span> <span class="k">TABLE</span> <span class="n">memTempTable</span> <span class="p">...</span>
</pre></div>


<ul>
    <li>A cached table is the default type of table. The data are persistent and not limited by the memory.</li>
    <li>A memory table is also persistent but the index of data is kept in the memory, so memory table cannot be too large.</li>
    <li>A temporary table is deleted when closing the database.</li>
</ul>

<p>So, I think we covered here the main things we must know to start using H2 Database Engine.</p>
<p>For more informations, consult <a href="http://www.h2database.com/" target="_blank">the official site</a>.</p></div>
    </div>
    </div>
    
        <ul class="pager">
            <li class="previous">
                <a href="java-file-copy-benchmarks-update.html" rel="prev">← Previous post</a>
            </li>
            <li class="next">
                <a href="tip-launch-java-applications-from-java-applications-with-ant.html" rel="next">Next post →</a>
            </li>
        </ul>

        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://wichtounet.github.io/posts/2010/08/presentation-usage-h2-database-engine.html",
        disqus_title="Presentation and use of H2 Database Engine",
        disqus_identifier="cache/posts/2010/08/presentation-usage-h2-database-engine.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


    

    </article>

            </div>
        </div>
    </div>
</div>

<!-- Footer -->

<footer>
    Contents © 2014         <a href="mailto:baptistewicht@gmail.com">Baptiste Wicht</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/4.0/88x31.png"></a>
        <ul class="footer_inline_ul">
            
    <li>
    <a href="presentation-usage-h2-database-engine.wp" id="sourcelink">Source</a>
    </li>

        </ul>
</footer>


            <script src="../../../assets/js/all-nocdn.js" type="text/javascript"></script>


<!-- Late loading stuff  -->


<!-- Google platform JS -->
    
<script type="text/javascript" src="https://apis.google.com/js/platform.js"></script>


    


<!-- Tipue Search -->

<script type="text/javascript">
    $(document).ready(function() {
        $('#tipue_search_input').tipuesearch({
        'mode': 'json',
        'contentLocation': '/assets/js/tipuesearch_content.json',
        'showUrl': false
        });
        });
</script>






</body>
</html>