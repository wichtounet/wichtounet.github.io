<!DOCTYPE html><html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Baptiste Wicht">
    <title>Presentation and use of H2 Database Engine | @Blog("Baptiste Wicht")</title>
    
            <link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
      <link rel="canonical" href="http://wichtounet.github.io/posts/2010/08/presentation-usage-h2-database-engine.html">
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
            <link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">

    





    
</head>
<body>
<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid"><!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://wichtounet.github.io/">@Blog("Baptiste Wicht")</a>
        </div><!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                
                <li><a href="../../../stories/about.html">About</a>
                </li><li><a href="../../../stories/publications.html">Publications</a>
                </li><li><a href="../../../stories/donate.html">Donate</a>
                </li><li><a href="../../../stories/faq.html">FAQ</a>
                </li><li><a href="../../../stories/legal.html">Legal</a>
                </li><li><a href="../../../archive.html">Archives</a>
                </li><li><a href="../../../categories/index.html">Tags</a>
                </li><li><a href="../../../rss.xml">RSS</a>

            </li></ul>

            <ul class="nav navbar-nav navbar-right">
                
                
                    
    <li>
    <a href="presentation-usage-h2-database-engine.wp" id="sourcelink">Source</a>
    </li>

            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

<!-- End of Menubar -->

<div class="container">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
    <article class="postbox post-text">
    <div class="h-entry" itemscope="itemscope" itemtype="http://schema.org/Article">
    
    <h1 class="p-name" itemprop="headline name">Presentation and use of H2 Database Engine</h1>

    <hr>
    <small>
        Posted: <time class="published dt-published" datetime="2010-08-06T07:04:09+00:00" itemprop="datePublished">2010-08-06 07:04</time>
        

        
          |  
        More posts about 
    <span itemprop="keywords">
        <a class="tag p-category" href="../../../categories/java.html"><span class="badge badge-info">Java</span></a>
        <a class="tag p-category" href="../../../categories/java.html"><span class="badge badge-info">Java</span></a>
        <a class="tag p-category" href="../../../categories/performances.html"><span class="badge badge-info">Performances</span></a>
    </span>


    </small>
    <hr>
    <div class="e-content" itemprop="articleBody text">
    <div><p></p><p>It makes a long time now that I started to use the <strong>H2 Database Engine</strong> as embedded database in JTheque and other projects. This post is a presentation of this database engine and some informations about its utilization.</p>
<p>H2 is a <strong>pure Java database</strong>. It can work as <strong>embedded database</strong> or in <strong>server mode</strong>. The developers of the database have made all to have a very small footprint for this database, it takes around 1MB jar file size.</p>
<!--more-->

<p></p><h4>Performances</h4>
<p>Another feature the developers find important in this database is the performance. Here are two comparison graphs for H2, Derby and HSQLDB, generated directly from the benchmark data from the official H2 site.</p>
<p><a href="../../../wp-content/uploads/2010/08/Perfs-Embedded.png"><img class="size-full wp-image-894" title="Performances of H2 in Embedded Mode" src="../../../wp-content/uploads/2010/08/Perfs-Embedded.png" alt="Performances of H2 in Embedded Mode" width="317" height="272"></a></p>
<p><a href="../../../wp-content/uploads/2010/08/Perfs-Server.png"><img class="size-full wp-image-893" title="Performances of H2 in Server Mode" src="../../../wp-content/uploads/2010/08/Perfs-Server.png" alt="Performances of H2 in Server Mode" width="301" height="278"></a></p>
<p>As you can see, the performances of H2 are very good. It's the main reason I've used H2 instead of HSQLDB.</p>
<h4>Modes</h4>

<p>H2 can work in three modes. Embedded, Server or Mixed modes. In each mode, you can use memory or persistent tables.</p>
<p><a href="../../../wp-content/uploads/2010/08/connection-mode-embedded.png"><img class="aligncenter size-full wp-image-897" title="H2 Embedded Mode" src="../../../wp-content/uploads/2010/08/connection-mode-embedded.png" alt="H2 Embedded Mode"></a></p>
<p>In this mode, the database is only accessible from the current virtual machine. It's the fastest connection mode.</p>
<p><a href="../../../wp-content/uploads/2010/08/connection-mode-remote.png"><img class="aligncenter size-full wp-image-896" title="H2 Server Mode" src="../../../wp-content/uploads/2010/08/connection-mode-remote.png" alt="H2 Server Mode"></a></p>
<p>In this mode, the database runs in a server, so several applications can access the database engines. Of course, this mode is slower than in embedded mode, because all datas are transfered using TCP/IP.</p>
<p><a href="../../../wp-content/uploads/2010/08/connection-mode-mixed.png"><img class="size-full wp-image-895" title="H2 Mixed Mode" src="../../../wp-content/uploads/2010/08/connection-mode-mixed.png" alt="H2 Mixed Mode" width="403" height="240"></a></p>
<p>In this mode, the first application create the application in embedded mode but also start a server to provide access to the database.</p>
<h4>Use</h4>

<p>The use of this database is as simple as the use of any other database. You just have to create to the database using the JDBC Driver and the database will be automatically created if needed or the server launched if needed.</p>
<p>By example, here it's an example to create an database in embedded mode, you just have to do that :</p>
<p>[java]Class.forName("org.hsqldb.jdbcDriver").newInstance();</p>
<p>Connection connexion = DriverManager.getConnection("jdbc:h2:test", "sa",  "");[/java]</p>
<p>test is the name of the database. If the database already exists, the data will be loaded.</p>
<p>You can also create a database in memory. There is no persisting data. When you close the database, there is no data persisted. It's useful for benchmarking by example.  It's also the mode with the best performances. Here is an example to create a memory database (named test) :</p>
<p>[java]Connection connexion = DriverManager.getConnection("jdbc:h2:mem:test", "sa",  "");[/java]</p>
<p>To start the server, you have two choice. You can launch it from the command line :</p>
<p>[java]java -cp h2*.jar org.h2.tools.Server[/java]</p>
<p>Or programmatically :</p>
<p>[java]Server server = Server.createTcpServer(args).start();</p>
<p>...</p>
<p>server.stop();[/java]</p>
<p>And to connect to a remove server, just change the JDBC URL :</p>
<p>[java]Connection connexion = DriverManager.getConnection("jdbc:h2:tcp://localhost/~/test", "sa",  "");[/java]</p>
<p>The database is closed when the last connection to the database is closed.</p>
<p>The SQL used is strandard SQL with some adds to support the features of H2. The syntax is described on the oficial site : <a href="http://www.h2database.com/html/grammar.html" target="_blank">SQL Grammar</a>. By example, here are the SQL requests for creating the different types of database of H2 :</p>
<p>[sql]CREATE CACHED TABLE cachedTable ...</p>
<p>CREATE MEMORY TABLE memTable ...</p>
<p>CREATE MEMORY TEMPORARY TABLE memTempTable ...</p>
<p>CREATE CACHED TEMPORARY TABLE memTempTable ...[/sql]</p>
<ul>
    <li>A cached table is the default type of table. The data are persistent and not limited by the memory.</li>
    <li>A memory table is also persistent but the index of data is kept in the memory, so memory table cannot be too large.</li>
    <li>A temporary table is deleted when closing the database.</li>
</ul>

<p>So, I think we covered here the main things we must know to start using H2 Database Engine.</p>
<p>For more informations, consult <a href="http://www.h2database.com/" target="_blank">the official site</a>.</p></div>
    </div>
    </div>
    
        <ul class="pager">
            <li class="previous">
                <a href="java-file-copy-benchmarks-update.html" rel="prev">← Previous post</a>
            </li>
            <li class="next">
                <a href="tip-launch-java-applications-from-java-applications-with-ant.html" rel="next">Next post →</a>
            </li>
        </ul>

        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="nikolademo",
            disqus_url="http://wichtounet.github.io/posts/2010/08/presentation-usage-h2-database-engine.html",
        disqus_title="Presentation and use of H2 Database Engine",
        disqus_identifier="cache/posts/2010/08/presentation-usage-h2-database-engine.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


    

    </article>

        </div>
        <!--End of body content-->

        <footer>
            Contents © 2014         <a href="mailto:baptistewicht@gmail.com">Baptiste Wicht</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/4.0/88x31.png"></a>
        </footer>
    </div>
</div>


            <script src="../../../assets/js/all-nocdn.js" type="text/javascript"></script>


    
<!-- Social buttons -->
<div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul><li><a class="addthis_button_facebook"></a>
</li><li><a class="addthis_button_google_plusone_share"></a>
</li><li><a class="addthis_button_linkedin"></a>
</li><li><a class="addthis_button_twitter"></a>
</li></ul>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script>
<!-- End of social buttons -->


    <script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script>
    

</body>
</html>