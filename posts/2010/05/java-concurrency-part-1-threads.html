<!DOCTYPE html><html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Baptiste Wicht">
    <title>Java Concurrency - Part 1 : Threads | @Blog("Baptiste Wicht")</title>
    
            <link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
      <link rel="canonical" href="http://wichtounet.github.io/posts/2010/05/java-concurrency-part-1-threads.html">
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
            <link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">

    





    
<link rel="stylesheet" type="text/css" href="../../../assets/css/tipuesearch.css">
</head><body><div id="tipue_search_content" style="margin-left: auto; margin-right: auto; padding: 20px;"></div>



<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid"><!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://wichtounet.github.io/">@Blog("Baptiste Wicht")</a>
        </div><!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                
                <li><a href="../../../stories/about.html">About</a>
                </li><li><a href="../../../stories/publications.html">Publications</a>
                </li><li><a href="../../../stories/donate.html">Donate</a>
                </li><li><a href="../../../stories/faq.html">FAQ</a>
                </li><li><a href="../../../stories/legal.html">Legal</a>
                </li><li><a href="../../../archive.html">Archives</a>
                </li><li><a href="../../../categories/index.html">Tags</a>
                </li><li><a href="../../../rss.xml">RSS</a>

            </li></ul>
                
<span class="navbar-form pull-left">
<input type="text" id="tipue_search_input">
</span>

            <ul class="nav navbar-nav navbar-right">
                
                
                    
    <li>
    <a href="java-concurrency-part-1-threads.wp" id="sourcelink">Source</a>
    </li>

            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

<!-- End of Menubar -->

<div class="container">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
    <article class="postbox post-text">
    <div class="h-entry" itemscope="itemscope" itemtype="http://schema.org/Article">
    
    <h1 class="p-name" itemprop="headline name">Java Concurrency - Part 1 : Threads</h1>

    <hr>
    <small>
        Posted: <time class="published dt-published" datetime="2010-05-07T06:12:33+00:00" itemprop="datePublished">2010-05-07 06:12</time>
        

        
          |  
        More posts about 
    <span itemprop="keywords">
        <a class="tag p-category" href="../../../categories/concurrency.html"><span class="badge badge-info">Concurrency</span></a>
        <a class="tag p-category" href="../../../categories/java.html"><span class="badge badge-info">Java</span></a>
    </span>


    </small>
    <hr>
    <div class="e-content" itemprop="articleBody text">
    <div><p></p><p>This post is the first of set of posts about <strong>Java Concurrency</strong>.</p>
<p>The concurrency is the fact to made several things at the same time using several threads.</p>
<p>A thread, also called <strong>Lightweight Process</strong>, is treatment unity. Threads executes code in <strong>parallel</strong> of each other threads currently running. When you've only one processor, there is a thread running at the same time of the others, you only have the impression of <strong>concurrency</strong> (I don't say it's not useful, I say it's different), but when you've <strong>multiple processors</strong>, you'll see the power of multithreading. In this case, you can have your threads distributed on the processors of the computer.</p>
<!--more-->

<p>In Java, a thread is an instance of the class java.lang.Thread. A Thread can be managed in one of these two ways :</p>
<p></p><ol>
    <li>Directly mapped to a native thread of the operating system. This is used when the operating system provide a preemptive threading system.</li>
    <li>Managed by the virtual machine in a preemptive way.</li>
</ol>
<p>A preemptive system, is a system in which the threads are managed by a scheduler and can be interrupted at any time to give processor to an other thread. When you program, you doesn't have to pay attention of which type of threads you use, the result will normally be the same. But you've to know that there can differences between operating systems.</p>
<p>There is three very important concepts when doing concurrent programming :</p>
<ol>
    <li>Atomicity : An operation is said atomic when it cannot be interrupted. There is almost no atomic operations in Java, the only we've is the assignation a = 5, but a = b++ is not atomic. In some cases, you'll have to make atomic some actions with synchronization, we'll see later how to do that.</li>
    <li>Visibility : This occurs when a thread must watch the actions of an other threads by example the termination of the thread. This also implies some kind of synchronization.</li>
    <li>Order of execution : When you have normal program, all you lines of code run in the same order every time you launch the application. This is not the case when you make concurrent programming. You first instruction can followed by an instruction of the thread B or by the first instruction. And that can change every time you launch the application. <strong>The order of execution is not guaranteed !</strong> I will certainly repeat that sometimes, but that's important to know.</li>
</ol>

<p>We'll see these concepts more deeply in the others parts of the set.</p>
<p>Lets start introducing the Thread class in Java. You can create threads in two ways :</p>
<ol>
    <li>Extends <strong>Thread</strong></li>
    <li>Implements <strong>Runnable</strong> and pass an instance of your news class to the Thread constructor</li>
</ol>

<p>The first solution isn't a good solution because what you're creating is not a new specialized thread, but several instructions to run in a new Thread, namely a Runnable. Implementing Runnable is also better because Runnable is an interface and so, you can also extends a class and implementing Runnable, that's useful in some cases.</p>
<p>In my examples, I'll always use the second way. So let's declare our first Runnable :</p>
<p>[java]public class MyFirstRunnable implements Runnable{
    @Override
    public void run() {
        System.out.println("In a thread");
    }
}[/java]</p>
<p>And use it to create a new Thread and start it :</p>
<p>[java]Thread thread = new Thread(new MyFirstRunnable());</p>
<p>thread.start();[/java]</p>
<p>The Thread will stopped when the end of the run() will be reached. You cannot force a thread to stop (there is stop() method, but deprecated), we'll see later how to properly stop a thread.</p>
<p>And now, what happens if we add a simple line of code to our program :</p>
<p>[java]Thread thread = new Thread(new MyFirstRunnable());</p>
<p>thread.start();</p>
<p>System.out.println("In the main Thread");[/java]</p>
<p>Can you predict the result of this code ? Nobody can't, it's not predictable, you can have :</p>
<pre>In a thread

In the main Thread</pre>

<p>or</p>
<pre>In the main Thread

In a thread</pre>

<p>And we cannot do better than that.</p>
<p>You can use the Runnable several times :</p>
<p>[java]Runnable runnable = new MyFirstRunnable();</p>
<p>for(int i = 0; i &amp;lt; 25; i++){
    new Thread(runnable).start();
}[/java]</p>
<p>Now, 25 threads are launched.</p>
<p>You can also give names to Thread using the setName() method. You can get the name of the current thread using Thread.currentThread().getName(). Let's do a little example :</p>
<p>[java]public class MySecondRunnable implements Runnable{
    @Override
    public void run() {
        System.out.printf("I'm running in thread %s \n", Thread.currentThread().getName());
    }
}[/java]</p>
<p>[java]Runnable runnable = new MySecondRunnable();</p>
<p>for(int i = 0; i &amp;lt; 25; i++){
    Thread thread = new Thread(runnable);
    thread.setName("Thread " + i);
    thread.start();
}[/java]</p>
<p>This is the best example to see that the other is unpredictable. Here are two executions on my machine :</p>
<p>1.</p>
<pre>I'm running in thread Thread 0

I'm running in thread Thread 1

I'm running in thread Thread 2

I'm running in thread Thread 3

I'm running in thread Thread 4

I'm running in thread Thread 5

I'm running in thread Thread 7

I'm running in thread Thread 14

I'm running in thread Thread 13

I'm running in thread Thread 12

I'm running in thread Thread 11

I'm running in thread Thread 10

I'm running in thread Thread 9

I'm running in thread Thread 8

I'm running in thread Thread 6

I'm running in thread Thread 15

I'm running in thread Thread 16

I'm running in thread Thread 17

I'm running in thread Thread 18

I'm running in thread Thread 19

I'm running in thread Thread 20

I'm running in thread Thread 21

I'm running in thread Thread 22

I'm running in thread Thread 23

I'm running in thread Thread 24</pre>

<p>2.</p>
<pre>I'm running in thread Thread 0

I'm running in thread Thread 1

I'm running in thread Thread 2

I'm running in thread Thread 3

I'm running in thread Thread 4

I'm running in thread Thread 5

I'm running in thread Thread 6

I'm running in thread Thread 7

I'm running in thread Thread 8

I'm running in thread Thread 9

I'm running in thread Thread 10

I'm running in thread Thread 11

I'm running in thread Thread 12

I'm running in thread Thread 13

I'm running in thread Thread 14

I'm running in thread Thread 15

I'm running in thread Thread 16

I'm running in thread Thread 17

I'm running in thread Thread 18

I'm running in thread Thread 19

I'm running in thread Thread 20

I'm running in thread Thread 21

I'm running in thread Thread 22

I'm running in thread Thread 23

I'm running in thread Thread 24</pre>

<p>Like you can see, the order the threads instructions are executed is not guaranteed at all.</p>
<p>So here we are with the first part of this suite of articles about Java Concurrency. In the next post, we'll see the operations you can make directly on threads (stopping, joining, sleeping, ...).</p>
<p>I hope you found that post interesting.</p>
<p>The sources of this post are available here : <a href="../../../wp-content/uploads/2010/05/Part1.tar.gz">Java Concurrency Sources Part 1</a>. </p></div>
    </div>
    </div>
    
        <ul class="pager">
            <li class="previous">
                <a href="develop-a-modular-application-bases.html" rel="prev">← Previous post</a>
            </li>
            <li class="next">
                <a href="modular-application-modules.html" rel="next">Next post →</a>
            </li>
        </ul>

        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="nikolademo",
            disqus_url="http://wichtounet.github.io/posts/2010/05/java-concurrency-part-1-threads.html",
        disqus_title="Java Concurrency - Part 1 : Threads",
        disqus_identifier="cache/posts/2010/05/java-concurrency-part-1-threads.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


    

    </article>

        </div>
        <!--End of body content-->

        <footer>
            Contents © 2014         <a href="mailto:baptistewicht@gmail.com">Baptiste Wicht</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/4.0/88x31.png"></a>
        </footer>
    </div>
</div>


            <script src="../../../assets/js/all-nocdn.js" type="text/javascript"></script>


    
<!-- Social buttons -->
<div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul><li><a class="addthis_button_facebook"></a>
</li><li><a class="addthis_button_google_plusone_share"></a>
</li><li><a class="addthis_button_linkedin"></a>
</li><li><a class="addthis_button_twitter"></a>
</li></ul>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script>
<!-- End of social buttons -->


    <script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script>
    

<script type="text/javascript" src="../../../assets/js/tipuesearch_set.js"></script>
<script type="text/javascript" src="../../../assets/js/tipuesearch.js"></script>
<script type="text/javascript">
$(document).ready(function() {
  $('#tipue_search_input').tipuesearch({
      'mode': 'json',
      'contentLocation': '/assets/js/tipuesearch_content.json',
      'showUrl': false
  });
});
</script>


</body></html>