<!DOCTYPE html>
<html lang=en><head><link href=favicon.ico rel=icon type=image/x-icon><meta name=viewport content="width=device-width, initial-scale=1.0"><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=author content="Baptiste Wicht"><title>Better exception handling in Java 7 : Multicatch and final rethrow | @Blog("Baptiste Wicht")</title><link href=../../../assets/css/all-nocdn.css rel=stylesheet type=text/css><link rel=canonical href=http://baptiste-wicht.com/posts/2010/05/better-exception-handling-in-java-7-multicatch-and-final-rethrow.html><link rel=alternate type=application/rss+xml title=RSS href=../../../rss.xml><script type=text/javascript>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2175227-7']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script></head><body><div class=social_container> <div class=social_container_gplus> <a target=_blank title="Share on Google+" href="https://plusone.google.com/_/+1/confirm?hl=en&amp;url=http://baptiste-wicht.com/posts/2010/05/better-exception-handling-in-java-7-multicatch-and-final-rethrow.html"><img src=../../../assets/img/google_plus.png></a> </div> <div class=social_container_facebook> <a target=_blank title="Share on Facebook" href="http://www.facebook.com/sharer/sharer.php?u=#url"><img src=../../../assets/img/facebook.png></a> </div> <div class=social_container_twitter> <a target=_blank title="Tweet on Twitter" href="http://twitter.com/home?status=#url"><img src=../../../assets/img/twitter.svg></a> </div></div><nav class="navbar navbar-inverse navbar-fixed-top" role=navigation> <div class=container-fluid> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-ex1-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=http://baptiste-wicht.com/>@Blog("Baptiste Wicht")</a> </div> <div class="collapse navbar-collapse navbar-ex1-collapse"> <ul class="nav navbar-nav"> <li><a href=../../../stories/about.html>About</a> </li><li><a href=../../../stories/publications.html>Publications</a> </li><li><a href=../../../stories/donate.html>Donate</a> </li><li><a href=../../../stories/contact.html>Contact</a> </li><li><a href=../../../stories/faq.html>FAQ</a> </li><li><a href=../../../stories/legal.html>Legal</a> </li><li><a href=../../../categories/index.html>Tags</a> </li><li><a href=../../../archive.html>Archives</a> </li><li><a href=http://feeds.feedburner.com/BaptisteWicht>RSS</a> </li></ul> <span class="navbar-form pull-left"> <form action=../../../stories/search.html> <input type=text name=q id=tipue_search_input> </form> </span> <ul class="nav navbar-nav navbar-right"> <li> <a target=_blank title="Follow @wichtounet on Twitter" href=https://twitter.com/wichtounet> <img src=../../../assets/img/twitter.svg alt="Follow @wichtounet on Twitter"> </a> </li> <li> <a target=_blank title="Follow +BaptisteWicht on Google+" href=https://plus.google.com/+BaptisteWicht> <img src=../../../assets/img/google_plus.svg alt="Follow +BaptisteWicht on Google+"> </a> </li> </ul> </div> </div></nav><div class=body-container> <div class=left-sidebar> <div class=left-sidebar-widget> <div class=left-sidebar-widget-content> <div class=g-person data-width=275 data-href=//plus.google.com/u/0/103113673902796202116 data-theme=dark data-layout=landscape data-rel=author></div> </div> </div> <div class=left-sidebar-widget> <h3>Related posts</h3> <div class=left-sidebar-widget-content> <ol><li><a href=../02/java-keywords.html>The reserved keywords of the Java Language</a></li><li><a href=../04/java-7-updates-project-coin.html>Java 7 : Languages updates from Project Coin</a></li><li><a href=../../2011/07/java-7-has-been-released.html>Java 7 has been released!</a></li><li><a href=../09/a-better-swingworker.html>Swing tip : A better SwingWorker without exception swallowing</a></li><li><a href=../08/java-7-try-with-resources-statement.html>Java 7 : The new try-with-resources statement</a></li></ol> </div> </div> <div class=left-sidebar-widget> <h3>Recent comments</h3> <div class=left-sidebar-widget-content> <div id=recentcomments class=dsq-widget> <script type=text/javascript src="http://blogwichtounet.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=28&amp;excerpt_length=50"></script> </div> </div> </div> <div class=left-sidebar-widget> <h3>Blogroll</h3> <div class=left-sidebar-widget-content> <ul> <li><a target=_blank href=http://www.asjava.com/>AsJava.com : Java Tutorial</a></li> <li><a target=_blank href=http://www.mkyong.com/>Mkyong : Java Tutorials</a></li> </ul> </div> </div> </div> <div class=container> <div class=body-content> <div class=row> <article class="postbox post-text"> <div class=h-entry itemscope=itemscope itemtype=http://schema.org/Article> <h1 class=p-name itemprop="headline name">Better exception handling in Java 7 : Multicatch and final rethrow</h1> <hr> <small> Posted: <time class="published dt-published" datetime=2010-05-05T06:08:53+02:00 itemprop=datePublished>2010-05-05 06:08</time>   |   More posts about <span itemprop=keywords> <a class="tag p-category" href=../../../categories/java.html><span class="badge badge-info">Java</span></a> <a class="tag p-category" href=../../../categories/java-7.html><span class="badge badge-info">Java 7</span></a> </span> </small> <hr> <div class=e-content itemprop="articleBody text"> <div><p>I'm happy to announce that an other improvement from the Project Coin has be marked for inclusion in Java 7 : Improved Exception Handling for Java, from Neal Gafter. This has been announced by Joe Darcy on <a href=http://blogs.sun.com/darcy/entry/project_coin_multi_catch_rethrow target=_blank>his blog</a>. </p><p>This improvement add two litlte improvements to exception handling :</p><p></p><ul> <li>Multicatch : You'll now be able to catch multi exceptions type in one catch block</li> <li>Final Rethow : Allows you to catch an exception type and it's subtype and rethrow it without having to add a throws clause to the method signature.</li></ul><p>Often, we have that kind of code :</p><div class=code><pre><span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>FirstException</span> <span class=n>ex</span><span class=o>)</span> <span class=o>{</span>
     <span class=n>logger</span><span class=o>.</span><span class=na>error</span><span class=o>(</span><span class=n>ex</span><span class=o>);</span>
     <span class=k>throw</span> <span class=n>ex</span><span class=o>;</span>
<span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>SecondException</span> <span class=n>ex</span><span class=o>)</span> <span class=o>{</span>
     <span class=n>logger</span><span class=o>.</span><span class=na>error</span><span class=o>(</span><span class=n>ex</span><span class=o>);</span>
     <span class=k>throw</span> <span class=n>ex</span><span class=o>;</span>
<span class=o>}</span>
</pre></div><p>But that code is heavy for nothing really interesting. A solution is to find a common supertype of these two exceptions type and catch just that type and rethrow it. But that can catch more exceptions than you want. </p><p>So now, with that new feature, you can do : </p><div class=code><pre><span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>FirstException</span> <span class=o>|</span> <span class=n>SecondException</span> <span class=n>ex</span><span class=o>)</span> <span class=o>{</span>
     <span class=n>logger</span><span class=o>.</span><span class=na>error</span><span class=o>(</span><span class=n>ex</span><span class=o>);</span>
    <span class=k>throw</span> <span class=n>ex</span><span class=o>;</span>
<span class=o>}</span>
</pre></div><p>A lot more cleaner, isn't it ?</p><p>And the second improvement is a little more complicated. Imagine that you want to catch all exceptions, make several operations and then rethrow it. The code isn't hard to make, but the big problem is that you must add a throws clause to your method signature to manage the new exception launched by your code and this is not the objective. Now, you can do that without adding an exception throws clause : </p><div class=code><pre><span class=k>try</span> <span class=o>{</span>
     <span class=c1>// some code</span>
<span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=kd>final</span> <span class=n>Throwable</span> <span class=n>ex</span><span class=o>)</span> <span class=o>{</span>
     <span class=c1>// some more code</span>
    <span class=k>throw</span> <span class=n>ex</span><span class=o>;</span>
<span class=o>}</span>
</pre></div><p>Using the final keyword it allows you to throw an exception of the exact dynamic type that will be throwed. So if an IOException occurs, an IOException will be throwed. Of course, you have to declare the exceptions not caught. You throws clauses will exactly the same if you use the code (in //some code) without catching anything but now you can do something if that happens. </p><p>I think multi-catch is a great feature, but for me the final rethrow is not often useful for programmers and perhaps a little weird using the final keyword.</p></div> </div> </div> <ul class=pager> <li class=previous> <a href=jtheque-licensed-under-apache-license-2-0.html rel=prev>← Previous post</a> </li> <li class=next> <a href=sonar-2-1-has-been-released.html rel=next>Next post →</a> </li> </ul> <div id=disqus_thread></div> <script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://baptiste-wicht.com/posts/2010/05/better-exception-handling-in-java-7-multicatch-and-final-rethrow.html",
        disqus_title="Better exception handling in Java 7 : Multicatch and final rethrow",
        disqus_identifier="cache/posts/2010/05/better-exception-handling-in-java-7-multicatch-and-final-rethrow.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script> <noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript> <a href=http://disqus.com class=dsq-brlink rel=nofollow>Comments powered by <span class=logo-disqus>Disqus</span></a> </article> </div> </div> </div></div><footer> Contents © 2014 <a href=mailto:baptistewicht@gmail.com>Baptiste Wicht</a> - Powered by <a href=http://getnikola.com rel=nofollow>Nikola</a><a rel=license href=http://creativecommons.org/licenses/by/4.0/><img alt="Creative Commons License" style=padding-left:5px;border-width:0 src=../../../assets/img/cc.png></a> <ul class=footer_inline_ul> <li> <a href=better-exception-handling-in-java-7-multicatch-and-final-rethrow.wp id=sourcelink>Source</a> </li> </ul></footer> <script src=../../../assets/js/all-nocdn.js type=text/javascript></script><script type=text/javascript src=https://apis.google.com/js/platform.js></script></body></html>