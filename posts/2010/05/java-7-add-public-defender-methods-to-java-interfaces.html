<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Java 7 : Add "public defender methods" to Java interfaces | Blog blog("Baptiste Wicht");</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../rss.xml">
<link rel="canonical" href="https://baptiste-wicht.com/posts/2010/05/java-7-add-public-defender-methods-to-java-interfaces.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Baptiste Wicht">
<link rel="prev" href="oracle-pushes-a-first-version-of-closures.html" title="Java 7 : Oracle pushes a first version of closures" type="text/html">
<link rel="next" href="../06/java-7-translucency-shaped-windows.html" title="Java 7 : Translucency and shaped windows" type="text/html">
<meta property="og:site_name" content='Blog blog("Baptiste Wicht");'>
<meta property="og:title" content='Java 7 : Add "public defender methods" to Java interfaces'>
<meta property="og:url" content="https://baptiste-wicht.com/posts/2010/05/java-7-add-public-defender-methods-to-java-interfaces.html">
<meta property="og:description" content="At this time, we aren't sure that the closures will be included in the Java 7 release. But these doubts have generated a new project : The &quot;public defender methods&quot; proposal.
This new proposal for Jav">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2010-05-31T06:29:54+02:00">
<meta property="article:tag" content="Closures">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Java 7">
<link href="../../../favicon.ico" rel="icon" type="image/x-icon">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-2175227-7', 'auto');
  var metas = document.getElementsByTagName('meta'), tagsList = [];
  for (var i=0; i<metas.length; i++) {
    if (metas[i].getAttribute('property') == 'article:tag') {
      tagsList.push( metas[i].getAttribute('content'));
    }
  }
  ga('set', 'dimension1', tagsList.join('|'));
  ga('send', 'pageview');
</script>
</head>
<body>

<!-- Menubar -->

<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<div class="container-fluid">
<!-- This keeps the margins nice -->
    <div class="row">
        <div class="col-sm-3 col-lg-2">
            <nav class="navbar navbar-inverse navbar-fixed-side"><div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="https://baptiste-wicht.com/">
                        <span id="blog-title">Blog blog("Baptiste Wicht");</span>
                    </a>
                </div>
<!-- /.navbar-header -->

                <div class="collapse navbar-collapse navbar-ex1-collapse">
                    <ul class="nav navbar-nav">
<li>
<a href="../../../stories/about.html">About</a>
                </li>
<li>
<a href="../../../stories/publications.html">Publications</a>
                </li>
<li>
<a href="../../../stories/projects.html">Projects</a>
                </li>
<li>
<a href="../../../categories/index.html">Tags</a>
                </li>
<li>
<a href="../../../archive.html">Archives</a>


                            </li>
<li class="navbar-content">
                                <h3>Related posts</h3>
                            </li>
                            

                            <li><a href="../07/state-of-the-lambda.html">State of the Lambda</a></li>
<li><a href="../04/java-7-more-dynamics.html">Java 7 : More dynamics</a></li>
<li><a href="oracle-pushes-a-first-version-of-closures.html">Java 7 : Oracle pushes a first version of closures</a></li>
<li><a href="../04/java-7-updates-project-coin.html">Java 7 : Languages updates from Project Coin</a></li>
<li><a href="../../2011/07/java-7-has-been-released.html">Java 7 has been released!</a></li>
<li><a href="../04/java-7-the-new-java-util-objects-class.html">Java 7 : The new java.util.Objects class</a></li>


                            <li class="navbar-block">

                        <li class="wicht-navbar-right">
                            <a target="_blank" title="Follow @wichtounet on Twitter" href="https://twitter.com/wichtounet">
                                <img src="../../../assets/img/twitter.png" alt="Follow @wichtounet on Twitter"></a>
                        </li>

                    </ul>
</div>
<!-- /.navbar-collapse -->
            </nav>
</div> <!-- col -->
        <div class="col-sm-9 col-lg-10">
            <div id="content"></div>
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Java 7 : Add "public defender methods" to Java interfaces</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Baptiste Wicht
            </span></p>
            <p class="dateline">
            <a href="#" rel="bookmark">
            <time class="published dt-published" datetime="2010-05-31T06:29:54+02:00" itemprop="datePublished" title="2010-05-31 06:29">2010-05-31 06:29</time></a>
            </p>
                <p class="commentline">
    
    <a href="java-7-add-public-defender-methods-to-java-interfaces.html#disqus_thread" data-disqus-identifier="cache/posts/2010/05/java-7-add-public-defender-methods-to-java-interfaces.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="java-7-add-public-defender-methods-to-java-interfaces.wp" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>At this time, we aren't sure that the closures will be included in the Java 7 release. But these doubts have generated a new project : <a href="http://cr.openjdk.java.net/~darcy/DefenderMethods.pdf" target="_blank">The "public defender methods" proposal</a>.</p>
<p>This new proposal for Java 7 wants to improve the interfaces allowing to add new methods to existing interfaces. The classes implementing the interfaces doesn't need implements these methods. The implementation of these methods are provided using static methods. This could be called virtual extension method.</p>
<!-- TEASER_END -->

<p>To illustrate the problem the proposal want to solve, let's take the example of reversing a List. When you have a List and you want to reverse it, you have to use the Collections.reverse() method :</p>
<div class="code"><pre class="code literal-block"><span class="n">List</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">();</span>
<span class="c1">//...</span>
<span class="n">Collections</span><span class="p">.</span><span class="na">reverse</span><span class="p">(</span><span class="n">strings</span><span class="p">);</span>
</pre></div>

<p>But there is some problems with that code. Because it's a static method, there is no way to override it. We could imagine data structures where the reverse must be made using special algorithms to be efficient. An other problem is that the reverse() method is not in the List interface, so must learn two classes to make a simple thing as reversing a list.</p>
<p>The "public defender methods" give an other way to do that extending the List interface :</p>
<div class="code"><pre class="code literal-block"><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">List</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Collection</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">...</span>
<span class="w">  </span><span class="n">extension</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">reverse</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">Collections</span><span class="p">.</span><span class="na">reverse</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>This add a new method to the List with a default implement that use the Collections.reverse(List list) static method. The list will be passed as the first argument of the static method. So, now that you have a method reverse on the List, you can do that :</p>
<div class="code"><pre class="code literal-block"><span class="n">List</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">();</span>
<span class="c1">//...</span>
<span class="n">strings</span><span class="p">.</span><span class="na">reverse</span><span class="p">();</span>
</pre></div>

<p>This code is a lot better than the other, isn't it ?</p>
<p>You can now override the reverse method providing an implementation specific to your class. But the implementation is now optional. That solve all the problems we see earlier.</p>
<p>To solve multiple inheritance issue a class implementing two interfaces providing a default implementation for the same method name and signature must provide an implementation of the method.</p>
<p>An other objective of this proposal is to "closur-ize" the Java 7 librairies. By example, we could think of a filter() method to the List interface :</p>
<div class="code"><pre class="code literal-block"><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">List</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Collection</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">...</span>

<span class="w">  </span><span class="n">extension</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span><span class="n">Predicate</span><span class="w"> </span><span class="n">predicate</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">Collections</span><span class="p">.</span><span class="na">filter</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>And a predicate like that :</p>
<div class="code"><pre class="code literal-block"><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Predicate</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">accept</span><span class="p">(</span><span class="n">E</span><span class="w"> </span><span class="n">object</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>That type of method can take advantage of closures. We can also imagine reduce, forEach, expand, ....</p>
<p>At this time, this is only a proposal, so we aren't sure it'll be included in Java 7 and the syntax is not definitive.</p>
<p>Personally, i think this is a great improvement and that will make the closures (if we have them a day) more interesting for the Java language.</p>
<p>If you want more information on the implementation, you could <a href="http://cr.openjdk.java.net/~darcy/DefenderMethods.pdf" target="_blank">read the proposal in PDF</a>.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/closures.html" rel="tag">Closures</a></li>
            <li><a class="tag p-category" href="../../../categories/java.html" rel="tag">Java</a></li>
            <li><a class="tag p-category" href="../../../categories/java-7.html" rel="tag">Java 7</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="oracle-pushes-a-first-version-of-closures.html" rel="prev" title="Java 7 : Oracle pushes a first version of closures">Previous post</a>
            </li>
            <li class="next">
                <a href="../06/java-7-translucency-shaped-windows.html" rel="next" title="Java 7 : Translucency and shaped windows">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
    
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="https://baptiste-wicht.com/posts/2010/05/java-7-add-public-defender-methods-to-java-interfaces.html",
        disqus_title="Java 7 : Add \"public defender methods\" to Java interfaces",
        disqus_identifier="cache/posts/2010/05/java-7-add-public-defender-methods-to-java-interfaces.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div> <!-- col -->
    </div>
<!-- row  -->
</div>
<!-- container-fluid -->

<!-- End of Menubar -->

<!-- Footer -->

<footer>
    Contents © 2023         <a href="mailto:baptistewicht@gmail.com">Baptiste Wicht</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         - License: 
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="../../../assets/img/cc.png"></a>
        <ul class="footer_inline_ul">
<li>
    <a href="java-7-add-public-defender-methods-to-java-interfaces.wp" id="sourcelink">Source</a>
    </li>

        </ul></footer><!-- Late loading stuff  --><script src="../../../assets/js/all-nocdn.js"></script><!-- Google platform JS -->
</body>
</html>
