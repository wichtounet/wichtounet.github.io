<!DOCTYPE html>
<html lang=en><head><link href=favicon.ico rel=icon type=image/x-icon><meta name=viewport content="width=device-width, initial-scale=1.0"><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=author content="Baptiste Wicht"><title>Manage focus with Swing in Java | @Blog("Baptiste Wicht")</title><link href=../../../assets/css/all-nocdn.css rel=stylesheet type=text/css><link rel=canonical href=http://wichtounet.github.io/posts/2010/03/java-swing-focus.html><link rel=alternate type=application/rss+xml title=RSS href=../../../rss.xml></head><body><div class=social_container> <div class=social_container_gplus> <a target=_blank title="Share on Google+" href="https://plusone.google.com/_/+1/confirm?hl=en&amp;url=http://wichtounet.github.io/posts/2010/03/java-swing-focus.html"><img src=../../../assets/img/google_plus.png></a> </div> <div class=social_container_facebook> <a target=_blank title="Share on Facebook" href="http://www.facebook.com/sharer/sharer.php?u=#url"><img src=../../../assets/img/facebook.png></a> </div> <div class=social_container_twitter> <a target=_blank title="Tweet on Twitter" href="http://twitter.com/home?status=#url"><img src=../../../assets/img/twitter.svg></a> </div></div><nav class="navbar navbar-inverse navbar-fixed-top" role=navigation> <div class=container-fluid> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-ex1-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=http://wichtounet.github.io/>@Blog("Baptiste Wicht")</a> </div> <div class="collapse navbar-collapse navbar-ex1-collapse"> <ul class="nav navbar-nav"> <li><a href=../../../stories/about.html>About</a> </li><li><a href=../../../stories/publications.html>Publications</a> </li><li><a href=../../../stories/donate.html>Donate</a> </li><li><a href=../../../stories/contact.html>Contact</a> </li><li><a href=../../../stories/faq.html>FAQ</a> </li><li><a href=../../../stories/legal.html>Legal</a> </li><li><a href=../../../archive.html>Archives</a> </li><li><a href=../../../categories/index.html>Tags</a> </li><li><a href=../../../rss.xml>RSS</a> </li></ul> <span class="navbar-form pull-left"> <form action=../../../stories/search.html> <input type=text name=q id=tipue_search_input> </form> </span> <ul class="nav navbar-nav navbar-right"> <li> <a target=_blank title="Follow @wichtounet on Twitter" href=https://twitter.com/wichtounewichtounet> <img src=../../../assets/img/twitter.svg alt="Follow @wichtounet on Twitter"> </a> </li> <li> <a target=_blank title="Follow +BaptisteWicht on Google+" href=https://plus.google.com/+BaptisteWicht> <img src=../../../assets/img/google_plus.svg alt="Follow +BaptisteWicht on Google+"> </a> </li> </ul> </div> </div></nav><div class=body-container> <div class=left-sidebar> <div class=left-sidebar-widget> <div class=left-sidebar-widget-content> <div class=g-person data-width=275 data-href=//plus.google.com/u/0/103113673902796202116 data-theme=dark data-layout=landscape data-rel=author></div> </div> </div> <div class=left-sidebar-widget> <h3>Related posts</h3> <div class=left-sidebar-widget-content> <ol><li><a href=../../2009/12/swing-user-interface-jtable.html>Creation of Swing User Interface : Tables (JTable)</a></li><li><a href=../01/jr-introduction.html>Introduction to JR programming language</a></li><li><a href=../07/profile-applications-java-visualvm.html>Profile your applications with Java VisualVM</a></li><li><a href=../../2012/12/eddic-1-2-1-string-concatenation-and-vector.html>eddic 1.2.1 - string, concatenation and vector</a></li><li><a href=../02/modular-application-jtheque-core-2-0-3.html>Develop a modular application with JTheque Core 2.0.3</a></li></ol> </div> </div> <div class=left-sidebar-widget> <h3>Recent comments</h3> <div class=left-sidebar-widget-content> <div id=recentcomments class=dsq-widget> <script type=text/javascript src="http://blogwichtounet.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=28&amp;excerpt_length=50"></script> </div> </div> </div> <div class=left-sidebar-widget> <h3>Popular posts</h3> <div class=left-sidebar-widget-content> <div id=popularthreads class=dsq-widget> <script type=text/javascript src="http://blogwichtounet.disqus.com/popular_threads_widget.js?num_items=5&amp;days_back=90"></script> </div> </div> </div> <div class=left-sidebar-widget> <h3>Blogroll</h3> <div class=left-sidebar-widget-content> <ul> <li><a target=_blank href=http://www.asjava.com/>AsJava.com : Java Tutorial</a></li> <li><a target=_blank href=http://www.mkyong.com/>Mkyong : Java Tutorials</a></li> </ul> </div> </div> </div> <div class=container> <div class=body-content style="margin-top: -75px;"> <div class=row> <article class="postbox post-text"> <div class=h-entry itemscope=itemscope itemtype=http://schema.org/Article> <h1 class=p-name itemprop="headline name">Manage focus with Swing in Java</h1> <hr> <small> Posted: <time class="published dt-published" datetime=2010-03-10T11:25:00+01:00 itemprop=datePublished>2010-03-10 11:25</time>   |   More posts about <span itemprop=keywords> <a class="tag p-category" href=../../../categories/java.html><span class="badge badge-info">Java</span></a> <a class="tag p-category" href=../../../categories/swing.html><span class="badge badge-info">Swing</span></a> </span> </small> <hr> <div class=e-content itemprop="articleBody text"> <div><h4>1. Introduction</h4><p>The focus is the "selected" state of a component. The component who has the focus is the active component. It's possible to ask focus fror a specific component but normally this is perfectly managed by Swing.</p><p>With this tutorial, you will learn how to ask focus for a specific component and how to define an order of focus. We will also learn a bit about the validation of input fields, the focus listen and the utility of KeyboardFocusManager.</p><h4>2. Ask focus</h4><p>Normally, the focus is managed by a component on the mouse click or when we come to a component with keyboard. A component who is focused is often visually modified, with a special border or an other background color.</p><p>To manage the focus of the windows, it's a little bit different and depends of the operating system, but nothing can give you the guarantee to have focus. On Windows, you can obtain focus on a window using toFront but nothing is guraranteed.</p><p>For the components, you can use the requestFocusInWindow() method :</p><div class=code><pre><span class=n>component</span><span class=o>.</span><span class=na>requestFocusInWindow</span><span class=o>();</span>
</pre></div><p>To obtain the focus, you have to ask focus after the add of the component but before the display of the window.</p><p>Before Java 1.4, you needed to use the requestFocus() method, but now it is not a good idea to use it, because it give also focus to the window of the component, and that's not always possible.</p><h4>3. Navigation keys</h4><p>By default, we navigate in an application with the Tab and Shift+Tab keys. But we can edit these keys.</p><p>For that, we have to get the keys with getFocusTraversalKeys(int id) and add the new key. By example, here is how to add the Enter key for the forward focus navigation :</p><div class=code><pre><span class=n>Set</span> <span class=n>keys</span> <span class=o>=</span> <span class=n>textField</span><span class=o>.</span><span class=na>getFocusTraversalKeys</span><span class=o>(</span><span class=n>KeyboardFocusManager</span><span class=o>.</span><span class=na>FORWARD_TRAVERSAL_KEYS</span><span class=o>);</span>
<span class=n>Set</span> <span class=n>newKeys</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashSet</span><span class=o>(</span><span class=n>keys</span><span class=o>);</span>
<span class=n>newKeys</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>KeyStroke</span><span class=o>.</span><span class=na>getKeyStroke</span><span class=o>(</span><span class=n>KeyEvent</span><span class=o>.</span><span class=na>VK_ENTER</span><span class=o>,</span> <span class=mi>0</span><span class=o>));</span>
<span class=n>textField</span><span class=o>.</span><span class=na>setFocusTraversalKeys</span><span class=o>(</span><span class=n>KeyboardFocusManager</span><span class=o>.</span><span class=na>FORWARD_TRAVERSAL_KEYS</span><span class=o>,</span> <span class=n>newKeys</span><span class=o>);</span>
</pre></div><p>If you want to add a key for the backward navigation, you need to use BACKWARD_TRAVERSAL_KEYS instead of FORWARD_TRAVERSAL_KEYS.</p><h4>4. Validate an input</h4><p>You often need to validate to validate the inputs of the user in a field. The best way to do that is to test the content directly after the focus lost. Of course, there is still Formatter to do that, but it's possible that you must use the validation on a custom component.</p><p>To do that, we'lll use InputVerifier. This InputVerifier enable to get the value of a field when this field lost focus. If the value is not valid, the InputVerifier can execute a particular action by example set the old value in the field insted of the new invalid value or give focus again to the field.</p><p>To use it, we've to create a class extending InputVerifier and use the setInputVerifier() method on the component to test :</p><div class=code><pre><span class=n>CustomInputVerifier</span> <span class=n>verifier</span> <span class=o>=</span> <span class=k>new</span> <span class=n>CustomInputVerifier</span><span class=o>();</span>
<span class=o>...</span>
<span class=n>monComposant</span><span class=o>.</span><span class=na>setInputVerifier</span><span class=o>(</span><span class=n>verifier</span><span class=o>)</span>
</pre></div><p>The inputVerifier class has only two methods :</p><ul> <li>verifiy(JComponent input) : Indicate if the value of the component is correct. It's must be overriden.</li> <li>shouldYieldFocus(JComponent input) : This method idnicate if the component can loose focus or not. If it's return true, the focus change normally to the next component else the focus remains in the</li></ul><p>current component while the input is invalid. By default, it's only return the value of verify().</p><p>For lisibility reasons, it's better to only implement the test of the input value in the verify method and add the other functionalities by example a beep it it's invalid in the shouldYieldFocus method.</p><p>We will see a simple example of InputVerifier. This verifier verify that the value is a number greater than zero but lower than x. If the value is not valid, we simple emit a beep.</p><div class=code><pre><span class=kn>import</span> <span class=nn>java.awt.Toolkit</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>javax.swing.InputVerifier</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>javax.swing.JComponent</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>javax.swing.JTextField</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>NumberInputVerifier</span> <span class=kd>extends</span> <span class=n>InputVerifier</span> <span class=o>{</span>
    <span class=kd>private</span> <span class=kt>int</span> <span class=n>max</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span>

    <span class=kd>public</span> <span class=nf>NumberInputVerifier</span><span class=o>(){</span>
        <span class=k>this</span><span class=o>(</span><span class=mi>100</span><span class=o>);</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=nf>NumberInputVerifier</span><span class=o>(</span><span class=kt>int</span> <span class=n>maximum</span><span class=o>){</span>
        <span class=kd>super</span><span class=o>();</span>

        <span class=k>this</span><span class=o>.</span><span class=na>max</span> <span class=o>=</span> <span class=n>maximum</span><span class=o>;</span>
    <span class=o>}</span>

   <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>shouldYieldFocus</span><span class=o>(</span><span class=n>JComponent</span> <span class=n>input</span><span class=o>)</span> <span class=o>{</span>
        <span class=kt>boolean</span> <span class=n>valid</span> <span class=o>=</span> <span class=n>verify</span><span class=o>(</span><span class=n>input</span><span class=o>);</span>

        <span class=k>if</span> <span class=o>(</span><span class=n>valid</span><span class=o>)</span> <span class=o>{</span>
            <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
            <span class=n>Toolkit</span><span class=o>.</span><span class=na>getDefaultToolkit</span><span class=o>().</span><span class=na>beep</span><span class=o>();</span>
            <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
        <span class=o>}</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>verify</span><span class=o>(</span><span class=n>JComponent</span> <span class=n>input</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>JTextField</span> <span class=n>field</span> <span class=o>=</span> <span class=o>(</span><span class=n>JTextField</span><span class=o>)</span><span class=n>input</span><span class=o>;</span>

        <span class=n>String</span> <span class=n>value</span> <span class=o>=</span> <span class=n>field</span><span class=o>.</span><span class=na>getText</span><span class=o>();</span>
        <span class=kt>int</span> <span class=n>intValue</span><span class=o>;</span>

        <span class=k>try</span> <span class=o>{</span>
            <span class=n>intValue</span> <span class=o>=</span> <span class=n>Integer</span><span class=o>.</span><span class=na>parseInt</span><span class=o>(</span><span class=n>value</span><span class=o>);</span>
        <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>NumberFormatException</span> <span class=n>pe</span><span class=o>)</span> <span class=o>{</span>
            <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
        <span class=o>}</span>

        <span class=k>if</span><span class=o>(</span><span class=n>intValue</span> <span class=o>&amp;</span><span class=n>amp</span><span class=o>;</span><span class=n>lt</span><span class=o>;</span> <span class=mi>0</span> <span class=o>||</span> <span class=n>intValue</span> <span class=o>&amp;</span><span class=n>amp</span><span class=o>;</span><span class=n>gt</span><span class=o>;</span> <span class=n>max</span><span class=o>){</span>
            <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
        <span class=o>}</span>

        <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
    <span class=o>}</span>
<span class=o>}</span>
</pre></div><p>You can of course make a lot of things with this class. You can use it to change the format of a number adding " or , or modify everithing else in the input component.</p><p>You can also use the same InputVerifier for several components. You just have to test the concerned component with the parameter of the verify method. But don't make too complex InputVerifier.</p><h4>5. Listen the focus</h4><p>A first way to know which component has the focus is to use a focus listener. You just have to create a class implementing FocusListener and add this listerner to every components you want to manage. Then, you just have to make things in the methods of the listener : focusGained and focusLost. This way is quite simple, but if you have a lot of components, it will be really heavy to implement.</p><p>An other way is to use the KeyboardFocusManager class. You just have to add a PropertyChangeListener on this class and verify the property focusOwner. You can also listener some other things : the focus of the windows, the changes on the focus order, ... You can find here a complete liste of properties. This times, you'll directly see all the focus changes for all the components in your application. If you want to restrain the set of components, you have to use the first way with FocusListener.</p><div class=code><pre><span class=n>Here</span> <span class=n>is</span> <span class=n>an</span> <span class=n>example</span> <span class=n>with</span> <span class=n>KeyboardFocusManager</span> <span class=o>:</span>

<span class=n>KeyboardFocusManager</span> <span class=n>focusManager</span> <span class=o>=</span> <span class=n>KeyboardFocusManager</span><span class=o>.</span><span class=na>getCurrentKeyboardFocusManager</span><span class=o>();</span>

<span class=n>focusManager</span><span class=o>.</span><span class=na>addPropertyChangeListener</span><span class=o>(</span>
    <span class=k>new</span> <span class=nf>PropertyChangeListener</span><span class=o>()</span> <span class=o>{</span>
        <span class=kd>public</span> <span class=kt>void</span> <span class=nf>propertyChange</span><span class=o>(</span><span class=n>PropertyChangeEvent</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
            <span class=n>String</span> <span class=n>properties</span> <span class=o>=</span> <span class=n>e</span><span class=o>.</span><span class=na>getPropertyName</span><span class=o>();</span>
            <span class=k>if</span> <span class=o>((</span><span class=s>"focusOwner"</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>properties</span><span class=o>))</span> <span class=o>&amp;</span><span class=n>amp</span><span class=o>;</span><span class=n>amp</span><span class=o>;&amp;</span><span class=n>amp</span><span class=o>;</span><span class=n>amp</span><span class=o>;</span> <span class=o>(</span><span class=n>e</span><span class=o>.</span><span class=na>getNewValue</span><span class=o>()</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>))</span> <span class=o>{</span>
                <span class=n>Component</span> <span class=n>component</span> <span class=o>=</span> <span class=o>(</span><span class=n>Component</span><span class=o>)</span><span class=n>e</span><span class=o>.</span><span class=na>getNewValue</span><span class=o>();</span>
                <span class=n>String</span> <span class=n>name</span> <span class=o>=</span> <span class=n>component</span><span class=o>.</span><span class=na>getName</span><span class=o>();</span>

                <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>name</span> <span class=o>+</span> <span class=s>" take focus"</span><span class=o>);</span>
            <span class=o>}</span>
        <span class=o>}</span>
    <span class=o>}</span>
<span class=o>}</span>
</pre></div><h4>6. Manage the order of focus</h4><p>Swing has a correct focus order by default and normally it's enough. But you can change this order, by example to navigate in a complex form. By default, Swing determinate the focus order using the order of adding the components to the content pane.</p><p>Before Java 1.4, you had to use setNextFocusableComponent() on every component to specify the next component to have the focus. This method is now deprecated. We'll use the LayoutFocusTraversalPolicy class to define the focus order in a Swing application.</p><p>For that, we have to create a new class extending FocusTraversalPolicy and define this set of methods :</p><ul> <li><strong>getComponentAfter</strong> : Indicate which component will have focus after the component in parameter.</li> <li><strong>getComponentBefore</strong> : Indicate which component has the focus before the component in parameter.</li> <li><strong>getDefaultComponent</strong> : Indicate which component is the default component of the container on which we've applied the policy. It's used when we swith to this focus cycle.</li> <li><strong>getLastComponent</strong> : Indicate which component is the last of this continer. It's used when we swith to this focus cycle.</li> <li><strong>getFirstComponent</strong> : Indicate which component is the first of this container. It's used when we swith to this focus cycle.</li> <li><strong>getInitialComponent</strong> : Indicate which component must have the focus when the window is displayed.</li></ul><p>Here is a little example :</p><div class=code><pre><span class=kd>public</span> <span class=kd>class</span> <span class=nc>TestFocusTraversalPolicy</span> <span class=kd>extends</span> <span class=n>FocusTraversalPolicy</span> <span class=o>{</span>
    <span class=kd>public</span> <span class=n>Component</span> <span class=nf>getComponentAfter</span><span class=o>(</span><span class=n>Container</span> <span class=n>focusCycleRoot</span><span class=o>,</span> <span class=n>Component</span> <span class=n>aComponent</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>aComponent</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>component1</span><span class=o>))</span> <span class=o>{</span>
            <span class=k>return</span> <span class=n>component2</span><span class=o>;</span>
        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>aComponent</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>component2</span><span class=o>))</span> <span class=o>{</span>
            <span class=k>return</span> <span class=n>component3</span><span class=o>;</span>
        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>aComponent</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>component3</span><span class=o>))</span> <span class=o>{</span>
            <span class=k>return</span> <span class=n>component4</span><span class=o>;</span>
        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>aComponent</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>component4</span><span class=o>))</span> <span class=o>{</span>
            <span class=k>return</span> <span class=n>component5</span><span class=o>;</span>
        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>aComponent</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>component5</span><span class=o>))</span> <span class=o>{</span>
            <span class=k>return</span> <span class=n>component1</span><span class=o>;</span>
        <span class=o>}</span> 

        <span class=k>return</span> <span class=n>component1</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Component</span> <span class=nf>getComponentBefore</span><span class=o>(</span><span class=n>Container</span> <span class=n>focusCycleRoot</span><span class=o>,</span> <span class=n>Component</span> <span class=n>aComponent</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>aComponent</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>component1</span><span class=o>))</span> <span class=o>{</span>
            <span class=k>return</span> <span class=n>component5</span><span class=o>;</span>
        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>aComponent</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>component2</span><span class=o>))</span> <span class=o>{</span>
            <span class=k>return</span> <span class=n>component1</span><span class=o>;</span>
        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>aComponent</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>component3</span><span class=o>))</span> <span class=o>{</span>
            <span class=k>return</span> <span class=n>component2</span><span class=o>;</span>
        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>aComponent</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>component4</span><span class=o>))</span> <span class=o>{</span>
            <span class=k>return</span> <span class=n>component3</span><span class=o>;</span>
        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>aComponent</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>component5</span><span class=o>))</span> <span class=o>{</span>
            <span class=k>return</span> <span class=n>component4</span><span class=o>;</span>
        <span class=o>}</span>

        <span class=k>return</span> <span class=n>component1</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Component</span> <span class=nf>getDefaultComponent</span><span class=o>(</span><span class=n>Container</span> <span class=n>focusCycleRoot</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>component1</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Component</span> <span class=nf>getLastComponent</span><span class=o>(</span><span class=n>Container</span> <span class=n>focusCycleRoot</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>component5</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Component</span> <span class=nf>getFirstComponent</span><span class=o>(</span><span class=n>Container</span> <span class=n>focusCycleRoot</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>component1</span><span class=o>;</span>
    <span class=o>}</span>
<span class=o>}</span>
</pre></div><p>The disadvantage of this technique is that the policy must know all the components. That why we often use an inner class to give it access to the member of the current class. Here is a simple example :</p><div class=code><pre><span class=kd>public</span> <span class=kd>class</span> <span class=nc>View</span> <span class=o>{</span>
    <span class=kd>private</span> <span class=n>Component</span> <span class=n>component1</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>Component</span> <span class=n>component2</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>Component</span> <span class=n>component3</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>Component</span> <span class=n>component4</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>Component</span> <span class=n>component5</span><span class=o>;</span>

    <span class=kd>class</span> <span class=nc>TestFocusTraversalPolicy</span> <span class=kd>extends</span> <span class=n>FocusTraversalPolicy</span> <span class=o>{</span>
        <span class=c1>//Traversal policy methods</span>
        <span class=o>}</span>
<span class=o>}</span>
</pre></div><p>You can also use an inner anonymous class, but with that kind of class, you cannot use it for several components.</p><p>To apply this policy, you have to use the setFocusTraversalPolicy() method of the Container class :</p><div class=code><pre><span class=n>TestFocusTraversalPolicy</span> <span class=n>newPolicy</span> <span class=o>=</span> <span class=k>new</span> <span class=n>TestFocusTraversalPolicy</span><span class=o>();</span>
<span class=n>myContainer</span><span class=o>.</span><span class=na>setFocusTraversalPolicy</span><span class=o>(</span><span class=n>newPo</span>
</pre></div><p>Of course you can define several strategies for several panels or the same policy for several panels.</p><p>If you want to restore the default focus policy, you just have to call setFocusTraversalPolicy() with null as parameter.</p><p>You can also edit the default FocusTraversalPolicy with one of yours with the setDefaultTraversalPolicy() method from the KeyboardFocusManager class.</p><h5>6.1. Simplification</h5><p>But it's not very easy to do that and that can quickly be heavy. So here is a simple class to manage the positions of all the components with an integer :</p><div class=code><pre><span class=kn>import</span> <span class=nn>java.awt.Component</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.awt.Container</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.awt.FocusTraversalPolicy</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.util.HashMap</span><span class=o>;</span>

<span class=cm>/**</span>
<span class=cm> * A focus traversal policy who manage the order of components in the focus cycle using a int.</span>
<span class=cm> * The first component of the cycle  has the position of 0 and all the others follows with an interval of 1.</span>
<span class=cm> * The last component must have the position (size() -1).</span>
<span class=cm> *</span>
<span class=cm> * @author Baptiste Wicht</span>
<span class=cm> *</span>
<span class=cm> */</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>MapFocusTraversalPolicy</span> <span class=kd>extends</span> <span class=n>FocusTraversalPolicy</span> <span class=o>{</span>
    <span class=kd>private</span> <span class=n>HashMap</span> <span class=n>components</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>();</span>
    <span class=kd>private</span> <span class=n>HashMap</span> <span class=n>positions</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>();</span>

    <span class=cm>/**</span>
<span class=cm>     * Add the component to the order with the specfieid position.</span>
<span class=cm>     *</span>
<span class=cm>     * @param component The component to add.</span>
<span class=cm>     * @param position The position of the component in the focus cycle root.</span>
<span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>addComponent</span><span class=o>(</span><span class=n>Component</span> <span class=n>component</span><span class=o>,</span> <span class=kt>int</span> <span class=n>position</span><span class=o>){</span>
        <span class=n>components</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=n>position</span><span class=o>,</span> <span class=n>component</span><span class=o>);</span>
        <span class=n>positions</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=n>component</span><span class=o>,</span> <span class=n>position</span><span class=o>);</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=n>Component</span> <span class=nf>getComponentAfter</span><span class=o>(</span><span class=n>Container</span> <span class=n>parent</span><span class=o>,</span> <span class=n>Component</span> <span class=n>component</span><span class=o>)</span> <span class=o>{</span>
        <span class=kt>int</span> <span class=n>position</span> <span class=o>=</span> <span class=n>positions</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>component</span><span class=o>);</span>

        <span class=k>if</span><span class=o>(</span><span class=n>position</span> <span class=o>=</span> <span class=n>positions</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>-</span> <span class=mi>1</span><span class=o>){</span>
            <span class=n>position</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span>
        <span class=o>}</span>

        <span class=k>return</span> <span class=n>components</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>position</span> <span class=o>+</span> <span class=mi>1</span><span class=o>);</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=n>Component</span> <span class=nf>getComponentBefore</span><span class=o>(</span><span class=n>Container</span> <span class=n>parent</span><span class=o>,</span> <span class=n>Component</span> <span class=n>component</span><span class=o>)</span> <span class=o>{</span>
        <span class=kt>int</span> <span class=n>position</span> <span class=o>=</span> <span class=n>positions</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>component</span><span class=o>);</span>

        <span class=k>if</span><span class=o>(</span><span class=n>position</span> <span class=o>=</span> <span class=mi>0</span><span class=o>){</span>
            <span class=n>position</span> <span class=o>=</span> <span class=n>positions</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>-</span> <span class=mi>1</span><span class=o>;</span>
        <span class=o>}</span>

        <span class=k>return</span> <span class=n>components</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>position</span> <span class=o>-</span> <span class=mi>1</span><span class=o>);</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=n>Component</span> <span class=nf>getDefaultComponent</span><span class=o>(</span><span class=n>Container</span> <span class=n>parent</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>components</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=mi>0</span><span class=o>);</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=n>Component</span> <span class=nf>getFirstComponent</span><span class=o>(</span><span class=n>Container</span> <span class=n>parent</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>components</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=mi>0</span><span class=o>);</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=n>Component</span> <span class=nf>getLastComponent</span><span class=o>(</span><span class=n>Container</span> <span class=n>parent</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>components</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>components</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>-</span> <span class=mi>1</span><span class=o>);</span>
        <span class=o>}</span>
<span class=o>}</span>
</pre></div><p>Vous can use this class as every other focus traversal policy we saw before. Just add all the components before using the policy.</p><p>An other way that you can explore it's to make all your components implementing an interface like Focusable with a getFocusPosition() method and use a policy to make the order with that Focusable components.</p><h4>7. The KeyboardFocusManager class</h4><p>There is also other utilities to the KeyboardFocusManager class.</p><p>First, you can change the component who has the focus with the focusXXX methods. By example, you can use the focusNextComponent() method to give the focus to the next component. you can also give the focus to a specific component with the setFocusOwner method or to a window with with the setActiveWindows method.</p><p>Then, you can also get the active window, the component with the focux and the container who contains the active component. If the components are in an other thread, you have to use the getGlobalXXX methods to get it.</p><h4>8. Conclusion</h4><p>To conclude, you can do almost everithing with the focus system. You can modify the order of focus for the components, say which components must have the focus, make tests on the input fields, know who has the focus. But that's sometimes weird when we start. But once we've understand which classes to use, it is quite simple.</p></div> </div> </div> <ul class=pager> <li class=previous> <a href=bookmarks-bar-disappears-google-chrome.html rel=prev>← Previous post</a> </li> <li class=next> <a href=sonar-2-0-released.html rel=next>Next post →</a> </li> </ul> <div id=disqus_thread></div> <script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://wichtounet.github.io/posts/2010/03/java-swing-focus.html",
        disqus_title="Manage focus with Swing in Java",
        disqus_identifier="cache/posts/2010/03/java-swing-focus.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script> <noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript> <a href=http://disqus.com class=dsq-brlink rel=nofollow>Comments powered by <span class=logo-disqus>Disqus</span></a> </article> </div> </div> </div></div><footer> Contents © 2014 <a href=mailto:baptistewicht@gmail.com>Baptiste Wicht</a> - Powered by <a href=http://getnikola.com rel=nofollow>Nikola</a><a rel=license href=http://creativecommons.org/licenses/by/4.0/><img alt="Creative Commons License" style=padding-left:5px;border-width:0 src=../../../assets/img/cc.png></a> <ul class=footer_inline_ul> <li> <a href=java-swing-focus.wp id=sourcelink>Source</a> </li> </ul></footer> <script src=../../../assets/js/all-nocdn.js type=text/javascript></script><script type=text/javascript src=https://apis.google.com/js/platform.js></script></body></html>