<!DOCTYPE html><html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Baptiste Wicht">
    <title>Compute command-line arguments with Apache Commons CLI | @Blog("Baptiste Wicht")</title>
    
            <link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
      <link rel="canonical" href="http://www.baptiste-wicht.com/posts/2010/10/compute-command-line-arguments-with-apache-commons-cli.html">
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
            <link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">

    





    
</head>
<body>
<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid"><!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://www.baptiste-wicht.com/">@Blog("Baptiste Wicht")</a>
        </div><!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                
                <li><a href="../../../stories/about.html">About</a>
                </li><li><a href="../../../stories/publications.html">Publications</a>
                </li><li><a href="../../../stories/donate.html">Donate</a>
                </li><li><a href="../../../stories/faq.html">FAQ</a>
                </li><li><a href="../../../stories/legal.html">Legal</a>
                </li><li><a href="../../../archive.html">Archives</a>
                </li><li><a href="../../../categories/index.html">Tags</a>
                </li><li><a href="../../../rss.xml">RSS</a>

            </li></ul>

            <ul class="nav navbar-nav navbar-right">
                
                
                    
    <li>
    <a href="compute-command-line-arguments-with-apache-commons-cli.wp" id="sourcelink">Source</a>
    </li>

            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

<!-- End of Menubar -->

<div class="container">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
    <article class="postbox post-text">
    <div class="h-entry" itemscope="itemscope" itemtype="http://schema.org/Article">
    
    <h1 class="p-name" itemprop="headline name">Compute command-line arguments with Apache Commons CLI</h1>

    <hr>
    <small>
        Posted: <time class="published dt-published" datetime="2010-10-14T07:22:45+00:00" itemprop="datePublished">2010-10-14 07:22</time>
        

        
          |  
        More posts about 
    <span itemprop="keywords">
        <a class="tag p-category" href="../../../categories/apache.html"><span class="badge badge-info">Apache</span></a>
        <a class="tag p-category" href="../../../categories/java.html"><span class="badge badge-info">Java</span></a>
        <a class="tag p-category" href="../../../categories/java.html"><span class="badge badge-info">Java</span></a>
        <a class="tag p-category" href="../../../categories/libraries.html"><span class="badge badge-info">Libraries</span></a>
    </span>


    </small>
    <hr>
    <div class="e-content" itemprop="articleBody text">
    <div><p></p><p>For a project at school, I needed to refactor an old code parsing almost 30 command line arguments. I needed to add some more arguments and change some old args, but the old code was not maintainable at all. So I decided to use a library to make the parsing. of the args. </p>
<p>I chose Apache Commons CLI. This is a really simple library to make that parsing. It's not perfect, but it makes the work I needed and is powerful to do that job. </p>
<p>With this API, you have to declare an Options instance. This class is used to describe the command line arguments of the program. Options constructor don't take any arguments. </p>
<p>[java]Options options = new Options();[/java]</p>
<!--more-->

<p>Then you have to use the addOption methods to add some arguments to the application. There is three versions of the methods : </p>
<p></p><ul>
    <li>addOption(Option opt) : Add an option of the class Option. </li>
    <li>addOption(String opt, boolean hasArg, String description) : Add a new option to the arguments. This option has only a short name. </li>
    <li>addOption(String opt, String longOpt, boolean hasArg, String description) : Add a new option to the arguments.  The option has a short name and a long name. </li>
</ul>
<p>We need some explanations here. The short opt is used to define an arg with a simple dash (-shortopt) and the long opt is defined with double dash (--longopt). The hasArg indicate if the parameter accepts an argument. The description is, like its name indicates, the description of the option. It's used to print the help of the program.</p>
<p>Using Option instances you can configure all the properties of an option using the setters and the constructor. Here is all the setters that can be used to configure the option : </p>
<ul>
    <li> void   setArgName(String argName) : The name of the args</li>
    <li> void   setArgs(int num) : The number of args the option takes</li>
    <li>void    setDescription(String description) : The description of the option</li>
    <li> void   setLongOpt(String longOpt) : The long option name</li>
    <li> void   setOptionalArg(boolean optionalArg) : Indicate if the argument of this option is optional</li>
    <li> void   setRequired(boolean required) : Indicate if the option is required or not</li>
    <li>void    setType(Object type) : Set the type of the Option. Here are the supported type : File.class, Number.class, Class.class, Object.class, Url.class</li>
    <li> void   setValueSeparator(char sep) : Set the value separator, it's used to make a system like the property of Java like -Dmaven.test.skip=true, the separator is = </li>
</ul>

<p>There is also an other way to create Option instance, using the OptionBuilder class. It's a little weird because all the methods are static and the method returns a reference to the builder. And then you make a call to the builder instance using the static method. The method are equivalent with the methods of the Option class with different names (withXXX, hasXXX, ...). When you have configured the option, you have to call one of the create methods to create the instance and reset the OptionBuilder. </p>
<p>Once you filled the Options instance with the arguments of the program, you can use it. You have to use a CommandLineParser to parse the Options. There is three implementation of this interface : </p>
<ul>
    <li><strong>BasicParser</strong> : A very simple parser</li>
    <li><strong>PosixParser</strong> : A parser to parse short options</li>
    <li><strong>GnuParser </strong>: A parser to parse both long and short options</li>
</ul>

<p>A simple example using the GnuParser : </p>
<p>[java]CommandLineParser parser = new GnuParser();</p>
<p>CommandLine cmd = parser.parse(options, args);[/java]</p>
<p>You receive a CommandLine object representing all the arguments. The parse() method can throw a ParseException if the given arguments are not valid. With that object, you can get the options that have been passed to the application. For that, you can use the given methods : </p>
<p></p><ul>
    <li>Object  getOptionObject : Return the option value parsed to the specified type</li>
    <li> Properties getOptionProperties(String opt) </li>
    <li> String getOptionValue : Return the value of the option</li>
    <li> String[]   getOptionValues : Return the values of the option</li>
    <li> Object getParsedOptionValue(String opt)  : Return the option value parsed to the specified type</li>
    <li> boolean    hasOption : Indicate if the option has been specified or not</li>
    <li> List   getArgList()  : Return all the args that are not specified args</li>
    <li> String[]   getArgs() : Return all the args that are not specified args</li>
</ul>
<p>With this API, you can also generate the help of the program : </p>
<p>[java]HelpFormatter formatter = new HelpFormatter();</p>
<p>formatter.printHelp( "program", options);[/java]</p>
<p>With that, you display the list of arguments taken by the program. </p>
<p>With that example, we've seen the main features of this library. </p>
<p>For more information, you consult the <a target="_blank" href="http://commons.apache.org/cli/index.html">Apache Commons CLI</a> website. </p></div>
    </div>
    </div>
    
        <ul class="pager">
            <li class="previous">
                <a href="../09/the-pragmatic-programmer-book-review.html" rel="prev">← Previous post</a>
            </li>
            <li class="next">
                <a href="jtheque-core-2-1-0-released.html" rel="next">Next post →</a>
            </li>
        </ul>

        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="nikolademo",
            disqus_url="http://www.baptiste-wicht.com/posts/2010/10/compute-command-line-arguments-with-apache-commons-cli.html",
        disqus_title="Compute command-line arguments with Apache Commons CLI",
        disqus_identifier="cache/posts/2010/10/compute-command-line-arguments-with-apache-commons-cli.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


    

    </article>

        </div>
        <!--End of body content-->

        <footer>
            Contents © 2014         <a href="mailto:baptistewicht@gmail.com">Baptiste Wicht</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
        </footer>
    </div>
</div>


            <script src="../../../assets/js/all-nocdn.js" type="text/javascript"></script>


    
<!-- Social buttons -->
<div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul><li><a class="addthis_button_facebook"></a>
</li><li><a class="addthis_button_google_plusone_share"></a>
</li><li><a class="addthis_button_linkedin"></a>
</li><li><a class="addthis_button_twitter"></a>
</li></ul>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script>
<!-- End of social buttons -->


    <script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script>
    

</body>
</html>