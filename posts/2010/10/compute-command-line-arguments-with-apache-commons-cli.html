<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Compute command-line arguments with Apache Commons CLI | Blog blog("Baptiste Wicht");</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="http://baptiste-wicht.com/posts/2010/10/compute-command-line-arguments-with-apache-commons-cli.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2175227-7']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script><meta name="author" content="Baptiste Wicht">
<link rel="prev" href="../09/the-pragmatic-programmer-book-review.html" title="The Pragmatic Programmer - Book Review" type="text/html">
<link rel="next" href="jtheque-core-2-1-0-released.html" title="JTheque Core 2.1.0 released !" type="text/html">
<meta property="og:site_name" content='Blog blog("Baptiste Wicht");'>
<meta property="og:title" content="Compute command-line arguments with Apache Commons CLI">
<meta property="og:url" content="http://baptiste-wicht.com/posts/2010/10/compute-command-line-arguments-with-apache-commons-cli.html">
<meta property="og:description" content="For a project at school, I needed to refactor an old code parsing almost 30 command line arguments. I needed to add some more arguments and change some old args, but the old code was not maintainable ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2010-10-14T07:22:45+02:00">
<meta property="article:tag" content="Apache">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Libraries">
<link href="../../../favicon.ico" rel="icon" type="image/x-icon">
<link rel="publisher" href="https://plus.google.com/+BaptisteWicht">
</head>
<body>

<!-- Menubar -->

<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<div class="container-fluid">
<!-- This keeps the margins nice -->
    <div class="row">
        <div class="col-sm-3 col-lg-2">
            <nav class="navbar navbar-inverse navbar-fixed-side"><div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="http://baptiste-wicht.com/">
                        <span id="blog-title">Blog blog("Baptiste Wicht");</span>
                    </a>
                </div>
<!-- /.navbar-header -->

                <div class="collapse navbar-collapse navbar-ex1-collapse">
                    <ul class="nav navbar-nav">
<li>
<a href="../../../stories/about.html">About</a>
                </li>
<li>
<a href="../../../stories/publications.html">Publications</a>
                </li>
<li>
<a href="../../../stories/projects.html">Projects</a>
                </li>
<li>
<a href="../../../categories/index.html">Tags</a>
                </li>
<li>
<a href="../../../archive.html">Archives</a>
                </li>
<li>
<a href="http://feeds.feedburner.com/BaptisteWicht">RSS</a>



                            </li>
<li class="navbar-content">
                                <h3>Related posts</h3>
                            </li>
                            

                            <li><a href="../../2012/07/manage-command-line-boost-program-options.html">Manage command-line options with Boost Program Options</a></li>
<li><a href="../04/java-7-the-new-java-util-objects-class.html">Java 7 : The new java.util.Objects class</a></li>
<li><a href="../02/java-keywords.html">The reserved keywords of the Java Language</a></li>
<li><a href="../05/jtheque-licensed-under-apache-license-2-0.html">JTheque licensed under Apache License 2.0</a></li>
<li><a href="../../2012/02/eddic-0-8-64bit-generation.html">EDDIC 0.8 : 64bit generation</a></li>
<li><a href="../../2015/03/named-optional-template-parameters-compile-time.html">Named Optional Template parameters to configure a class at compile-time</a></li>


                            <li class="navbar-block">

                        <li class="wicht-navbar-right">
                            <a target="_blank" title="Follow @wichtounet on Twitter" href="https://twitter.com/wichtounet">
                                <img src="../../../assets/img/twitter.png" alt="Follow @wichtounet on Twitter"></a>
                        </li>

                        <li class="wicht-navbar-right">
                            <a target="_blank" title="Follow +BaptisteWicht on Google+" href="https://plus.google.com/+BaptisteWicht">
                                <img src="../../../assets/img/google_plus.png" alt="Follow +BaptisteWicht on Google+"></a>
                        </li>


                    </ul>
</div>
<!-- /.navbar-collapse -->
            </nav>
</div> <!-- col -->
        <div class="col-sm-9 col-lg-10">
            <div id="content"></div>
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Compute command-line arguments with Apache Commons CLI</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                    Baptiste Wicht
            </span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2010-10-14T07:22:45+02:00" itemprop="datePublished" title="2010-10-14 07:22">2010-10-14 07:22</time></a></p>
                <p class="commentline">
        
    <a href="compute-command-line-arguments-with-apache-commons-cli.html#disqus_thread" data-disqus-identifier="cache/posts/2010/10/compute-command-line-arguments-with-apache-commons-cli.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="compute-command-line-arguments-with-apache-commons-cli.wp" id="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>For a project at school, I needed to refactor an old code parsing almost 30 command line arguments. I needed to add some more arguments and change some old args, but the old code was not maintainable at all. So I decided to use a library to make the parsing. of the args. </p>
<p>I chose Apache Commons CLI. This is a really simple library to make that parsing. It's not perfect, but it makes the work I needed and is powerful to do that job. </p>
<p>With this API, you have to declare an Options instance. This class is used to describe the command line arguments of the program. Options constructor don't take any arguments. </p>
<pre class="code literal-block"><span></span><span class="n">Options</span> <span class="n">options</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Options</span><span class="o">();</span>
</pre>


<!-- TEASER_END -->

<p>Then you have to use the addOption methods to add some arguments to the application. There is three versions of the methods : </p>
<ul>
<li>addOption(Option opt) : Add an option of the class Option. </li>
    <li>addOption(String opt, boolean hasArg, String description) : Add a new option to the arguments. This option has only a short name. </li>
    <li>addOption(String opt, String longOpt, boolean hasArg, String description) : Add a new option to the arguments.  The option has a short name and a long name. </li>
</ul>
<p>We need some explanations here. The short opt is used to define an arg with a simple dash (-shortopt) and the long opt is defined with double dash (--longopt). The hasArg indicate if the parameter accepts an argument. The description is, like its name indicates, the description of the option. It's used to print the help of the program.</p>
<p>Using Option instances you can configure all the properties of an option using the setters and the constructor. Here is all the setters that can be used to configure the option : </p>
<ul>
<li> void   setArgName(String argName) : The name of the args</li>
    <li> void   setArgs(int num) : The number of args the option takes</li>
    <li>void    setDescription(String description) : The description of the option</li>
    <li> void   setLongOpt(String longOpt) : The long option name</li>
    <li> void   setOptionalArg(boolean optionalArg) : Indicate if the argument of this option is optional</li>
    <li> void   setRequired(boolean required) : Indicate if the option is required or not</li>
    <li>void    setType(Object type) : Set the type of the Option. Here are the supported type : File.class, Number.class, Class.class, Object.class, Url.class</li>
    <li> void   setValueSeparator(char sep) : Set the value separator, it's used to make a system like the property of Java like -Dmaven.test.skip=true, the separator is = </li>
</ul>
<p>There is also an other way to create Option instance, using the OptionBuilder class. It's a little weird because all the methods are static and the method returns a reference to the builder. And then you make a call to the builder instance using the static method. The method are equivalent with the methods of the Option class with different names (withXXX, hasXXX, ...). When you have configured the option, you have to call one of the create methods to create the instance and reset the OptionBuilder. </p>
<p>Once you filled the Options instance with the arguments of the program, you can use it. You have to use a CommandLineParser to parse the Options. There is three implementation of this interface : </p>
<ul>
<li>
<strong>BasicParser</strong> : A very simple parser</li>
    <li>
<strong>PosixParser</strong> : A parser to parse short options</li>
    <li>
<strong>GnuParser </strong>: A parser to parse both long and short options</li>
</ul>
<p>A simple example using the GnuParser : </p>
<pre class="code literal-block"><span></span><span class="n">CommandLineParser</span> <span class="n">parser</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GnuParser</span><span class="o">();</span>

<span class="n">CommandLine</span> <span class="n">cmd</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">options</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
</pre>


<p>You receive a CommandLine object representing all the arguments. The parse() method can throw a ParseException if the given arguments are not valid. With that object, you can get the options that have been passed to the application. For that, you can use the given methods : </p>
<p></p>
<ul>
<li>Object  getOptionObject : Return the option value parsed to the specified type</li>
    <li> Properties getOptionProperties(String opt) </li>
    <li> String getOptionValue : Return the value of the option</li>
    <li> String[]   getOptionValues : Return the values of the option</li>
    <li> Object getParsedOptionValue(String opt)  : Return the option value parsed to the specified type</li>
    <li> boolean    hasOption : Indicate if the option has been specified or not</li>
    <li> List   getArgList()  : Return all the args that are not specified args</li>
    <li> String[]   getArgs() : Return all the args that are not specified args</li>
</ul>
<p>With this API, you can also generate the help of the program : </p>
<pre class="code literal-block"><span></span><span class="n">HelpFormatter</span> <span class="n">formatter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HelpFormatter</span><span class="o">();</span>

<span class="n">formatter</span><span class="o">.</span><span class="na">printHelp</span><span class="o">(</span> <span class="s">"program"</span><span class="o">,</span> <span class="n">options</span><span class="o">);</span>
</pre>


<p>With that, you display the list of arguments taken by the program. </p>
<p>With that example, we've seen the main features of this library. </p>
<p>For more information, you consult the <a target="_blank" href="http://commons.apache.org/cli/index.html">Apache Commons CLI</a> website.</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/apache.html" rel="tag">Apache</a></li>
            <li><a class="tag p-category" href="../../../categories/java.html" rel="tag">Java</a></li>
            <li><a class="tag p-category" href="../../../categories/libraries.html" rel="tag">Libraries</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../09/the-pragmatic-programmer-book-review.html" rel="prev" title="The Pragmatic Programmer - Book Review">Previous post</a>
            </li>
            <li class="next">
                <a href="jtheque-core-2-1-0-released.html" rel="next" title="JTheque Core 2.1.0 released !">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://baptiste-wicht.com/posts/2010/10/compute-command-line-arguments-with-apache-commons-cli.html",
        disqus_title="Compute command-line arguments with Apache Commons CLI",
        disqus_identifier="cache/posts/2010/10/compute-command-line-arguments-with-apache-commons-cli.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div> <!-- col -->
    </div>
<!-- row  -->
</div>
<!-- container-fluid -->

<!-- End of Menubar -->

<!-- Footer -->

<footer>
    Contents © 2017         <a href="mailto:baptistewicht@gmail.com">Baptiste Wicht</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         - License: 
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="../../../assets/img/cc.png"></a>
        <ul class="footer_inline_ul">
<li>
    <a href="compute-command-line-arguments-with-apache-commons-cli.wp" id="sourcelink">Source</a>
    </li>

        </ul></footer><!-- Late loading stuff  --><script src="../../../assets/js/all-nocdn.js"></script><!-- Google platform JS -->
</body>
</html>
