<!DOCTYPE html>
<html lang=en><head><link href=favicon.ico rel=icon type=image/x-icon><meta name=viewport content="width=device-width, initial-scale=1.0"><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=description content="Website about vtechnologies Java, Spring, OSGi, Hardware,..."><meta name=author content="Baptiste Wicht"><title>@Blog("Baptiste Wicht") (old posts, page 18) | @Blog("Baptiste Wicht")</title><link href=assets/css/all-nocdn.css rel=stylesheet type=text/css><link rel=canonical href=http://wichtounet.github.io/index-18.html><link rel=alternate type=application/rss+xml title=RSS href=rss.xml><script type=text/javascript>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2175227-7']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script></head><body><div class=social_container> <div class=social_container_gplus> <a target=_blank title="Share on Google+" href="https://plusone.google.com/_/+1/confirm?hl=en&amp;url=http://wichtounet.github.io/index-18.html"><img src=assets/img/google_plus.png></a> </div> <div class=social_container_facebook> <a target=_blank title="Share on Facebook" href="http://www.facebook.com/sharer/sharer.php?u=#url"><img src=assets/img/facebook.png></a> </div> <div class=social_container_twitter> <a target=_blank title="Tweet on Twitter" href="http://twitter.com/home?status=#url"><img src=assets/img/twitter.svg></a> </div></div><nav class="navbar navbar-inverse navbar-fixed-top" role=navigation> <div class=container-fluid> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-ex1-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=http://wichtounet.github.io/>@Blog("Baptiste Wicht")</a> </div> <div class="collapse navbar-collapse navbar-ex1-collapse"> <ul class="nav navbar-nav"> <li><a href=stories/about.html>About</a> </li><li><a href=stories/publications.html>Publications</a> </li><li><a href=stories/donate.html>Donate</a> </li><li><a href=stories/contact.html>Contact</a> </li><li><a href=stories/faq.html>FAQ</a> </li><li><a href=stories/legal.html>Legal</a> </li><li><a href=categories/index.html>Tags</a> </li><li><a href=archive.html>Archives</a> </li><li><a href=http://feeds.feedburner.com/BaptisteWicht>RSS</a> </li></ul> <span class="navbar-form pull-left"> <form action=stories/search.html> <input type=text name=q id=tipue_search_input> </form> </span> <ul class="nav navbar-nav navbar-right"> <li> <a target=_blank title="Follow @wichtounet on Twitter" href=https://twitter.com/wichtounet> <img src=assets/img/twitter.svg alt="Follow @wichtounet on Twitter"> </a> </li> <li> <a target=_blank title="Follow +BaptisteWicht on Google+" href=https://plus.google.com/+BaptisteWicht> <img src=assets/img/google_plus.svg alt="Follow +BaptisteWicht on Google+"> </a> </li> </ul> </div> </div></nav><div class=body-container> <div class=left-sidebar> <div class=left-sidebar-widget> <h3>Welcome to my blog</h3> <div class=left-sidebar-widget-content> <div class=g-person data-width=275 data-href=//plus.google.com/u/0/103113673902796202116 data-theme=dark data-layout=landscape data-rel=author></div> </div> </div> <div class=left-sidebar-widget> <h3>Tags</h3> <div class=left-sidebar-widget-content> <div id=tags_container> <canvas width=275 height=250 id=tags_canvas> <p>Anything in here will be replaced on browsers that support the canvas element</p> </canvas> </div> </div> </div> <div class=left-sidebar-widget> <h3>Recent comments</h3> <div class=left-sidebar-widget-content> <div id=recentcomments class=dsq-widget> <script type=text/javascript src="http://blogwichtounet.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=28&amp;excerpt_length=50"></script> </div> </div> </div> <div class=left-sidebar-widget> <h3>Blogroll</h3> <div class=left-sidebar-widget-content> <ul> <li><a target=_blank href=http://www.asjava.com/>AsJava.com : Java Tutorial</a></li> <li><a target=_blank href=http://www.mkyong.com/>Mkyong : Java Tutorials</a></li> </ul> </div> </div> </div> <div class=container> <div class=body-content> <div class=row> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2012/03/eddic-0-9-1-enhanced-floating-point-support.html class=u-url>EDDIC 0.9.1 - Enhanced floating point support</a> <br><small>   Posted: <time class="published dt-published" datetime=2012-03-23T09:16:53+01:00>2012-03-23 09:16</time> </small></h1> <hr> <div class=p-summary> <div><p>I just released the version <strong>0.9.1</strong> of the <strong>EDDI</strong> Compiler (eddic).</p><p>This release is a minor one, there are no huge changes to the language nor in the compiler itself. But that version was necessary before the 1.0 version. </p><p>The floating point support of the language have been enhanced with casts. You can now cast float values to int and vice-versa. The syntax is the same as in C:</p><div class=code><pre><span class=kt>void</span> <span class=nf>main</span><span class=p>(){</span>
   <span class=kt>float</span> <span class=n>a</span> <span class=o>=</span> <span class=mf>1.5</span><span class=p>;</span>
   <span class=kt>float</span> <span class=n>b</span> <span class=o>=</span> <span class=n>a</span> <span class=o>+</span> <span class=p>(</span><span class=kt>float</span><span class=p>)</span> <span class=mi>100</span><span class=p>;</span>
   <span class=n>println</span><span class=p>((</span><span class=kt>int</span><span class=p>)</span><span class=n>b</span><span class=p>);</span>
<span class=p>}</span>
</pre></div><p>Another improvement is the support for integer suffixes for float: </p><div class=code><pre><span class=kt>void</span> <span class=nf>main</span><span class=p>(){</span>
   <span class=kt>float</span> <span class=n>a</span> <span class=o>=</span> <span class=mf>100f</span><span class=p>;</span>
<span class=p>}</span>
</pre></div><p>Finally, the optimizer has been adapted to support float as well. The optimization techniques are the same as the one for integers. </p><p>Last but not least, the compiler can now pass some parameters in registers. In 32 bits platform, the first integer parameter is passed in a register and on 64 bits platform, the first two parameters are passed in registers. In both architectures, the first float parameter is passed in a SSE register. </p><h4>Future work</h4><p>The next version will be the <strong>1.0 version</strong>. There will be several major changes with this new version. </p><p>First, the optimization engine will be almost entirely rewritten. Global optimization will be added to the engine. </p><p>There will also be some improvements in the intermediate representation. I will probably a second level of intermediate representation: a low-level Three Address Code representation. This new intermediate representation will be generated by an <em>IntelCompiler</em> to handle stuff common to both 32 and 64bits code generator. This will also includes a pass for global register allocation. </p><p>As these changes will not be simple to implement, this version can takes some time before being released. </p><h4>Download</h4><p>You can find the compiler sources on the Github repository: <a title="eddic on GitHub" href=https://github.com/wichtounet/eddic>https://github.com/wichtounet/eddic</a></p><p>The exact version I refer to is the v0.9.1 available in the GitHub tags or directly as the release branch.</p></div> </div> <p> <a href=posts/2012/03/eddic-0-9-1-enhanced-floating-point-support.html#disqus_thread data-disqus-identifier=cache/posts/2012/03/eddic-0-9-1-enhanced-floating-point-support.html>Comments</a> </p></article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2012/03/cpp11-concurrency-part1-start-threads.html class=u-url>C++11 Concurrency - Part 1 : Start Threads</a> <br><small>   Posted: <time class="published dt-published" datetime=2012-03-21T09:16:18+01:00>2012-03-21 09:16</time> </small></h1> <hr> <div class=p-summary> <div><p>C++11 introduced a new thread library. This library includes utilities for starting and managing threads. It also contains utilities for synchronization like mutexes and other locks, atomic variables and other utilities. In this serie of posts, I will try to explain most of the features provided by this new library.</p><p>To compile the samples of this article, you will need a compiler with C++11 support. In my case, I used GCC 4.6.1 (you need to pass the "-std=c++0x" or "-std=c++11" option to get the C++11 support activated).</p><h4>Starting threads</h4><p>Starting a new thread is very easy. When you create an instance of a <strong>std::thread</strong>, it will automatically be started. When you create a thread you have to give it the code it will execute. The first choice for that, is to pass it a function pointer. Let's start with the very common Hello World:</p><div class=code><pre><span class=cp>#include &lt;thread&gt;</span>
<span class=cp>#include &lt;iostream&gt;</span>

<span class=kt>void</span> <span class=nf>hello</span><span class=p>(){</span>
    <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>"Hello from thread "</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
<span class=p>}</span>

<span class=kt>int</span> <span class=nf>main</span><span class=p>(){</span>
    <span class=n>std</span><span class=o>::</span><span class=kr>thread</span> <span class=n>t1</span><span class=p>(</span><span class=n>hello</span><span class=p>);</span>
    <span class=n>t1</span><span class=p>.</span><span class=n>join</span><span class=p>();</span>

    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</pre></div><p>All the threads utilities are located in the <strong>thread</strong> header. An interesting thing in this first example is the call to the <strong>join()</strong> function. Calling this function forces the current thread to wait for the other one (in this case, the main thread has to wait for the thread t1 to finish). If you omit this call, the result is undefined. The program can print <em>Hello from thread</em> and a new line, can print just <em>Hello from thread</em> without new line or can print nothing. That's because the main thread can return from the main function before the t1 thread finishes its execution.</p><h4>Distinguishing threads</h4><p>Each thread has a single id allowing us to distinguish each of them. The std::thread class has a <strong>get_id()</strong> function returning an unique id for this thread. You can get a reference to the current thread with the <strong>std::this_thread</strong> variable. The next example starts with threads and each of them prints its id:</p><div class=code><pre><span class=cp>#include &lt;thread&gt;</span>
<span class=cp>#include &lt;iostream&gt;</span>
<span class=cp>#include &lt;vector&gt;</span>

<span class=kt>void</span> <span class=nf>hello</span><span class=p>(){</span>
    <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>"Hello from thread "</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>this_thread</span><span class=o>::</span><span class=n>get_id</span><span class=p>()</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
<span class=p>}</span>

<span class=kt>int</span> <span class=nf>main</span><span class=p>(){</span>
    <span class=n>std</span><span class=o>::</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=kr>thread</span><span class=o>&gt;</span> <span class=n>threads</span><span class=p>;</span>

    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>5</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>){</span>
        <span class=n>threads</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=kr>thread</span><span class=p>(</span><span class=n>hello</span><span class=p>));</span>
    <span class=p>}</span>

    <span class=k>for</span><span class=p>(</span><span class=k>auto</span><span class=o>&amp;</span> <span class=kr>thread</span> <span class=o>:</span> <span class=n>threads</span><span class=p>){</span>
        <span class=kr>thread</span><span class=p>.</span><span class=n>join</span><span class=p>();</span>
    <span class=p>}</span>

    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</pre></div><p>Starting each thread one after one and then storing them into a vector is a common way to handle several threads. With that, you can easily change the number of threads. Even with a very little sample like this one, the results is not predictable. The theoretic case:</p><pre>Hello from thread 140276650997504
Hello from thread 140276667782912
Hello from thread 140276659390208
Hello from thread 140276642604800
Hello from thread 140276676175616</pre><p>Is, in my case, also the less common. You can also get results like this one:</p><pre>Hello from thread Hello from thread Hello from thread 139810974787328Hello from thread 139810983180032Hello from thread
139810966394624
139810991572736
139810958001920</pre><p>Or a lot of another results. This is because of interleaving. You have no way to control the order of execution of threads. A thread can be preempted at any moment and the appends to the out stream are made one after one (first the append of the string, then append the id and finally the new line), so a thread can print its first part and then be interrupted to print its second part after all the others threads.</p><h4>Start a thread with a lambda</h4><p>When the code that has to be executed by each thread is very small, you don't necessary want to create a function for that. In that case, you can use a lambda to define the executed by a thread. We can rewrite the code of the last sample using lambda easily:</p><div class=code><pre><span class=cp>#include &lt;thread&gt;</span>
<span class=cp>#include &lt;iostream&gt;</span>
<span class=cp>#include &lt;vector&gt;</span>

<span class=kt>int</span> <span class=nf>main</span><span class=p>(){</span>
    <span class=n>std</span><span class=o>::</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=kr>thread</span><span class=o>&gt;</span> <span class=n>threads</span><span class=p>;</span>

    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>5</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>){</span>
        <span class=n>threads</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=kr>thread</span><span class=p>([](){</span>
            <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>"Hello from thread "</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>this_thread</span><span class=o>::</span><span class=n>get_id</span><span class=p>()</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
        <span class=p>}));</span>
    <span class=p>}</span>

    <span class=k>for</span><span class=p>(</span><span class=k>auto</span><span class=o>&amp;</span> <span class=kr>thread</span> <span class=o>:</span> <span class=n>threads</span><span class=p>){</span>
        <span class=kr>thread</span><span class=p>.</span><span class=n>join</span><span class=p>();</span>
    <span class=p>}</span>

    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</pre></div><p>Here we just used a lambda expression instead of the function pointer. Of course, this produces the exact same result as the previous sample.</p><h4>Next</h4><p>In the next post of this series, we will see how to protect code using locks.</p><p>The source code for each sample is available <a title="Source code for this blog post" href=https://github.com/wichtounet/articles/tree/master/src/threads/part1>on Github</a>.</p></div> </div> <p> <a href=posts/2012/03/cpp11-concurrency-part1-start-threads.html#disqus_thread data-disqus-identifier=cache/posts/2012/03/cpp11-concurrency-part1-start-threads.html>Comments</a> </p></article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2012/03/introduction-64-bit-intel-assembly-language-programming-linux-book-review.html class=u-url>Introduction to 64 Bit Intel Assembly Language Programming for Linux - Book Review</a> <br><small>   Posted: <time class="published dt-published" datetime=2012-03-19T09:41:54+01:00>2012-03-19 09:41</time> </small></h1> <hr> <div class=p-summary> <div><p>The first book I read about Intel Assembly was lacking information about 64 bits programming. So I ordered and read <strong>Introduction to 64 Bit Intel Assembly Language Programming for Linux</strong>, by Ray Seyfarth. </p><p>This book covers a lot of subjects in assembly. It is adapted to people starting assembly, but it also contains advanced assembly programming techniques. I think that this book is adapted to a lot of people wanting to improve their skills in Intel Assembly. This book covers only <strong>64 bit Intel Assembly</strong> in details. It does not cover old memory models, only the memory mode used now. </p><p>This book uses yasm to assemble the programs. It uses gdb to debug the assembly programs. </p><p>The first chapters are very general. They are covering numbers (octal, decimal and hexadecimal notions), computer memory and memory mapping mode. </p><p>The first technical chapter covers Registers in details. It defines all the registers available in Intel Assembly. You will see how to move constants to registers. You will also learn how to move values between memory and registers. Then, the next chapter covers all the mathematical operations (negate, addition, subtraction, division and multiplication). It also covers the use of conditional move instructions. The next one is about bit manipulations (not, and, or and shift). It also covers bit testing and filling. </p><p>After that, the chapter eight covers a very important subject: branching and looping. All the jumps are covered in details. You will see how to convert each control structure (if, for, while, do-while) of programming language to assembly. After that, the string instructions are also explained. Once you know how to create control structures, it's time to create your own functions. In that chapter, you will learn the stack and the function call conventions. The stack frames and the recursion are also covered. </p><p>The arrays are covered in the next chapter. You will see how to allocate arrays on the stack or on the heap using malloc. The command line parameters are also covered (that was a very interesting part). </p><p>Then, floating point math is covered. For that, the <strong>Streaming SIMD Extensions</strong> (SSE) are used. All the math operations are covered. As is the way to transfer data between XMM registers and memory. The conversion and comparison instructions are also explained here. Some complete samples like dot product of 3D vectors help us understand the SSE instructions. </p><p>The system calls are covered in details in chapter twelve. The C system library wrapper functions for system calls are also covered. After that, a whole chapter addresses structures. The allocation of structs is also addressed. Then, the way to use I/O streams from assembly is taught. </p><p>A whole chapter is devoted to the implementation of data structures in Intel Assembly. The covered data structures are the linked lists, doubly linked lists, the hash tables and the binary trees. Each common operation on these data structures is implemented. </p><p>After that, the last chapters are about optimization and performances. The chapter 16 covers <strong>High Performance Assembly Programming</strong> in details. In that chapter, you will learn a set of optimization that can be applied to improve the performances of a given code. For example, you will see how to make efficient use of cache or how to make better performing loops. These optimization can also be applied to other programming languages. The following chapters are all covering a single problem and a way to optimize it the most using Intel Assembly. For each of these problems, the C version is compared to the assembly version. Three problems are presented: counting bits in an array of integers, the Sobel filter and computing the correlation of two variables given some sample values. </p><p>To conclude, I found this book very book. It covers a lot of subjects in a very good manner. I liked a lot the performance techniques covered in the book. The deep coverage of SSE instructions was also very interesting.</p></div> </div> <p> <a href=posts/2012/03/introduction-64-bit-intel-assembly-language-programming-linux-book-review.html#disqus_thread data-disqus-identifier=cache/posts/2012/03/introduction-64-bit-intel-assembly-language-programming-linux-book-review.html>Comments</a> </p></article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2012/03/a-new-theme-for-the-site.html class=u-url>A new theme for the site</a> <br><small>   Posted: <time class="published dt-published" datetime=2012-03-17T05:05:49+01:00>2012-03-17 05:05</time> </small></h1> <hr> <div class=p-summary> <div><p>I changed the theme on the site. I used the Sleek theme from Studiopress. </p><p>The main reason to change to this theme was that I replaced some of my addons. For example, the breadcrumbs are already included in the theme. There is also an included widgets for Twitter. </p><p>Another reason is that I find this theme more good looking than the hold one. And finally, this new theme is more up-to-date.</p><p>I hope that you will find this theme adapted. </p><p>I've still some work to do adapting this theme for the site. If you encounter any kind of problems with the new design, don't hesitate to let a comment or to contact me.</p></div> </div> <p> <a href=posts/2012/03/a-new-theme-for-the-site.html#disqus_thread data-disqus-identifier=cache/posts/2012/03/a-new-theme-for-the-site.html>Comments</a> </p></article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2012/03/eddic-0-9-floating-point-support.html class=u-url>EDDIC 0.9 - Floating point support</a> <br><small>   Posted: <time class="published dt-published" datetime=2012-03-07T11:47:38+01:00>2012-03-07 11:47</time> </small></h1> <hr> <div class=p-summary> <div><p>I just finished working on the <strong>0.9 version</strong> of the <strong>EDDIC</strong> Compiler.</p><p>The language does now support <strong>floating point variables</strong>. Here is an example of what can be done in EDDI now:</p><div class=code><pre><span class=kt>void</span> <span class=nf>main</span><span class=p>(){</span>
   <span class=kt>float</span> <span class=n>a</span> <span class=o>=</span> <span class=mf>1.5</span><span class=p>;</span>
   <span class=kt>float</span> <span class=n>b</span> <span class=o>=</span> <span class=mf>3.0</span><span class=p>;</span>
   <span class=kt>float</span> <span class=n>c</span> <span class=o>=</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span><span class=p>;</span>
   <span class=n>println</span><span class=p>(</span><span class=n>c</span><span class=p>);</span>
   <span class=n>c</span> <span class=o>=</span> <span class=n>b</span> <span class=o>+</span> <span class=mf>2.75</span><span class=p>;</span>
   <span class=n>println</span><span class=p>(</span><span class=n>c</span><span class=p>);</span>

   <span class=n>println</span><span class=p>(</span><span class=n>test</span><span class=p>(</span><span class=mf>2.0888</span><span class=p>,</span> <span class=mf>1.00222</span><span class=p>));</span>

   <span class=kt>float</span> <span class=n>array</span><span class=p>[</span><span class=mi>7</span><span class=p>];</span>
   <span class=n>array</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mf>21.999</span><span class=p>;</span>
<span class=p>}</span>
</pre></div><p>For now, there is no interoperability between integers and floating, so you can't add an integer to a floating point or cast a floating point to an integer. Those features will be added in the 0.9.1 version. The floating point support has been implemented using the Streaming SIMD Extension (SSE) of Intel processors. This won't work on processor that doesn't include support for SSE.</p><p>Another big improvement is that the position of the tokens in the source file are now collected through the parser. When an error or a warning arises during the compilation, the precise position of the error or the warning is printed to the console.</p><p>New options are available for eddic:</p><ul> <li>--ast : Print the Abstract Syntax Tree representation of the source</li> <li>--tac : Print the Three Address Code representation of the source</li> <li>--ast-only : Only print the Abstract Syntax Tree representation of the source (do not continue compilation after printing)</li> <li>--tac-only : Only print the Three Address Code representation of the source (do not continue compilation after printing)</li></ul><p>And, finally, some improvements have been made to the sources of the project.</p><h4>Download</h4><p>You can find the compiler sources on the Github repository: <a title="eddic on Github" href=https://github.com/wichtounet/eddic>https://github.com/wichtounet/eddic</a></p><p>The exact version I refer to is the v0.9 available in the github tags or directly as the release branch.</p></div> </div> <p> <a href=posts/2012/03/eddic-0-9-floating-point-support.html#disqus_thread data-disqus-identifier=cache/posts/2012/03/eddic-0-9-floating-point-support.html>Comments</a> </p></article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2012/02/cojac-a-numerical-problem-sniffer.html class=u-url>COJAC, A Numerical Problem Sniffer</a> <br><small>   Posted: <time class="published dt-published" datetime=2012-02-28T13:24:28+01:00>2012-02-28 13:24</time> </small></h1> <hr> <div class=p-summary> <div><p>During my bachelor at the HES-SO University of applied sciences in Fribourg, I worked on a Java project, <strong>COJAC</strong>.</p><p>COJAC is a tool performing <strong>On-the-fly code instrumentation</strong> to help uncover numerical problems with integer (overflows) and floating point (smearing, cancellation, infinity, NaN) arithmetic.</p><p>Yesterday, Dr Dobbs published an article by one of my professor Frédéric Bapst and myself.</p><p>This article discusses the question of numerical problems in programming, and focuses on the approach of using on-the-fly code instrumentation to uncover them at runtime. Two realizations are presented: a complete and stable solution for Java applications, and a proof-of-concept Valgrind add-on for Linux executables. Both tools require no intervention on the source code and no recompilation, and should be helpful as a diagnostic tool for developers, as well as for education purposes for undergraduate programmers.</p><p>If you are interested by this project, I invite you to read the article on Dr Dobbs : <a title="Project of the Month: Cojac, A Numerical Problem Sniffer" href=http://drdobbs.com/testing/232601564 target=_blank>Project of the Month: Cojac, A Numerical Problem Sniffer</a></p><p>You can also test the tool or browse the source code by downloading it on the <a title="COJAC - The numerical problem sniffer for Java" href=https://code.google.com/p/cojac/ target=_blank>COJAC website</a>.</p></div> </div> <p> <a href=posts/2012/02/cojac-a-numerical-problem-sniffer.html#disqus_thread data-disqus-identifier=cache/posts/2012/02/cojac-a-numerical-problem-sniffer.html>Comments</a> </p></article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2012/02/eddic-0-8-1-do-while-loop-and-better-optimization.html class=u-url>EDDIC 0.8.1 : do while loop and better optimization</a> <br><small>   Posted: <time class="published dt-published" datetime=2012-02-19T07:21:50+01:00>2012-02-19 07:21</time> </small></h1> <hr> <div class=p-summary> <div><p>Only three days after the 0.8 version, I finished the 0.8.1 version.</p><p>It's a minor version, so there is no big changes to the language. However, I added support for the <strong>do while loop</strong> in the source code.</p><p>Another change is that assignment is now returning a value. That allows you to make some code like this one:</p><div class=code><pre><span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=n>b</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span>
<span class=n>b</span> <span class=o>=</span> <span class=p>(</span><span class=n>a</span> <span class=o>=</span> <span class=mi>4</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
</pre></div><p>This new version includes also some new changes for the optimization engine. I implemented <strong>constant propagation</strong> and <strong>copy propagation</strong> for offset assignment. For example:</p><div class=code><pre><span class=n>a</span><span class=p>(</span><span class=mi>8</span><span class=p>)</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span>
<span class=n>b</span> <span class=o>=</span> <span class=n>a</span><span class=p>(</span><span class=mi>8</span><span class=p>);</span>
</pre></div><p>becomes:</p><div class=code><pre><span class=n>a</span><span class=p>(</span><span class=mi>8</span><span class=p>)</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span>
<span class=n>b</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span>
</pre></div><p>And the last change is that the concatenations that are detected to be constant after some optimization are made at compile-time by the optimization engine. This simplify a lot the generated code for source file with a lot of concatenations.</p><p>The next version (the 0.9) will introduce floating point operations and parameter passing with registers (probably only in 64 bit). It's also possible that I will try to implement a first version of global optimization.</p><h4>Download</h4><p>You can find the compiler sources on the Github repository: <a title="eddic on Github" href=https://github.com/wichtounet/eddic>https://github.com/wichtounet/eddic</a></p><p>The exact version I refer to is the v0.8.1 available in the github tags or directly as the release branch.</p></div> </div> <p> <a href=posts/2012/02/eddic-0-8-1-do-while-loop-and-better-optimization.html#disqus_thread data-disqus-identifier=cache/posts/2012/02/eddic-0-8-1-do-while-loop-and-better-optimization.html>Comments</a> </p></article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2012/02/assembly-language-step-by-step-book-review.html class=u-url>Assembly Language Step By Step, Programming with Linux - Book Review</a> <br><small>   Posted: <time class="published dt-published" datetime=2012-02-17T09:21:57+01:00>2012-02-17 09:21</time> </small></h1> <hr> <div class=p-summary> <div><p>To improve my skills in Intel Assembly, I ordered and read <strong>Assembly Language Step by Step</strong>, Programming with Linux, by Jeff Duntemann. Just for the record, I read it on my Amazon Kindle. </p><p>This book is really made for <strong>very</strong> beginners. The author uses a lot of metaphor to explain some concepts, comparing assembly to a game he explains in several pages... I didn't liked the writing style of this book. In my opinion, the author uses way too much metaphor and some things takes too many pages to be explained. Another problem of this book is the examples, there are covering tens of pages each. It is a good thing to have complete examples in a book, but having examples of more than 100 lines of code (not counting the comments) in a book is not really convenient (again, only in my opinion). </p><p>Another lack of this book is that it covers only 32 bit programming. For a book written in 2009, it is quite limited. And finally, I found it bad to not cover floating point. I think that this is an important subject. </p><p>Even if I'm not a fan of this book, most of the content is still interesting and you can learn the basis of assembler with it if you're patient with the writing style, the metaphors and the long examples. </p><p>If you are a real beginner in assembly and in programming in general, this book can still be valuable for you. </p><p>The first chapters are covering computer programming, processors, arithmetic in different bases and memory locations. Then, the following chapters are covering the tools (assembler, linker and visual tools for editing and debugging). After that, we are jumping in the heart of the subject by learning arithmetic computations, system calls and stack control. The bits instructions are covered in details in a whole chapter. Then, you will be introduced to the writing of functions and how to use string instructions to simplify your programs. The last (and very big) chapter is about using the functions of the C library to performs work like I/O operations, time calculations, print formatted text and generate random numbers. For this last I would have preferred to learn how to do all that operations using only assembly, but it is important to know how to call C functions. </p><p>To conclude, I will advice this book only to people who learn assembly as their first programming language. For the others, there is a high risk of be deceived. </p><p>Note that, if you want to follow the examples of this book, you'll certainly need the Insight Debugger. You can install this debugger by following the procedure described <a href=http://www.baptiste-wicht.com/2012/01/install-insight-debugger-linux-mint-ubuntu/ title="Install the Insight Debugger on Linux Mint (works for Ubuntu too)">here</a>.</p></div> </div> <p> <a href=posts/2012/02/assembly-language-step-by-step-book-review.html#disqus_thread data-disqus-identifier=cache/posts/2012/02/assembly-language-step-by-step-book-review.html>Comments</a> </p></article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2012/02/eddic-0-8-64bit-generation.html class=u-url>EDDIC 0.8 : 64bit generation</a> <br><small>   Posted: <time class="published dt-published" datetime=2012-02-16T13:44:32+01:00>2012-02-16 13:44</time> </small></h1> <hr> <div class=p-summary> <div><p>I just released the version 0.8.</p><p>The main change of this version is the addition of a <strong>64bit generation</strong>. If you compiles eddic in 64bit, the default output of the compiler will be 64 bit, otherwise it will be 32 bit. You can also select the output by setting command line switch (-32 and -64).</p><p>The biggest change at the side of the language is the support of command line arguments. If the main function is declared as main(string[] args), the args passed from the command line will be accessible.</p><p>I've also added two operators to the language : size() and length(). These operators allows the programmer to get the size of an array, respectively the length of a string. If the information is present at compile-time, the operator is replaced by the constant otherwise it is equivalent to a single memory access.</p><p>I've also made some improvements to the generated x86 code. For example, I'm using string instructions to simplify the generated code and lea and shl to perform fast multiplications. I also changed the syntax used in the generated assembly replacing AT&amp;T syntax by the Intel syntax.</p><p>I've added a new optimization technique, copy propagation. This technique keeps track of the assignment of variables to a variables to simplify the generated three-address-code.</p><h4>Download</h4><p>You can find the compiler sources on the Github repository : <a title="eddic on Github" href=https://github.com/wichtounet/eddic>https://github.com/wichtounet/eddic</a></p><p>The exact version I refer to is the v0.8 available in the github tags or directly as the release branch.</p></div> </div> <p> <a href=posts/2012/02/eddic-0-8-64bit-generation.html#disqus_thread data-disqus-identifier=cache/posts/2012/02/eddic-0-8-64bit-generation.html>Comments</a> </p></article> <article class="postbox h-entry post-text"> <h1 class=p-name><a href=posts/2012/02/local-optimization-on-three-address-code.html class=u-url>Local optimization of Three-Address-Code</a> <br><small>   Posted: <time class="published dt-published" datetime=2012-02-08T08:55:40+01:00>2012-02-08 08:55</time> </small></h1> <hr> <div class=p-summary> <div><p>Some compilers are using Three-Address-Code (TAC) as an intermediate representation. This representation is very simple to understand and write. Moreover, it's easy to run some optimization on this representation.</p><p>Each TAC statement has this general form : result = operand1 operator operand2</p><p>For example, here are some TAC statements:</p><div class=code><pre><span class=n>a</span> <span class=o>=</span> <span class=mi>1</span>
<span class=n>x</span> <span class=o>=</span> <span class=n>a</span> <span class=o>*</span> <span class=mi>3</span>
<span class=k>if</span> <span class=n>x</span> <span class=o>&gt;</span> <span class=n>a</span> <span class=k>goto</span> <span class=n>test</span>
<span class=n>param</span> <span class=s>"dddd"</span>
<span class=n>call</span> <span class=n>print</span>
<span class=nl>test:</span>
<span class=n>param</span> <span class=s>"asdf"</span>
<span class=n>call</span> <span class=n>print</span>
</pre></div><p>In this post, we will see some of the local optimizations that can be applied on TAC. A local optimization is an optimization that is applied locally to a basic block. A basic block is a set of TAC statements that has only one entry point and one exit point. Once the first instruction of the basic block is executed, the rest of the instructions are necessarily executed exactly once. These optimizations are easy to design and implement. If you want to run global optimizations (through all the basic blocks of a function) or even Interprocedural Optimization (IPO), you will need a far more complex framework to run optimizations. I will try to write something on global optimization when I will have implemented some of them in EDDI.</p><p>The goal of optimization is of course to replace some statements with more efficient statements. </p><p class=more><a href=posts/2012/02/local-optimization-on-three-address-code.html>Read more…</a></p></div> </div> <p> <a href=posts/2012/02/local-optimization-on-three-address-code.html#disqus_thread data-disqus-identifier=cache/posts/2012/02/local-optimization-on-three-address-code.html>Comments</a> </p></article> <div> <ul class=pager> <li class=previous> <a href=index-19.html rel=prev>← Newer posts</a> </li> <li class=next> <a href=index-17.html rel=next>Older posts →</a> </li> </ul> </div> <script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script> </div> </div> </div></div><footer> Contents © 2014 <a href=mailto:baptistewicht@gmail.com>Baptiste Wicht</a> - Powered by <a href=http://getnikola.com rel=nofollow>Nikola</a><a rel=license href=http://creativecommons.org/licenses/by/4.0/><img alt="Creative Commons License" style=padding-left:5px;border-width:0 src=assets/img/cc.png></a> <ul class=footer_inline_ul> </ul></footer> <script src=assets/js/all-nocdn.js type=text/javascript></script> <script type=text/javascript>
      $(document).ready(function() {
        jQuery.getJSON('/assets/js/tag_cloud_data.json', function(data) {
            var items = [];

            $.each(data, function(key, val) {
                items.push('<li><a href="' + val[1] +'" '+'data-weight="'+val[0]+'"'+'>' + key + '</a></li>');
            });

            $('<div/>', {
                'id': 'tags',
                html: '<ul>' + items.join('') + '</ul>'
            }).appendTo('body');

            if(!$('#tags_canvas').tagcanvas({
                textColour: '#FFFFFF',
                outlineColour: '#ff00ff',
                reverse: true,
                depth: 0.8,
                maxSpeed: 0.05,
                weight: true,
                weightFrom: "data-weight",
                weightSizeMin: 8,
                weightSizeMax: 24
            },'tags')) {
                //something went wrong, hide the canvas container
                $('#tags_container').hide();
            }});
        });
    </script><script type=text/javascript src=https://apis.google.com/js/platform.js></script></body></html>